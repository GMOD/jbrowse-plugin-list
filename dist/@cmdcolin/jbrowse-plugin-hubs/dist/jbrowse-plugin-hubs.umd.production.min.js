"use strict";var JBrowsePluginHubs=(()=>{var g=Object.create;var a=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var w=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty;var j=(e,s)=>()=>(s||e((s={exports:{}}).exports,s),s.exports),k=(e,s)=>{for(var n in s)a(e,n,{get:s[n],enumerable:!0})},u=(e,s,n,t)=>{if(s&&typeof s=="object"||typeof s=="function")for(let r of w(s))!x.call(e,r)&&r!==n&&a(e,r,{get:()=>s[r],enumerable:!(t=y(s,r))||t.enumerable});return e};var A=(e,s,n)=>(n=e!=null?g(h(e)):{},u(s||!e||!e.__esModule?a(n,"default",{value:e,enumerable:!0}):n,e)),v=e=>u(a({},"__esModule",{value:!0}),e);var b=j((M,d)=>{d.exports=JBrowseExports["@jbrowse/core/Plugin"]});var S={};k(S,{default:()=>c,fetchAssemblyHub:()=>l,fetchingAssemblies:()=>o});var f=A(b());var o=new Set;function H(e){let[s,n]=e.split("_");if(!n)return;let t=n.match(/.{1,3}/g);if(!t||t.length<3)return;let[r,i,p]=t;return`https://jbrowse.org/hubs/genark/${s}/${r}/${i}/${p}/${e}/config.json`}function $(e){return e.startsWith("GCA_")||e.startsWith("GCF_")?H(e):`https://jbrowse.org/ucsc/${e}/config.json`}async function l(e,s){let n=$(s);if(n)try{let t=await fetch(n);if(!t.ok)throw new Error(`HTTP ${t.status} from ${n}`);let r=await t.json();for(let i of r.assemblies??[])e.assemblyManager.get(i.name)||e.addSessionAssembly(i);for(let i of r.tracks??[])e.addTrackConf(i)}catch(t){console.error(t),e.notifyError(`Failed to load assembly ${s}: ${t}`,t)}finally{o.delete(s)}}var m="1.0.4";var c=class extends f.default{name="HubsViewerPlugin";version=m;install(s){s.addToExtensionPoint("Core-handleUnrecognizedAssembly",(n,t)=>{let r=t.session,i=t.assemblyName;!r||!i||o.has(i)||(o.add(i),l(r,i))})}configure(s){}};return v(S);})();
//# sourceMappingURL=jbrowse-plugin-hubs.umd.production.min.js.map

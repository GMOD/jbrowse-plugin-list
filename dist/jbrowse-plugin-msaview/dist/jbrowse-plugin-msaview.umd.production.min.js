"use strict";var JBrowsePluginMsaView=(()=>{var DQ=Object.create;var bs=Object.defineProperty;var _Q=Object.getOwnPropertyDescriptor;var kQ=Object.getOwnPropertyNames;var NQ=Object.getPrototypeOf,LQ=Object.prototype.hasOwnProperty;var p=(e,t)=>()=>(e&&(t=e(e=0)),t);var H=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),rt=(e,t)=>{for(var r in t)bs(e,r,{get:t[r],enumerable:!0})},Yd=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of kQ(t))!LQ.call(e,o)&&o!==r&&bs(e,o,{get:()=>t[o],enumerable:!(n=_Q(t,o))||n.enumerable});return e};var d=(e,t,r)=>(r=e!=null?DQ(NQ(e)):{},Yd(t||!e||!e.__esModule?bs(r,"default",{value:e,enumerable:!0}):r,e)),FQ=e=>Yd(bs({},"__esModule",{value:!0}),e);var jd=H((Zk,qd)=>{qd.exports=JBrowseExports["@jbrowse/core/Plugin"]});var Fn=H((eN,Vd)=>{Vd.exports=JBrowseExports["@jbrowse/core/configuration"]});var ie=H((tN,Wd)=>{Wd.exports=JBrowseExports["@jbrowse/core/util"]});var Lt=H((rN,Kd)=>{Kd.exports=JBrowseExports["mobx-state-tree"]});var $d=H((nN,zd)=>{zd.exports=JBrowseExports["@mui/material/utils"]});var k,$=p(()=>{"use client";k=d($d(),1)});var R=H((iN,Xd)=>{Xd.exports=JBrowseExports["react/jsx-runtime"]});var b=H((cN,tm)=>{tm.exports=JBrowseExports.react});var G=H((lN,rm)=>{rm.exports=JBrowseExports["mobx-react"]});var Ve=H((AN,nm)=>{nm.exports=JBrowseExports["tss-react/mui"]});var gl=H((xN,fm)=>{fm.exports=JBrowseExports["@jbrowse/core/pluggableElementTypes"]});var gm=H((wN,mm)=>{mm.exports=JBrowseExports["@jbrowse/core/data_adapters/BaseAdapter"]});function bi(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");hl(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Cl(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ho(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return i}function Co(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var hl,Si=p(()=>{hl=function(e,t){return hl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},hl(e,t)}});function Sr(e){return typeof e=="function"}var Qs=p(()=>{});function Ms(e){var t=function(n){Error.call(n),n.stack=new Error().stack},r=e(t);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var El=p(()=>{});var vs,pm=p(()=>{El();vs=Ms(function(e){return function(r){e(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,o){return o+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}})});function Il(e,t){if(e){var r=e.indexOf(t);0<=r&&e.splice(r,1)}}var hm=p(()=>{});function Em(e){return e instanceof Ts||e&&"closed"in e&&Sr(e.remove)&&Sr(e.add)&&Sr(e.unsubscribe)}function Cm(e){Sr(e)?e():e.unsubscribe()}var Ts,NN,Im=p(()=>{Si();Qs();pm();hm();Ts=(function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,r,n,o,i;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=Cl(s),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(h){t={error:h}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}else s.remove(this);var A=this.initialTeardown;if(Sr(A))try{A()}catch(h){i=h instanceof vs?h.errors:[h]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var f=Cl(u),m=f.next();!m.done;m=f.next()){var g=m.value;try{Cm(g)}catch(h){i=i??[],h instanceof vs?i=Co(Co([],ho(i)),ho(h.errors)):i.push(h)}}}catch(h){n={error:h}}finally{try{m&&!m.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}}if(i)throw new vs(i)}},e.prototype.add=function(t){var r;if(t&&t!==this)if(this.closed)Cm(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(t)}},e.prototype._hasParent=function(t){var r=this._parentage;return r===t||Array.isArray(r)&&r.includes(t)},e.prototype._addParent=function(t){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(t),r):r?[r,t]:t},e.prototype._removeParent=function(t){var r=this._parentage;r===t?this._parentage=null:Array.isArray(r)&&Il(r,t)},e.prototype.remove=function(t){var r=this._finalizers;r&&Il(r,t),t instanceof e&&t._removeParent(this)},e.EMPTY=(function(){var t=new e;return t.closed=!0,t})(),e})(),NN=Ts.EMPTY});var fn,Ds=p(()=>{fn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}});var Eo,xl=p(()=>{Si();Eo={setTimeout:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=Eo.delegate;return o?.setTimeout?o.setTimeout.apply(o,Co([e,t],ho(r))):setTimeout.apply(void 0,Co([e,t],ho(r)))},clearTimeout:function(e){var t=Eo.delegate;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0}});function xm(e){Eo.setTimeout(function(){var t=fn.onUnhandledError;if(t)t(e);else throw e})}var ym=p(()=>{Ds();xl()});function yl(){}var wm=p(()=>{});function bm(e){return wl("E",void 0,e)}function Sm(e){return wl("N",e,void 0)}function wl(e,t,r){return{kind:e,value:t,error:r}}var Bm,Qm=p(()=>{Bm=(function(){return wl("C",void 0,void 0)})()});function Mm(e){fn.useDeprecatedSynchronousErrorHandling&&Bl&&(Bl.errorThrown=!0,Bl.error=e)}var Bl,vm=p(()=>{Ds();Bl=null});function bl(e,t){return JQ.call(e,t)}function _s(e){fn.useDeprecatedSynchronousErrorHandling?Mm(e):xm(e)}function YQ(e){throw e}function Sl(e,t){var r=fn.onStoppedNotification;r&&Eo.setTimeout(function(){return r(e,t)})}var Ql,JQ,UQ,Ml,qQ,vl=p(()=>{Si();Qs();Im();Ds();ym();wm();Qm();xl();vm();Ql=(function(e){bi(t,e);function t(r){var n=e.call(this)||this;return n.isStopped=!1,r?(n.destination=r,Em(r)&&r.add(n)):n.destination=qQ,n}return t.create=function(r,n,o){return new Ml(r,n,o)},t.prototype.next=function(r){this.isStopped?Sl(Sm(r),this):this._next(r)},t.prototype.error=function(r){this.isStopped?Sl(bm(r),this):(this.isStopped=!0,this._error(r))},t.prototype.complete=function(){this.isStopped?Sl(Bm,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(r){this.destination.next(r)},t.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t})(Ts),JQ=Function.prototype.bind;UQ=(function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var r=this.partialObserver;if(r.next)try{r.next(t)}catch(n){_s(n)}},e.prototype.error=function(t){var r=this.partialObserver;if(r.error)try{r.error(t)}catch(n){_s(n)}else _s(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(r){_s(r)}},e})(),Ml=(function(e){bi(t,e);function t(r,n,o){var i=e.call(this)||this,s;if(Sr(r)||!r)s={next:r??void 0,error:n??void 0,complete:o??void 0};else{var a;i&&fn.useDeprecatedNextContext?(a=Object.create(r),a.unsubscribe=function(){return i.unsubscribe()},s={next:r.next&&bl(r.next,a),error:r.error&&bl(r.error,a),complete:r.complete&&bl(r.complete,a)}):s=r}return i.destination=new UQ(s),i}return t})(Ql);qQ={closed:!0,next:yl,error:YQ,complete:yl}});function jQ(e){return Sr(e?.lift)}function ks(e){return function(t){if(jQ(t))return t.lift(function(r){try{return e(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}var Tl=p(()=>{Qs()});function Tm(e,t,r,n,o){return new VQ(e,t,r,n,o)}var VQ,Dm=p(()=>{Si();vl();VQ=(function(e){bi(t,e);function t(r,n,o,i,s,a){var c=e.call(this,r)||this;return c.onFinalize=s,c.shouldUnsubscribe=a,c._next=n?function(l){try{n(l)}catch(A){r.error(A)}}:e.prototype._next,c._error=i?function(l){try{i(l)}catch(A){r.error(A)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=o?function(){try{o()}catch(l){r.error(l)}finally{this.unsubscribe()}}:e.prototype._complete,c}return t.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},t})(Ql)});var _m,km=p(()=>{El();_m=Ms(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}})});function Dl(e,t){var r=typeof t=="object";return new Promise(function(n,o){var i=new Ml({next:function(s){n(s),i.unsubscribe()},error:o,complete:function(){r?n(t.defaultValue):o(new _m)}});e.subscribe(i)})}var Nm=p(()=>{km();vl()});var Lm=p(()=>{});function Fm(e,t,r,n,o){return function(i,s){var a=r,c=t,l=0;i.subscribe(Tm(s,function(A){var u=l++;c=a?e(c,A,u):(a=!0,A),n&&s.next(c)},o&&(function(){a&&s.next(c),s.complete()})))}}var Rm=p(()=>{Dm()});function Pm(e,t){return ks(Fm(e,t,arguments.length>=2,!1,!0))}var Gm=p(()=>{Rm();Tl()});function _l(){return ks(function(e,t){Pm(WQ,[])(e).subscribe(t)})}var WQ,Om=p(()=>{Gm();Tl();WQ=function(e,t){return e.push(t),e}});var Hm=p(()=>{Nm();Lm();Om()});var Ym={};rt(Ym,{default:()=>Ns});var Jm,Um,Ns,qm=p(()=>{"use strict";Jm=d(Fn()),Um=d(gm());Hm();Ns=class extends Um.BaseAdapter{async configurePre(){let t=this.getSubAdapter;if(t)return(await t({...(0,Jm.readConfObject)(this.config),type:"BgzipFastaAdapter"})).dataAdapter;throw new Error("no get subadapter")}configure(){return this.configureP??=this.configurePre().catch(t=>{throw this.configureP=void 0,t}),this.configureP}async getMSARefs(){return this.refNamesP??=this.configure().then(t=>t.getRefNames()).catch(t=>{throw this.refNamesP=void 0,t}),this.refNamesP}async getMSAList(){let t=await this.getMSARefs(),r=new Set,n=this.getConf("msaRegex"),o=new RegExp(n);for(let i=0,s=t.length;i<s;i++)r.add(t[i].split(o)[0]);return[...r]}async getMSA(t){let r=await this.configure(),n=await r.getRefNames(),o=[];for(let i=0,s=n.length;i<s;i++){let a=n[i];a.startsWith(t)&&o.push(a)}return Dl(r.getFeaturesInMultipleRegions(o.map(i=>({refName:i,start:0,end:1e9,assemblyName:""}))).pipe(_l()))}}});var he=H((TL,Km)=>{Km.exports=JBrowseExports["@jbrowse/core/ui"]});var N=H((DL,zm)=>{zm.exports=JBrowseExports["@mui/material"]});var Zm=H(Xm=>{"use strict";var Io=b();function KQ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zQ=typeof Object.is=="function"?Object.is:KQ,$Q=Io.useState,XQ=Io.useEffect,ZQ=Io.useLayoutEffect,e1=Io.useDebugValue;function t1(e,t){var r=t(),n=$Q({inst:{value:r,getSnapshot:t}}),o=n[0].inst,i=n[1];return ZQ(function(){o.value=r,o.getSnapshot=t,Nl(o)&&i({inst:o})},[e,r,t]),XQ(function(){return Nl(o)&&i({inst:o}),e(function(){Nl(o)&&i({inst:o})})},[e]),e1(r),r}function Nl(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!zQ(e,r)}catch{return!0}}function r1(e,t){return t()}var n1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?r1:t1;Xm.useSyncExternalStore=Io.useSyncExternalStore!==void 0?Io.useSyncExternalStore:n1});var tg=H((NL,eg)=>{"use strict";eg.exports=Zm()});var Hg,ta,Zl=p(()=>{"use client";$();Hg=d(R(),1),ta=(0,k.createSvgIcon)((0,Hg.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings")});var Jg,ra,eA=p(()=>{"use client";$();Jg=d(R(),1),ra=(0,k.createSvgIcon)((0,Jg.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore")});function N1(){return jg||(jg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function L1(){return Vg||(Vg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}function F1(e){let t=new Promise((r,n)=>{let o=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{r(Jn(e.result)),o()},s=()=>{n(e.error),o()};e.addEventListener("success",i),e.addEventListener("error",s)});return oa.set(t,e),t}function R1(e){if(iA.has(e))return;let t=new Promise((r,n)=>{let o=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{r(),o()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});iA.set(e,t)}function $g(e){sA=e(sA)}function P1(e){return L1().includes(e)?function(...t){return e.apply(aA(this),t),Jn(this.request)}:function(...t){return Jn(e.apply(aA(this),t))}}function G1(e){return typeof e=="function"?P1(e):(e instanceof IDBTransaction&&R1(e),oA(e,N1())?new Proxy(e,sA):e)}function Jn(e){if(e instanceof IDBRequest)return F1(e);if(rA.has(e))return rA.get(e);let t=G1(e);return t!==e&&(rA.set(e,t),oa.set(t,e)),t}function Di(e,t,{blocked:r,upgrade:n,blocking:o,terminated:i}={}){let s=indexedDB.open(e,t),a=Jn(s);return n&&s.addEventListener("upgradeneeded",c=>{n(Jn(s.result),c.oldVersion,c.newVersion,Jn(s.transaction),c)}),r&&s.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),a.then(c=>{i&&c.addEventListener("close",()=>i()),o&&c.addEventListener("versionchange",l=>o(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}function Wg(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(nA.get(t))return nA.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,o=H1.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(o||O1.includes(r)))return;let i=async function(s,...a){let c=this.transaction(s,o?"readwrite":"readonly"),l=c.store;return n&&(l=l.index(a.shift())),(await Promise.all([l[r](...a),o&&c.done]))[0]};return nA.set(t,i),i}async function*Y1(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;let r=new Proxy(t,U1);for(Xg.set(r,t),oa.set(r,aA(t));t;)yield r,t=await(cA.get(r)||t.continue()),cA.delete(r)}function zg(e,t){return t===Symbol.asyncIterator&&oA(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&oA(e,[IDBIndex,IDBObjectStore])}var oA,jg,Vg,iA,rA,oa,sA,aA,O1,H1,nA,J1,Kg,cA,Xg,U1,ia=p(()=>{oA=(e,t)=>t.some(r=>e instanceof r);iA=new WeakMap,rA=new WeakMap,oa=new WeakMap;sA={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return iA.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Jn(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};aA=e=>oa.get(e);O1=["get","getKey","getAll","getAllKeys","count"],H1=["put","add","delete","clear"],nA=new Map;$g(e=>({...e,get:(t,r,n)=>Wg(t,r)||e.get(t,r,n),has:(t,r)=>!!Wg(t,r)||e.has(t,r)}));J1=["continue","continuePrimaryKey","advance"],Kg={},cA=new WeakMap,Xg=new WeakMap,U1={get(e,t){if(!J1.includes(t))return e[t];let r=Kg[t];return r||(r=Kg[t]=function(...n){cA.set(this,Xg.get(this)[t](...n))}),r}};$g(e=>({...e,get(t,r,n){return zg(t,r)?Y1:e.get(t,r,n)},has(t,r){return zg(t,r)||e.has(t,r)}}))});var up,ca,lA=p(()=>{"use client";$();up=d(R(),1),ca=(0,k.createSvgIcon)((0,up.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew")});function Un(e){let{children:t,...r}=e;return AA.default.createElement(fp.Link,{...r,target:"_blank",rel:"noreferrer"},t," ",AA.default.createElement(ca,{fontSize:"small"}))}var AA,fp,la=p(()=>{"use strict";AA=d(b());lA();fp=d(N())});var Bp=p(()=>{});var bp=p(()=>{Bp()});function cM(e){try{let s=U.__wbindgen_add_to_stack_pointer(-16),a=CA(e,U.__wbindgen_export2),c=ga;U.decompress_all(s,a,c);var t=Ke().getInt32(s+0,!0),r=Ke().getInt32(s+4,!0),n=Ke().getInt32(s+8,!0),o=Ke().getInt32(s+12,!0);if(o)throw EA(n);var i=pA(t,r).slice();return U.__wbindgen_export(t,r*1,1),i}finally{U.__wbindgen_add_to_stack_pointer(16)}}function lM(e){try{let o=U.__wbindgen_add_to_stack_pointer(-16),i=CA(e,U.__wbindgen_export2),s=ga;U.decompress_block(o,i,s);var t=Ke().getInt32(o+0,!0),r=Ke().getInt32(o+4,!0),n=Ke().getInt32(o+8,!0);if(n)throw EA(r);return Mo.__wrap(t)}finally{U.__wbindgen_add_to_stack_pointer(16)}}function AM(e,t,r,n,o){try{let c=U.__wbindgen_add_to_stack_pointer(-16),l=CA(e,U.__wbindgen_export2),A=ga;U.decompress_chunk_slice(c,l,A,t,r,n,o);var i=Ke().getInt32(c+0,!0),s=Ke().getInt32(c+4,!0),a=Ke().getInt32(c+8,!0);if(a)throw EA(s);return Qo.__wrap(i)}finally{U.__wbindgen_add_to_stack_pointer(16)}}function uM(e,t){let r=Error(Tp(e,t));return dM(r)}function fM(e,t){throw new Error(Tp(e,t))}function dM(e){_i===qr.length&&qr.push(qr.length+1);let t=_i;return _i=qr[t],qr[t]=e,t}function mM(e){e<132||(qr[e]=_i,_i=e)}function Mp(e,t){return e=e>>>0,gM().subarray(e/8,e/8+t)}function pA(e,t){return e=e>>>0,hA().subarray(e/1,e/1+t)}function Ke(){return(So===null||So.buffer.detached===!0||So.buffer.detached===void 0&&So.buffer!==U.memory.buffer)&&(So=new DataView(U.memory.buffer)),So}function gM(){return(fa===null||fa.byteLength===0)&&(fa=new Float64Array(U.memory.buffer)),fa}function Tp(e,t){return e=e>>>0,CM(e,t)}function hA(){return(da===null||da.byteLength===0)&&(da=new Uint8Array(U.memory.buffer)),da}function pM(e){return qr[e]}function CA(e,t){let r=t(e.length*1,1)>>>0;return hA().set(e,r/1),ga=e.length,r}function EA(e){let t=pM(e);return mM(e),t}function CM(e,t){return gA+=t,gA>=hM&&(ma=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),ma.decode(),gA=t),ma.decode(hA().subarray(e,e+t))}function EM(e){U=e}var Yn,vp,Qo,Mo,Sp,Qp,So,fa,da,qr,_i,ma,hM,gA,ga,U,Dp=p(()=>{Yn={};Yn.d=(e,t)=>{for(var r in t)Yn.o(t,r)&&!Yn.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})};Yn.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);Yn.r=e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};vp={};Yn.r(vp);Yn.d(vp,{ChunkSliceResult:()=>Qo,DecompressResult:()=>Mo,__wbg_Error_8c4e43fe74559d73:()=>uM,__wbg___wbindgen_throw_be289d5034ed271b:()=>fM,__wbg_set_wasm:()=>EM,decompress_all:()=>cM,decompress_block:()=>lM,decompress_chunk_slice:()=>AM});Qo=class e{static __wrap(t){t=t>>>0;let r=Object.create(e.prototype);return r.__wbg_ptr=t,Sp.register(r,r.__wbg_ptr,r),r}__destroy_into_raw(){let t=this.__wbg_ptr;return this.__wbg_ptr=0,Sp.unregister(this),t}free(){let t=this.__destroy_into_raw();U.__wbg_chunksliceresult_free(t,0)}get buffer(){try{let o=U.__wbindgen_add_to_stack_pointer(-16);U.chunksliceresult_buffer(o,this.__wbg_ptr);var t=Ke().getInt32(o+0,!0),r=Ke().getInt32(o+4,!0),n=pA(t,r).slice();return U.__wbindgen_export(t,r*1,1),n}finally{U.__wbindgen_add_to_stack_pointer(16)}}get cpositions(){try{let o=U.__wbindgen_add_to_stack_pointer(-16);U.chunksliceresult_cpositions(o,this.__wbg_ptr);var t=Ke().getInt32(o+0,!0),r=Ke().getInt32(o+4,!0),n=Mp(t,r).slice();return U.__wbindgen_export(t,r*8,8),n}finally{U.__wbindgen_add_to_stack_pointer(16)}}get dpositions(){try{let o=U.__wbindgen_add_to_stack_pointer(-16);U.chunksliceresult_dpositions(o,this.__wbg_ptr);var t=Ke().getInt32(o+0,!0),r=Ke().getInt32(o+4,!0),n=Mp(t,r).slice();return U.__wbindgen_export(t,r*8,8),n}finally{U.__wbindgen_add_to_stack_pointer(16)}}};Symbol.dispose&&(Qo.prototype[Symbol.dispose]=Qo.prototype.free);Mo=class e{static __wrap(t){t=t>>>0;let r=Object.create(e.prototype);return r.__wbg_ptr=t,Qp.register(r,r.__wbg_ptr,r),r}__destroy_into_raw(){let t=this.__wbg_ptr;return this.__wbg_ptr=0,Qp.unregister(this),t}free(){let t=this.__destroy_into_raw();U.__wbg_decompressresult_free(t,0)}get bytes_read(){return U.decompressresult_bytes_read(this.__wbg_ptr)>>>0}get data(){try{let o=U.__wbindgen_add_to_stack_pointer(-16);U.decompressresult_data(o,this.__wbg_ptr);var t=Ke().getInt32(o+0,!0),r=Ke().getInt32(o+4,!0),n=pA(t,r).slice();return U.__wbindgen_export(t,r*1,1),n}finally{U.__wbindgen_add_to_stack_pointer(16)}}};Symbol.dispose&&(Mo.prototype[Symbol.dispose]=Mo.prototype.free);Sp=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>U.__wbg_chunksliceresult_free(e>>>0,1)),Qp=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>U.__wbg_decompressresult_free(e>>>0,1));So=null;fa=null;da=null;qr=new Array(128).fill(void 0);qr.push(void 0,null,!0,!1);_i=qr.length;ma=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});ma.decode();hM=2146435072,gA=0;ga=0});var IA=p(()=>{Dp()});var _p=p(()=>{});var Np=p(()=>{bp();IA();_p()});var Lp=p(()=>{Np();IA()});function xA(){let e=(0,vo.useRef)(null),[t,r]=(0,vo.useState)({width:void 0,height:void 0});return(0,vo.useEffect)(()=>{if(!e.current)return;let n=typeof window<"u"&&"ResizeObserver"in window?window.ResizeObserver:void 0;if(!n)return;let o=new n(i=>{r({width:i[0].contentRect.width,height:i[0].contentRect.height})});return o.observe(e.current),()=>{o.disconnect()}},[]),[e,t]}var vo,Fp=p(()=>{vo=d(b(),1)});var Pp=H((m3,Rp)=>{Rp.exports=JBrowseExports["react-dom"]});var Op=H((g3,Gp)=>{Gp.exports=JBrowseExports["react-dom/client"]});function Hp(e){let t="",r=!1;for(let n=0,o=e.length;n<o;n++){let i=e[n];i==="<"?r=!0:i===">"?r=!1:r||(t+=i)}return t}var yA=p(()=>{});var Jp=p(()=>{});var Up=p(()=>{});var Yp=p(()=>{});function pa(e){return typeof e=="object"&&e!==null&&"uri"in e&&!!e.uri}var IM,wA=p(()=>{IM=d(Lt(),1);Yp()});var jr=H((x3,qp)=>{qp.exports=JBrowseExports.mobx});var xM,jp=p(()=>{xM=d(jr(),1)});var Vp=p(()=>{});var Wp=p(()=>{});var To,ha,BA,bA,yM,ki,Ca,Kp=p(()=>{To={METHOD:"method",PROPERTY:"property"},ha=class{constructor(t,r){this.inst=t,this.args=r}},BA=class extends ha{constructor(t,r){super(t,r),this.type=To.METHOD}execute(t){t[this.inst](...this.args)}},bA=class extends ha{constructor(t,r){super(t,r),this.type=To.PROPERTY}execute(t){t[this.inst]=this.args[0]}},yM={[To.METHOD]:BA,[To.PROPERTY]:bA},ki=class{constructor(t,r,n){return new yM[t](r,n)}};ki.METHOD=To.METHOD;ki.PROPERTY=To.PROPERTY;Ca=ki});var zp,Qr,Ea,SA=p(()=>{Kp();zp=Object.freeze({METHODS:["addHitRegion","arc","arcTo","beginPath","bezierCurveTo","clearHitRegions","clearRect","clip","closePath","drawFocusIfNeeded","drawImage","ellipse","fill","fillRect","fillText","lineTo","moveTo","putImageData","quadraticCurveTo","rect","removeHitRegion","resetTransform","restore","rotate","save","scale","scrollPathIntoView","setLineDash","setTransform","stroke","strokeRect","strokeText","transform","translate"],PROPERTIES:["direction","fillStyle","filter","font","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","imageSmoothingQuality","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline"]}),Qr=Object.freeze({sequence:Symbol.for("sequence"),push:Symbol.for("push"),fromJSON:Symbol.for("fromJSON")}),Ea=class{constructor(t=null){this[Qr.sequence]=[],t&&this[Qr.fromJSON](t)}[Qr.fromJSON](t={sequence:[]}){t.sequence.forEach(({type:r,inst:n,args:o})=>{this[Qr.push](r,n,o)})}[Qr.push](t,r,n){this[Qr.sequence].push(new Ca(t,r,n))}execute(t){t.save(),this[Qr.sequence].forEach(r=>r.execute(t)),t.restore()}toJSON(){return{sequence:this[Qr.sequence]}}};zp.METHODS.forEach(e=>{Object.defineProperty(Ea.prototype,e,{value:function(...r){this[Qr.push](Ca.METHOD,e,r)},writable:!1,enumerable:!0,configurable:!1})});zp.PROPERTIES.forEach(e=>{Object.defineProperty(Ea.prototype,e,{get(){throw`Invalid canvas sequencer interaction, cannot get ${e}.`},set(t){this[Qr.push](Ca.PROPERTY,e,[t])},enumerable:!0,configurable:!1})})});var v3,Xp=p(()=>{SA();v3=Object.freeze({sequence:Symbol.for("sequence"),push:Symbol.for("push")})});var Zp=p(()=>{Xp();SA()});var th=H((L3,eh)=>{eh.exports=!1});var wM,rh=p(()=>{Zp();wM=d(th(),1)});var BM,bM,nh=p(()=>{BM=d(R(),1),bM=d(b(),1)});var oh=p(()=>{});var O3,H3,J3,U3,ih=p(()=>{O3=new Uint8Array([99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]),H3=new Uint8Array([82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125]),J3=new Uint8Array([1,2,4,8,16,32,64,128,27,54]),U3=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298])});var sh=p(()=>{});var ah=p(()=>{});var ch=p(()=>{ia()});var Ia,lh=p(()=>{Ia=d(Lt(),1)});function MA(e,t=10){let r=String(e),n=0;for(let o=0,i=r.length;o<i;o++)n+=MM[r.charCodeAt(o)]??vM;return n*t}function vA(e){let t=0;if(e.length===0)return t;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);t=(t<<5)-t+n,t|=0}return t}function TM(e){let{uri:t,baseUri:r=""}=e,n;try{n=new URL(t,r).href}catch{n=t}return n}function TA(e){return tr(e)?pa(e)?TM(e):JSON.stringify(e):String(e)}function Ah(e){let t=/(^|[\s\n]|<[A-Za-z]*\/?>)((?:https?|ftp):\/\/[-A-Z0-9+\u0026\u2019@#/%?=()~_|!:,.;]*[-A-Z0-9+\u0026@#/%=~()_|])/gi;return e.replaceAll(t,`$1<a href='$2' target="_blank">$2</a>`)}function uh(e,t){let{padding:r=30,minWidth:n=80,fontSize:o=12,maxWidth:i=1e3,stripHTML:s=!1}=t||{};return DA(e.map(a=>TA(a)).map(a=>s?Hp(a):a).map(a=>MA(a,o)).map(a=>Math.min(Math.max(a+r,n),i)))}function DA(e,t=Number.NEGATIVE_INFINITY){let r=t;for(let n of e)r=Math.max(n,r);return r}function tr(e){return typeof e=="object"&&e!==null}var QA,Do,SM,QM,n5,o5,i5,s5,MM,vM,hn=p(()=>{QA=d(b(),1);Lp();Do=d(Lt(),1),SM=d(Pp(),1),QM=d(Op(),1);yA();wA();wA();jp();Vp();Wp();yA();rh();nh();oh();ih();sh();ah();Jp();Up();lh();ch();n5=180/Math.PI,o5=Math.PI/180,i5=/electron/i.test(typeof navigator<"u"?navigator.userAgent:""),s5=typeof jest>"u"?typeof window<"u"&&window.requestIdleCallback?window.requestIdleCallback:e=>setTimeout(()=>{e()},1):e=>{e()},MM=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2796875,.2765625,.3546875,.5546875,.5546875,.8890625,.665625,.190625,.3328125,.3328125,.3890625,.5828125,.2765625,.3328125,.2765625,.3015625,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.2765625,.2765625,.584375,.5828125,.584375,.5546875,1.0140625,.665625,.665625,.721875,.721875,.665625,.609375,.7765625,.721875,.2765625,.5,.665625,.5546875,.8328125,.721875,.7765625,.665625,.7765625,.721875,.665625,.609375,.721875,.665625,.94375,.665625,.665625,.609375,.2765625,.3546875,.2765625,.4765625,.5546875,.3328125,.5546875,.5546875,.5,.5546875,.5546875,.2765625,.5546875,.5546875,.221875,.240625,.5,.221875,.8328125,.5546875,.5546875,.5546875,.5546875,.3328125,.5,.2765625,.5546875,.5,.721875,.5,.5,.5,.3546875,.259375,.353125,.5890625],vM=.5279276315789471});var bh=H((nP,Bh)=>{Bh.exports=JBrowseExports["@jbrowse/core/pluggableElementTypes/ViewType"]});var Qh,Mh,No,RA=p(()=>{Qh=d(R(),1),Mh=d(b(),1),No=class extends Mh.Component{constructor(t){super(t),this.state={error:void 0}}componentDidCatch(t,r){console.error("ErrorBoundary caught an error:",t,r),this.setState({error:t})}render(){return this.state.error?(0,Qh.jsx)(this.props.FallbackComponent,{error:this.state.error}):this.props.children}}});var dt,PA,vh,Th,Dh=p(()=>{dt=d(b(),1),PA=d(G(),1),vh=(0,PA.observer)(function({model:e}){let{resizeHandleWidth:t}=e,[r,n]=(0,dt.useState)(!1),o=(0,dt.useRef)(!1),i=(0,dt.useRef)(0);return(0,dt.useEffect)(()=>{function s(c){c.preventDefault();let l=c.clientX;if(i.current===0)i.current=c.clientX;else{let A=l-i.current;A&&(o.current||(o.current=!0,window.requestAnimationFrame(()=>{e.setTreeAreaWidth(e.treeAreaWidth+A),o.current=!1,i.current=c.clientX})))}}function a(){i.current=0,r&&n(!1)}return r?(document.addEventListener("mousemove",s,!0),document.addEventListener("mouseup",a,!0),()=>{document.removeEventListener("mousemove",s,!0),document.removeEventListener("mouseup",a,!0)}):()=>{}},[r,e]),dt.default.createElement("div",null,dt.default.createElement("div",{onMouseDown:()=>{n(!0)},style:{cursor:"ew-resize",height:"100%",width:t,background:"rgba(200,200,200)",position:"relative"}}))}),Th=(0,PA.observer)(function({model:e}){let{resizeHandleWidth:t}=e,[r,n]=(0,dt.useState)(!1),o=(0,dt.useRef)(!1),i=(0,dt.useRef)(0);return(0,dt.useEffect)(()=>{function s(c){c.preventDefault();let l=c.clientY;if(i.current===0)i.current=c.clientY;else{let A=l-i.current;A&&(o.current||(o.current=!0,window.requestAnimationFrame(()=>{e.setHeight(e.height+A),o.current=!1,i.current=c.clientY})))}}function a(){i.current=0,r&&n(!1)}return r?(document.addEventListener("mousemove",s,!0),document.addEventListener("mouseup",a,!0),()=>{document.removeEventListener("mousemove",s,!0),document.removeEventListener("mouseup",a,!0)}):()=>{}},[r,e]),dt.default.createElement("div",null,dt.default.createElement("div",{onMouseDown:()=>{n(!0)},style:{cursor:"ns-resize",width:"100%",height:t,background:"rgba(200,200,200)",position:"relative"}}))})});var _h,kh,Nh=p(()=>{"use client";$();_h=d(R(),1),kh=(0,k.createSvgIcon)((0,_h.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown")});function RM(){let e=document.getSelection();if(!e?.rangeCount)return()=>{};let t=document.activeElement,r=[];for(let o=0;o<e.rangeCount;o++)r.push(e.getRangeAt(o));let n=t?.tagName.toUpperCase();return(n==="INPUT"||n==="TEXTAREA")&&t?.blur(),e.removeAllRanges(),()=>{if(e.type==="Caret"&&e.removeAllRanges(),!e.rangeCount)for(let o of r)e.addRange(o);t?.focus()}}function Ni(e,t){let r=t?.debug||!1,n=!1,o,i,s=null,a;try{if(o=RM(),i=document.createRange(),s=document.getSelection(),a=document.createElement("span"),a.textContent=e,a.ariaHidden="true",a.style.all="unset",a.style.position="fixed",a.style.top="0",a.style.clip="rect(0, 0, 0, 0)",a.style.whiteSpace="pre",a.style.webkitUserSelect="text",a.style.MozUserSelect="text",a.style.msUserSelect="text",a.style.userSelect="text",a.addEventListener("copy",l=>{l.stopPropagation(),t?.format&&(l.preventDefault(),l.clipboardData&&(l.clipboardData.clearData(),l.clipboardData.setData(t.format,e))),t?.onCopy&&l.clipboardData&&(l.preventDefault(),t.onCopy(l.clipboardData))}),document.body.append(a),i.selectNodeContents(a),s?.addRange(i),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");n=!0}catch(c){r&&console.error("unable to copy using execCommand:",c);try{let l=window.clipboardData;l&&(l.setData(t?.format||"text",e),t?.onCopy?.(l),n=!0)}catch(l){r&&console.error("unable to copy using clipboardData:",l)}}finally{s&&(typeof s.removeRange=="function"&&i?s.removeRange(i):s.removeAllRanges()),a&&a.remove(),o?.()}return n}var GA=p(()=>{});var Ph={};rt(Ph,{default:()=>OM});var Wr,Lh,Vn,Fh,Rh,PM,GM,OM,Gh=p(()=>{Wr=d(b(),1),Lh=d(he(),1),Vn=d(N(),1),Fh=d(G(),1),Rh=d(Ve(),1);GA();PM=(0,Rh.makeStyles)()(e=>({textArea:{padding:e.spacing(2),overflow:"auto",background:"#ddd",wordBreak:"break-word"}})),GM=(0,Fh.observer)(function({model:e,onClose:t}){let[r,n]=(0,Wr.useState)("Copy to clipboard"),{classes:o}=PM();return Wr.default.createElement(Lh.Dialog,{open:!0,onClose:t,fullWidth:!0,maxWidth:"lg",title:`Track info - ${e.name}`},Wr.default.createElement(Vn.DialogContent,null,Wr.default.createElement(Vn.Button,{variant:"contained",color:"primary",onClick:()=>{Ni(e.data),n("Copied!"),setTimeout(()=>{n("Copy to clipboard")},300)}},r),Wr.default.createElement("pre",{className:o.textArea},e.data)),Wr.default.createElement(Vn.DialogActions,null,Wr.default.createElement(Vn.Button,{variant:"contained",onClick:t,color:"secondary"},"Close")))}),OM=GM});var be,Wn,OA,Oh,HM,JM,UM,YM,Hh,Jh=p(()=>{be=d(b(),1);Nh();Wn=d(N(),1),OA=d(G(),1),Oh=d(Ve(),1),HM=(0,be.lazy)(()=>Promise.resolve().then(()=>(Gh(),Ph))),JM=(0,Oh.makeStyles)()({button:{padding:0}}),UM=(0,OA.observer)(function({model:e,track:t}){let[r,n]=(0,be.useState)(),{drawLabels:o,rowHeight:i,treeAreaWidth:s}=e,{model:{name:a,height:c}}=t,{classes:l}=JM(),A=Math.max(8,i-8);return be.default.createElement("div",{style:{width:s,height:c,flexShrink:0,textAlign:"right",fontSize:A}},o?a:""," ",be.default.createElement(Wn.IconButton,{className:l.button,style:{width:A,height:A},onClick:u=>{n(u.currentTarget)}},be.default.createElement(kh,null)),r?be.default.createElement(Wn.Menu,{anchorEl:r,transitionDuration:0,open:!0,onClose:()=>{n(void 0)}},be.default.createElement(Wn.MenuItem,{dense:!0,onClick:()=>{e.toggleTrack(t.model.id),n(void 0)}},"Close"),be.default.createElement(Wn.MenuItem,{dense:!0,onClick:()=>{e.queueDialog(u=>[HM,{onClose:u,model:t.model}]),n(void 0)}},"Get info")):null)}),YM=(0,OA.observer)(function({model:e,track:t}){let{resizeHandleWidth:r,colWidth:n,scrollX:o,numColumns:i}=e,{model:{height:s,error:a}}=t,c=(0,be.useRef)(null),l=(0,be.useRef)(!1),A=(0,be.useRef)(0);return(0,be.useEffect)(()=>{let u=c.current;if(!u)return;function f(m){A.current+=m.deltaX,l.current||(l.current=!0,requestAnimationFrame(()=>{e.doScrollX(-A.current),A.current=0,l.current=!1})),m.preventDefault()}return u.addEventListener("wheel",f),()=>{u.removeEventListener("wheel",f)}},[e]),be.default.createElement("div",{key:t.id,style:{display:"flex",height:s}},be.default.createElement(UM,{model:e,track:t}),be.default.createElement("div",{style:{width:r,flexShrink:0}}),be.default.createElement("div",{ref:c,onMouseMove:u=>{if(!c.current)return;let{left:f}=c.current.getBoundingClientRect(),m=u.clientX-f-o,g=Math.floor(m/n);g>=0&&g<i?e.setMousePos(g,void 0):e.setMousePos(void 0,void 0)},onMouseLeave:()=>{e.setMousePos(void 0,void 0)}},a?be.default.createElement("div",{style:{color:"red",fontSize:10}},`${a}`):be.default.createElement(t.ReactComponent,{model:e,track:t})))}),Hh=YM});var Mr,Uh,Yh,qM,qh,jh=p(()=>{Mr=d(b(),1),Uh=d(ie(),1),Yh=d(G(),1),qM=(0,Yh.observer)(({model:e})=>{let{msaAreaHeight:t,scrollY:r,totalHeight:n}=e,[o,i]=(0,Mr.useState)(!1),s=(0,Mr.useRef)(!1),[a,c]=(0,Mr.useState)(),l="rgba(66, 119, 127, 0.3)",A=t/n,u=-r,f=u+t,m=u*A,g=f*A;return(0,Mr.useEffect)(()=>{function h(C){a!==void 0&&(s.current||(s.current=!0,window.requestAnimationFrame(()=>{e.setScrollY((0,Uh.clamp)(a.scrollY-(C.clientY-a.clientY)/A,-n,0)),s.current=!1})))}function E(){c(void 0)}if(a!==void 0)return document.addEventListener("mousemove",h),document.addEventListener("mouseup",E),()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mousemove",E)}},[e,A,n,a]),Mr.default.createElement("div",{style:{position:"relative",width:20,height:t,borderLeft:"1px solid #555",borderTop:"1px solid #555",boxSizing:"border-box"}},Mr.default.createElement("div",{style:{position:"absolute",top:Math.max(0,m),left:0,background:o?"rgba(66,119,127,0.6)":l,cursor:"pointer",boxSizing:"border-box",width:20,height:Math.max(g-m,20),zIndex:100},onMouseOver:()=>{i(!0)},onMouseOut:()=>{i(!1)},onMouseDown:h=>{c({clientY:h.clientY,scrollY:e.scrollY})}}))}),qh=qM});var Vh,Wh,Kh=p(()=>{"use client";$();Vh=d(R(),1),Wh=(0,k.createSvgIcon)((0,Vh.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25"}),"Help")});var wa,Ba,zh,jM,$h,Xh=p(()=>{wa=d(b(),1),Ba=d(N(),1),zh=d(G(),1),jM=(0,zh.observer)(function({model:t}){let{hideGaps:r,allowedGappyness:n}=t;return r?wa.default.createElement("div",{style:{display:"flex",alignItems:"center",gap:8}},wa.default.createElement(Ba.Typography,{style:{whiteSpace:"nowrap"}},"Hide columns w/ >",n,"% gaps"),wa.default.createElement(Ba.Slider,{style:{width:100},min:1,max:100,value:n,onChange:(o,i)=>{t.setAllowedGappyness(i)}})):null}),$h=jM});var Zh,e0,t0,r0,VM,WM,n0,o0=p(()=>{Zh=d(b(),1),e0=d(N(),1),t0=d(G(),1),r0=d(Ve(),1),VM=(0,r0.makeStyles)()({margin:{margin:"auto",marginLeft:10}}),WM=(0,t0.observer)(function({model:e}){let{mouseOverRowName:t,mouseCol:r}=e,{classes:n}=VM();return t&&r!==void 0?Zh.default.createElement(e0.Typography,{className:n.margin},t,":",e.visibleColToSeqPosOneBased(t,r)," (",e.visibleColToRowLetter(t,r),")"):null}),n0=WM});var i0,s0,a0=p(()=>{"use client";$();i0=d(R(),1),s0=(0,k.createSvgIcon)((0,i0.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight")});var c0,l0,A0=p(()=>{"use client";$();c0=d(R(),1),l0=(0,k.createSvgIcon)((0,c0.jsx)("path",{d:"M11 18h2v-2h-2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4"}),"HelpOutline")});var u0,ba,HA=p(()=>{"use client";$();u0=d(R(),1),ba=(0,k.createSvgIcon)((0,u0.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")});var f0,d0,m0=p(()=>{"use client";$();f0=d(R(),1),d0=(0,k.createSvgIcon)((0,f0.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh")});var g0,p0,h0=p(()=>{"use client";$();g0=d(R(),1),p0=(0,k.createSvgIcon)((0,g0.jsx)("path",{d:"M15.73 3H8.27L3 8.27v7.46L8.27 21h7.46L21 15.73V8.27zM12 17.3c-.72 0-1.3-.58-1.3-1.3s.58-1.3 1.3-1.3 1.3.58 1.3 1.3-.58 1.3-1.3 1.3m1-4.3h-2V7h2z"}),"Report")});function zM(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function $M(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var KM,C0,E0=p(()=>{KM=!1;C0=(function(){function e(r){var n=this;this._insertTag=function(o){var i;n.tags.length===0?n.insertionPoint?i=n.insertionPoint.nextSibling:n.prepend?i=n.container.firstChild:i=n.before:i=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(o,i),n.tags.push(o)},this.isSpeedy=r.speedy===void 0?!KM:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag($M(this));var o=this.tags[this.tags.length-1];if(this.isSpeedy){var i=zM(o);try{i.insertRule(n,i.cssRules.length)}catch{}}else o.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var o;return(o=n.parentNode)==null?void 0:o.removeChild(n)}),this.tags=[],this.ctr=0},e})()});var st,Li,Z,Sa,Lo,Fo,I0,Qa,x0,Ma=p(()=>{st="-ms-",Li="-moz-",Z="-webkit-",Sa="comm",Lo="rule",Fo="decl",I0="@import",Qa="@keyframes",x0="@layer"});function B0(e,t){return Te(e,0)^45?(((t<<2^Te(e,0))<<2^Te(e,1))<<2^Te(e,2))<<2^Te(e,3):0}function va(e){return e.trim()}function JA(e,t){return(e=t.exec(e))?e[0]:e}function K(e,t,r){return e.replace(t,r)}function Fi(e,t){return e.indexOf(t)}function Te(e,t){return e.charCodeAt(t)|0}function Cn(e,t,r){return e.slice(t,r)}function Et(e){return e.length}function Ro(e){return e.length}function Po(e,t){return t.push(e),e}function UA(e,t){return e.map(t).join("")}var y0,Kn,w0,Go=p(()=>{y0=Math.abs,Kn=String.fromCharCode,w0=Object.assign});function Ri(e,t,r,n,o,i,s){return{value:e,root:t,parent:r,type:n,props:o,children:i,line:Ta,column:Oo,length:s,return:""}}function Uo(e,t){return w0(Ri("",null,null,"",null,null,0),e,{length:-e.length},t)}function S0(){return Pe}function Q0(){return Pe=It>0?Te(Jo,--It):0,Oo--,Pe===10&&(Oo=1,Ta--),Pe}function xt(){return Pe=It<b0?Te(Jo,It++):0,Oo++,Pe===10&&(Oo=1,Ta++),Pe}function rr(){return Te(Jo,It)}function Pi(){return It}function Yo(e,t){return Cn(Jo,e,t)}function Ho(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Da(e){return Ta=Oo=1,b0=Et(Jo=e),It=0,[]}function _a(e){return Jo="",e}function qo(e){return va(Yo(It-1,YA(e===91?e+2:e===40?e+1:e)))}function M0(e){for(;(Pe=rr())&&Pe<33;)xt();return Ho(e)>2||Ho(Pe)>3?"":" "}function v0(e,t){for(;--t&&xt()&&!(Pe<48||Pe>102||Pe>57&&Pe<65||Pe>70&&Pe<97););return Yo(e,Pi()+(t<6&&rr()==32&&xt()==32))}function YA(e){for(;xt();)switch(Pe){case e:return It;case 34:case 39:e!==34&&e!==39&&YA(Pe);break;case 40:e===41&&YA(e);break;case 92:xt();break}return It}function T0(e,t){for(;xt()&&e+Pe!==57;)if(e+Pe===84&&rr()===47)break;return"/*"+Yo(t,It-1)+"*"+Kn(e===47?e:xt())}function D0(e){for(;!Ho(rr());)xt();return Yo(e,It)}var Ta,Oo,b0,It,Pe,Jo,qA=p(()=>{Go();Ta=1,Oo=1,b0=0,It=0,Pe=0,Jo=""});function N0(e){return _a(ka("",null,null,null,[""],e=Da(e),0,[0],e))}function ka(e,t,r,n,o,i,s,a,c){for(var l=0,A=0,u=s,f=0,m=0,g=0,h=1,E=1,C=1,x=0,y="",w=o,B=i,S=n,M=y;E;)switch(g=x,x=xt()){case 40:if(g!=108&&Te(M,u-1)==58){Fi(M+=K(qo(x),"&","&\f"),"&\f")!=-1&&(C=-1);break}case 34:case 39:case 91:M+=qo(x);break;case 9:case 10:case 13:case 32:M+=M0(g);break;case 92:M+=v0(Pi()-1,7);continue;case 47:switch(rr()){case 42:case 47:Po(XM(T0(xt(),Pi()),t,r),c);break;default:M+="/"}break;case 123*h:a[l++]=Et(M)*C;case 125*h:case 59:case 0:switch(x){case 0:case 125:E=0;case 59+A:C==-1&&(M=K(M,/\f/g,"")),m>0&&Et(M)-u&&Po(m>32?k0(M+";",n,r,u-1):k0(K(M," ","")+";",n,r,u-2),c);break;case 59:M+=";";default:if(Po(S=_0(M,t,r,l,A,o,a,y,w=[],B=[],u),i),x===123)if(A===0)ka(M,t,S,S,w,i,u,a,B);else switch(f===99&&Te(M,3)===110?100:f){case 100:case 108:case 109:case 115:ka(e,S,S,n&&Po(_0(e,S,S,0,0,o,a,y,o,w=[],u),B),o,B,u,a,n?w:B);break;default:ka(M,S,S,S,[""],B,0,a,B)}}l=A=m=0,h=C=1,y=M="",u=s;break;case 58:u=1+Et(M),m=g;default:if(h<1){if(x==123)--h;else if(x==125&&h++==0&&Q0()==125)continue}switch(M+=Kn(x),x*h){case 38:C=A>0?1:(M+="\f",-1);break;case 44:a[l++]=(Et(M)-1)*C,C=1;break;case 64:rr()===45&&(M+=qo(xt())),f=rr(),A=u=Et(y=M+=D0(Pi())),x++;break;case 45:g===45&&Et(M)==2&&(h=0)}}return i}function _0(e,t,r,n,o,i,s,a,c,l,A){for(var u=o-1,f=o===0?i:[""],m=Ro(f),g=0,h=0,E=0;g<n;++g)for(var C=0,x=Cn(e,u+1,u=y0(h=s[g])),y=e;C<m;++C)(y=va(h>0?f[C]+" "+x:K(x,/&\f/g,f[C])))&&(c[E++]=y);return Ri(e,t,r,o===0?Lo:a,c,l,A)}function XM(e,t,r){return Ri(e,t,r,Sa,Kn(S0()),Cn(e,2,-2),0)}function k0(e,t,r,n){return Ri(e,t,r,Fo,Cn(e,0,n),Cn(e,n+1,-1),n)}var L0=p(()=>{Ma();Go();qA()});var F0=p(()=>{});function zn(e,t){for(var r="",n=Ro(e),o=0;o<n;o++)r+=t(e[o],o,e,t)||"";return r}function R0(e,t,r,n){switch(e.type){case x0:if(e.children.length)break;case I0:case Fo:return e.return=e.return||e.value;case Sa:return"";case Qa:return e.return=e.value+"{"+zn(e.children,n)+"}";case Lo:e.value=e.props.join(",")}return Et(r=zn(e.children,n))?e.return=e.value+"{"+r+"}":""}var P0=p(()=>{Ma();Go()});function G0(e){var t=Ro(e);return function(r,n,o,i){for(var s="",a=0;a<t;a++)s+=e[a](r,n,o,i)||"";return s}}function O0(e){return function(t){t.root||(t=t.return)&&e(t)}}var H0=p(()=>{Go()});var J0=p(()=>{Ma();Go();L0();F0();qA();P0();H0()});var Na=p(()=>{});function U0(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var jA=p(()=>{});function q0(e,t){switch(B0(e,t)){case 5103:return Z+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Z+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Z+e+Li+e+st+e+e;case 6828:case 4268:return Z+e+st+e+e;case 6165:return Z+e+st+"flex-"+e+e;case 5187:return Z+e+K(e,/(\w+).+(:[^]+)/,Z+"box-$1$2"+st+"flex-$1$2")+e;case 5443:return Z+e+st+"flex-item-"+K(e,/flex-|-self/,"")+e;case 4675:return Z+e+st+"flex-line-pack"+K(e,/align-content|flex-|-self/,"")+e;case 5548:return Z+e+st+K(e,"shrink","negative")+e;case 5292:return Z+e+st+K(e,"basis","preferred-size")+e;case 6060:return Z+"box-"+K(e,"-grow","")+Z+e+st+K(e,"grow","positive")+e;case 4554:return Z+K(e,/([^-])(transform)/g,"$1"+Z+"$2")+e;case 6187:return K(K(K(e,/(zoom-|grab)/,Z+"$1"),/(image-set)/,Z+"$1"),e,"")+e;case 5495:case 3959:return K(e,/(image-set\([^]*)/,Z+"$1$`$1");case 4968:return K(K(e,/(.+:)(flex-)?(.*)/,Z+"box-pack:$3"+st+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Z+e+e;case 4095:case 3583:case 4068:case 2532:return K(e,/(.+)-inline(.+)/,Z+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Et(e)-1-t>6)switch(Te(e,t+1)){case 109:if(Te(e,t+4)!==45)break;case 102:return K(e,/(.+:)(.+)-([^]+)/,"$1"+Z+"$2-$3$1"+Li+(Te(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Fi(e,"stretch")?q0(K(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Te(e,t+1)!==115)break;case 6444:switch(Te(e,Et(e)-3-(~Fi(e,"!important")&&10))){case 107:return K(e,":",":"+Z)+e;case 101:return K(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Z+(Te(e,14)===45?"inline-":"")+"box$3$1"+Z+"$2$3$1"+st+"$2box$3")+e}break;case 5936:switch(Te(e,t+11)){case 114:return Z+e+st+K(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Z+e+st+K(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Z+e+st+K(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Z+e+st+e+e}return e}var ZM,ev,tv,Y0,rv,nv,ov,iv,j0,VA=p(()=>{E0();J0();Na();jA();ZM=function(t,r,n){for(var o=0,i=0;o=i,i=rr(),o===38&&i===12&&(r[n]=1),!Ho(i);)xt();return Yo(t,It)},ev=function(t,r){var n=-1,o=44;do switch(Ho(o)){case 0:o===38&&rr()===12&&(r[n]=1),t[n]+=ZM(It-1,r,n);break;case 2:t[n]+=qo(o);break;case 4:if(o===44){t[++n]=rr()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=Kn(o)}while(o=xt());return t},tv=function(t,r){return _a(ev(Da(t),r))},Y0=new WeakMap,rv=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,o=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!Y0.get(n))&&!o){Y0.set(t,!0);for(var i=[],s=tv(r,i),a=n.props,c=0,l=0;c<s.length;c++)for(var A=0;A<a.length;A++,l++)t.props[l]=i[c]?s[c].replace(/&\f/g,a[A]):a[A]+" "+s[c]}}},nv=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};ov=function(t,r,n,o){if(t.length>-1&&!t.return)switch(t.type){case Fo:t.return=q0(t.value,t.length);break;case Qa:return zn([Uo(t,{value:K(t.value,"@","@"+Z)})],o);case Lo:if(t.length)return UA(t.props,function(i){switch(JA(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return zn([Uo(t,{props:[K(i,/:(read-\w+)/,":"+Li+"$1")]})],o);case"::placeholder":return zn([Uo(t,{props:[K(i,/:(plac\w+)/,":"+Z+"input-$1")]}),Uo(t,{props:[K(i,/:(plac\w+)/,":"+Li+"$1")]}),Uo(t,{props:[K(i,/:(plac\w+)/,st+"input-$1")]})],o)}return""})}},iv=[ov],j0=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(h){var E=h.getAttribute("data-emotion");E.indexOf(" ")!==-1&&(document.head.appendChild(h),h.setAttribute("data-s",""))})}var o=t.stylisPlugins||iv,i={},s,a=[];s=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(h){for(var E=h.getAttribute("data-emotion").split(" "),C=1;C<E.length;C++)i[E[C]]=!0;a.push(h)});var c,l=[rv,nv];{var A,u=[R0,O0(function(h){A.insert(h)})],f=G0(l.concat(o,u)),m=function(E){return zn(N0(E),f)};c=function(E,C,x,y){A=x,m(E?E+"{"+C.styles+"}":C.styles),y&&(g.inserted[C.name]=!0)}}var g={key:r,sheet:new C0({key:r,container:s,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:c};return g.sheet.hydrate(a),g}});var WA=p(()=>{});var W0=H(oe=>{"use strict";var ze=typeof Symbol=="function"&&Symbol.for,KA=ze?Symbol.for("react.element"):60103,zA=ze?Symbol.for("react.portal"):60106,La=ze?Symbol.for("react.fragment"):60107,Fa=ze?Symbol.for("react.strict_mode"):60108,Ra=ze?Symbol.for("react.profiler"):60114,Pa=ze?Symbol.for("react.provider"):60109,Ga=ze?Symbol.for("react.context"):60110,$A=ze?Symbol.for("react.async_mode"):60111,Oa=ze?Symbol.for("react.concurrent_mode"):60111,Ha=ze?Symbol.for("react.forward_ref"):60112,Ja=ze?Symbol.for("react.suspense"):60113,sv=ze?Symbol.for("react.suspense_list"):60120,Ua=ze?Symbol.for("react.memo"):60115,Ya=ze?Symbol.for("react.lazy"):60116,av=ze?Symbol.for("react.block"):60121,cv=ze?Symbol.for("react.fundamental"):60117,lv=ze?Symbol.for("react.responder"):60118,Av=ze?Symbol.for("react.scope"):60119;function Gt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case KA:switch(e=e.type,e){case $A:case Oa:case La:case Ra:case Fa:case Ja:return e;default:switch(e=e&&e.$$typeof,e){case Ga:case Ha:case Ya:case Ua:case Pa:return e;default:return t}}case zA:return t}}}function V0(e){return Gt(e)===Oa}oe.AsyncMode=$A;oe.ConcurrentMode=Oa;oe.ContextConsumer=Ga;oe.ContextProvider=Pa;oe.Element=KA;oe.ForwardRef=Ha;oe.Fragment=La;oe.Lazy=Ya;oe.Memo=Ua;oe.Portal=zA;oe.Profiler=Ra;oe.StrictMode=Fa;oe.Suspense=Ja;oe.isAsyncMode=function(e){return V0(e)||Gt(e)===$A};oe.isConcurrentMode=V0;oe.isContextConsumer=function(e){return Gt(e)===Ga};oe.isContextProvider=function(e){return Gt(e)===Pa};oe.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===KA};oe.isForwardRef=function(e){return Gt(e)===Ha};oe.isFragment=function(e){return Gt(e)===La};oe.isLazy=function(e){return Gt(e)===Ya};oe.isMemo=function(e){return Gt(e)===Ua};oe.isPortal=function(e){return Gt(e)===zA};oe.isProfiler=function(e){return Gt(e)===Ra};oe.isStrictMode=function(e){return Gt(e)===Fa};oe.isSuspense=function(e){return Gt(e)===Ja};oe.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===La||e===Oa||e===Ra||e===Fa||e===Ja||e===sv||typeof e=="object"&&e!==null&&(e.$$typeof===Ya||e.$$typeof===Ua||e.$$typeof===Pa||e.$$typeof===Ga||e.$$typeof===Ha||e.$$typeof===cv||e.$$typeof===lv||e.$$typeof===Av||e.$$typeof===av)};oe.typeOf=Gt});var z0=H((s4,K0)=>{"use strict";K0.exports=W0()});var nC=H((a4,rC)=>{"use strict";var XA=z0(),uv={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},fv={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},dv={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},eC={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ZA={};ZA[XA.ForwardRef]=dv;ZA[XA.Memo]=eC;function $0(e){return XA.isMemo(e)?eC:ZA[e.$$typeof]||uv}var mv=Object.defineProperty,gv=Object.getOwnPropertyNames,X0=Object.getOwnPropertySymbols,pv=Object.getOwnPropertyDescriptor,hv=Object.getPrototypeOf,Z0=Object.prototype;function tC(e,t,r){if(typeof t!="string"){if(Z0){var n=hv(t);n&&n!==Z0&&tC(e,n,r)}var o=gv(t);X0&&(o=o.concat(X0(t)));for(var i=$0(e),s=$0(t),a=0;a<o.length;++a){var c=o[a];if(!fv[c]&&!(r&&r[c])&&!(s&&s[c])&&!(i&&i[c])){var l=pv(t,c);try{mv(e,c,l)}catch{}}}}return e}rC.exports=tC});function Gi(e,t,r){var n="";return r.split(" ").forEach(function(o){e[o]!==void 0?t.push(e[o]+";"):o&&(n+=o+" ")}),n}var Cv,qa,Oi,ja=p(()=>{Cv=!0;qa=function(t,r,n){var o=t.key+"-"+r.name;(n===!1||Cv===!1)&&t.registered[o]===void 0&&(t.registered[o]=r.styles)},Oi=function(t,r,n){qa(t,r,n);var o=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var i=r;do t.insert(r===i?"."+o:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}}});function oC(e){for(var t=0,r,n=0,o=e.length;o>=4;++n,o-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(o){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var iC=p(()=>{});var sC,aC=p(()=>{sC={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}});function Hi(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var o=r;if(o.anim===1)return vr={name:o.name,styles:o.styles,next:vr},o.name;var i=r;if(i.styles!==void 0){var s=i.next;if(s!==void 0)for(;s!==void 0;)vr={name:s.name,styles:s.styles,next:vr},s=s.next;var a=i.styles+";";return a}return wv(e,t,r)}case"function":{if(e!==void 0){var c=vr,l=r(e);return vr=c,Hi(e,t,l)}break}}var A=r;if(t==null)return A;var u=t[A];return u!==void 0?u:A}function wv(e,t,r){var n="";if(Array.isArray(r))for(var o=0;o<r.length;o++)n+=Hi(e,t,r[o])+";";else for(var i in r){var s=r[i];if(typeof s!="object"){var a=s;t!=null&&t[a]!==void 0?n+=i+"{"+t[a]+"}":cC(a)&&(n+=eu(i)+":"+lC(i,a)+";")}else{if(i==="NO_COMPONENT_SELECTOR"&&Ev)throw new Error(yv);if(Array.isArray(s)&&typeof s[0]=="string"&&(t==null||t[s[0]]===void 0))for(var c=0;c<s.length;c++)cC(s[c])&&(n+=eu(i)+":"+lC(i,s[c])+";");else{var l=Hi(e,t,s);switch(i){case"animation":case"animationName":{n+=eu(i)+":"+l+";";break}default:n+=i+"{"+l+"}"}}}}return n}function jo(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,o="";vr=void 0;var i=e[0];if(i==null||i.raw===void 0)n=!1,o+=Hi(r,t,i);else{var s=i;o+=s[0]}for(var a=1;a<e.length;a++)if(o+=Hi(r,t,e[a]),n){var c=i;o+=c[a]}AC.lastIndex=0;for(var l="",A;(A=AC.exec(o))!==null;)l+="-"+A[1];var u=oC(o)+l;return{name:u,styles:o,next:vr}}var Ev,Iv,xv,uC,cC,eu,lC,yv,AC,vr,Va=p(()=>{iC();aC();jA();Ev=!1,Iv=/[A-Z]|^ms/g,xv=/_EMO_([^_]+?)_([^]*?)_EMO_/g,uC=function(t){return t.charCodeAt(1)===45},cC=function(t){return t!=null&&typeof t!="boolean"},eu=U0(function(e){return uC(e)?e:e.replace(Iv,"-$&").toLowerCase()}),lC=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(xv,function(n,o,i){return vr={name:o,styles:i,next:vr},o})}return sC[t]!==1&&!uC(t)&&typeof r=="number"&&r!==0?r+"px":r},yv="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";AC=/label:\s*([^\s;{]+)\s*(;|$)/g});var Wa,Bv,bv,tu,ru=p(()=>{Wa=d(b()),Bv=function(t){return t()},bv=Wa.useInsertionEffect?Wa.useInsertionEffect:!1,tu=bv||Bv});var nr,Ji,fC,ou,Sv,iu,su,au,Ka,nu,dC,Qv,Mv,mC,cu=p(()=>{nr=d(b()),Ji=d(b());VA();WA();Na();ja();Va();ru();fC=!1,ou=nr.createContext(typeof HTMLElement<"u"?j0({key:"css"}):null),Sv=ou.Provider,iu=function(){return(0,Ji.useContext)(ou)},su=function(t){return(0,Ji.forwardRef)(function(r,n){var o=(0,Ji.useContext)(ou);return t(r,o,n)})},au=nr.createContext({}),Ka={}.hasOwnProperty,nu="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",dC=function(t,r){var n={};for(var o in r)Ka.call(r,o)&&(n[o]=r[o]);return n[nu]=t,n},Qv=function(t){var r=t.cache,n=t.serialized,o=t.isStringTag;return qa(r,n,o),tu(function(){return Oi(r,n,o)}),null},Mv=su(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var o=e[nu],i=[n],s="";typeof e.className=="string"?s=Gi(t.registered,i,e.className):e.className!=null&&(s=e.className+" ");var a=jo(i,void 0,nr.useContext(au));s+=t.key+"-"+a.name;var c={};for(var l in e)Ka.call(e,l)&&l!=="css"&&l!==nu&&!fC&&(c[l]=e[l]);return c.className=s,r&&(c.ref=r),nr.createElement(nr.Fragment,null,nr.createElement(Qv,{cache:t,serialized:a,isStringTag:typeof o=="string"}),nr.createElement(o,c))}),mC=Mv});function vv(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return jo(t)}function lu(){var e=vv.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var Vo,F4,gC,Au=p(()=>{cu();cu();Vo=d(b());ja();ru();Va();VA();WA();Na();F4=d(nC()),gC=function(t,r){var n=arguments;if(r==null||!Ka.call(r,"css"))return Vo.createElement.apply(void 0,n);var o=n.length,i=new Array(o);i[0]=mC,i[1]=dC(t,r);for(var s=2;s<o;s++)i[s]=n[s];return Vo.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(gC||(gC={}))});var hC=H((G4,pC)=>{pC.exports=JBrowseExports["@mui/material/styles"]});var Wo,uu=p(()=>{Wo=e=>{let t=e.length,r=0,n="";for(;r<t;r++){let o=e[r];if(o==null)continue;let i;switch(typeof o){case"boolean":break;case"object":{if(Array.isArray(o))i=Wo(o);else{let s=o;i="";for(let a in s)s[a]&&a&&(i&&(i+=" "),i+=a)}break}default:i=o}i&&(n&&(n+=" "),n+=i)}return n}});function CC(e){return e instanceof Object&&!("styles"in e)&&!("length"in e)&&!("__emotion_styles"in e)}var EC=p(()=>{});function yC(e){let{useCache:t}=e;function r(){let n=t(),{css:o,cx:i}=(0,xC.useMemo)(()=>Tv({cache:n}),[n]);return{css:o,cx:i}}return{useCssAndCx:r}}var xC,Tv,IC,wC=p(()=>{xC=d(b(),1);Va();ja();uu();EC();({createCssAndCx:Tv}=(()=>{function e(r,n,o){let i=[],s=Gi(r,i,o);return i.length<2?o:s+n(i)}function t(r){let{cache:n}=r,o=(...s)=>{let a=jo(s,n.registered);Oi(n,a,!1);let c=`${n.key}-${a.name}`;e:{let l=s[0];if(!CC(l))break e;IC.saveClassNameCSSObjectMapping(n,c,l)}return c};return{css:o,cx:(...s)=>{let a=Wo(s),c=IC.fixClassName(n,a,o);return e(n.registered,o,c)}}}return{createCssAndCx:t}})());IC=(()=>{let e=new WeakMap;return{saveClassNameCSSObjectMapping:(t,r,n)=>{let o=e.get(t);o===void 0&&(o=new Map,e.set(t,o)),o.set(r,n)},fixClassName:(()=>{function t(r){let n=!1;return r.map(([o,i])=>{if(i===void 0)return o;let s;if(n)s={"&&":i};else{s=o;for(let a in i)if(a.startsWith("@media")){n=!0;break}}return s})}return(r,n,o)=>{if(!n.includes(" "))return n;let i=e.get(r);return Wo(t(n.split(" ").map(s=>[s,i?.get(s)])).map(s=>typeof s=="string"?s:o(s)))}})()}})()});function BC(e,t,r){if(!(t instanceof Object))return e;let n=Object.keys(t);if(n.length===0)return e;let o={};for(let i of Object.keys(e))o[i]=r(e[i],t[i]);for(let i of n){if(i in e)continue;let s=t[i];typeof s=="string"&&(o[i]=s)}return o}var bC=p(()=>{});function SC(e){if(!(e instanceof Object)||typeof e=="function")return e;let t=[];for(let r in e){let n=e[r],o=typeof n;if(!(o==="string"||o==="number"&&!isNaN(n)||o==="boolean"||n===void 0||n===null))return e;t.push(`${r}:${o}_${n}`)}return`xSqLiJdLMd9s${t.join("|")}`}var QC=p(()=>{});function MC(e){let{useTheme:t}=e,{useCssAndCx:r}=yC({useCache:Dv});function n(){return function(o){let i=typeof o=="function"?o:()=>o;return function(a,c){let l=t(),{css:A,cx:u}=r(),f=(0,fu.useMemo)(()=>{let E=i(l),C={};for(let x of Object.keys(E)){let y=E[x];C[x]=A(y)}return C},[A,l]),m=c?.props.classes,g=SC(m);return{classes:(0,fu.useMemo)(()=>m?BC(f,m,u):f,[f,g,u]),theme:l,css:A,cx:u}}}}return{makeStyles:n}}var fu,Dv,vC=p(()=>{"use client";fu=d(b(),1);Au();wC();bC();QC();Dv=iu});var TC,te,DC=p(()=>{TC=d(hC(),1);vC();({makeStyles:te}=MC({useTheme:TC.useTheme}))});var _C=p(()=>{DC()});function za(...e){return Wo(e)}var yt=p(()=>{"use client";Au();_C();uu()});function du({children:e}){let{classes:t}=_v();return(0,kC.jsx)("div",{className:t.bg,children:e})}var kC,_v,NC=p(()=>{kC=d(R(),1);yt();_v=te()(e=>({bg:{padding:4,margin:4,overflow:"auto",maxHeight:200,background:e.palette.mode==="dark"?"#833":"#f88",border:`1px solid ${e.palette.divider}`}}))});var FC=H(mu=>{var LC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");mu.encode=function(e){if(0<=e&&e<LC.length)return LC[e];throw new TypeError("Must be between 0 and 63: "+e)};mu.decode=function(e){var t=65,r=90,n=97,o=122,i=48,s=57,a=43,c=47,l=26,A=52;return t<=e&&e<=r?e-t:n<=e&&e<=o?e-n+l:i<=e&&e<=s?e-i+A:e==a?62:e==c?63:-1}});var hu=H(pu=>{var RC=FC(),gu=5,PC=1<<gu,GC=PC-1,OC=PC;function kv(e){return e<0?(-e<<1)+1:(e<<1)+0}function Nv(e){var t=(e&1)===1,r=e>>1;return t?-r:r}pu.encode=function(t){var r="",n,o=kv(t);do n=o&GC,o>>>=gu,o>0&&(n|=OC),r+=RC.encode(n);while(o>0);return r};pu.decode=function(t,r,n){var o=t.length,i=0,s=0,a,c;do{if(r>=o)throw new Error("Expected more digits in base 64 VLQ value.");if(c=RC.decode(t.charCodeAt(r++)),c===-1)throw new Error("Invalid base64 digit: "+t.charAt(r-1));a=!!(c&OC),c&=GC,i=i+(c<<s),s+=gu}while(a);n.value=Nv(i),n.rest=r}});var zo=H($e=>{function Lv(e,t,r){if(t in e)return e[t];if(arguments.length===3)return r;throw new Error('"'+t+'" is a required argument.')}$e.getArg=Lv;var HC=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,Fv=/^data:.+\,.+$/;function Ui(e){var t=e.match(HC);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}$e.urlParse=Ui;function Ko(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}$e.urlGenerate=Ko;var Rv=32;function Pv(e){var t=[];return function(r){for(var n=0;n<t.length;n++)if(t[n].input===r){var o=t[0];return t[0]=t[n],t[n]=o,t[0].result}var i=e(r);return t.unshift({input:r,result:i}),t.length>Rv&&t.pop(),i}}var Cu=Pv(function(t){var r=t,n=Ui(t);if(n){if(!n.path)return t;r=n.path}for(var o=$e.isAbsolute(r),i=[],s=0,a=0;;)if(s=a,a=r.indexOf("/",s),a===-1){i.push(r.slice(s));break}else for(i.push(r.slice(s,a));a<r.length&&r[a]==="/";)a++;for(var c,l=0,a=i.length-1;a>=0;a--)c=i[a],c==="."?i.splice(a,1):c===".."?l++:l>0&&(c===""?(i.splice(a+1,l),l=0):(i.splice(a,2),l--));return r=i.join("/"),r===""&&(r=o?"/":"."),n?(n.path=r,Ko(n)):r});$e.normalize=Cu;function JC(e,t){e===""&&(e="."),t===""&&(t=".");var r=Ui(t),n=Ui(e);if(n&&(e=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),Ko(r);if(r||t.match(Fv))return t;if(n&&!n.host&&!n.path)return n.host=t,Ko(n);var o=t.charAt(0)==="/"?t:Cu(e.replace(/\/+$/,"")+"/"+t);return n?(n.path=o,Ko(n)):o}$e.join=JC;$e.isAbsolute=function(e){return e.charAt(0)==="/"||HC.test(e)};function Gv(e,t){e===""&&(e="."),e=e.replace(/\/$/,"");for(var r=0;t.indexOf(e+"/")!==0;){var n=e.lastIndexOf("/");if(n<0||(e=e.slice(0,n),e.match(/^([^\/]+:\/)?\/*$/)))return t;++r}return Array(r+1).join("../")+t.substr(e.length+1)}$e.relative=Gv;var UC=(function(){var e=Object.create(null);return!("__proto__"in e)})();function YC(e){return e}function Ov(e){return qC(e)?"$"+e:e}$e.toSetString=UC?YC:Ov;function Hv(e){return qC(e)?e.slice(1):e}$e.fromSetString=UC?YC:Hv;function qC(e){if(!e)return!1;var t=e.length;if(t<9||e.charCodeAt(t-1)!==95||e.charCodeAt(t-2)!==95||e.charCodeAt(t-3)!==111||e.charCodeAt(t-4)!==116||e.charCodeAt(t-5)!==111||e.charCodeAt(t-6)!==114||e.charCodeAt(t-7)!==112||e.charCodeAt(t-8)!==95||e.charCodeAt(t-9)!==95)return!1;for(var r=t-10;r>=0;r--)if(e.charCodeAt(r)!==36)return!1;return!0}function Jv(e,t,r){var n=Kr(e.source,t.source);return n!==0||(n=e.originalLine-t.originalLine,n!==0)||(n=e.originalColumn-t.originalColumn,n!==0||r)||(n=e.generatedColumn-t.generatedColumn,n!==0)||(n=e.generatedLine-t.generatedLine,n!==0)?n:Kr(e.name,t.name)}$e.compareByOriginalPositions=Jv;function Uv(e,t,r){var n;return n=e.originalLine-t.originalLine,n!==0||(n=e.originalColumn-t.originalColumn,n!==0||r)||(n=e.generatedColumn-t.generatedColumn,n!==0)||(n=e.generatedLine-t.generatedLine,n!==0)?n:Kr(e.name,t.name)}$e.compareByOriginalPositionsNoSource=Uv;function Yv(e,t,r){var n=e.generatedLine-t.generatedLine;return n!==0||(n=e.generatedColumn-t.generatedColumn,n!==0||r)||(n=Kr(e.source,t.source),n!==0)||(n=e.originalLine-t.originalLine,n!==0)||(n=e.originalColumn-t.originalColumn,n!==0)?n:Kr(e.name,t.name)}$e.compareByGeneratedPositionsDeflated=Yv;function qv(e,t,r){var n=e.generatedColumn-t.generatedColumn;return n!==0||r||(n=Kr(e.source,t.source),n!==0)||(n=e.originalLine-t.originalLine,n!==0)||(n=e.originalColumn-t.originalColumn,n!==0)?n:Kr(e.name,t.name)}$e.compareByGeneratedPositionsDeflatedNoLine=qv;function Kr(e,t){return e===t?0:e===null?1:t===null?-1:e>t?1:-1}function jv(e,t){var r=e.generatedLine-t.generatedLine;return r!==0||(r=e.generatedColumn-t.generatedColumn,r!==0)||(r=Kr(e.source,t.source),r!==0)||(r=e.originalLine-t.originalLine,r!==0)||(r=e.originalColumn-t.originalColumn,r!==0)?r:Kr(e.name,t.name)}$e.compareByGeneratedPositionsInflated=jv;function Vv(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))}$e.parseSourceMapInput=Vv;function Wv(e,t,r){if(t=t||"",e&&(e[e.length-1]!=="/"&&t[0]!=="/"&&(e+="/"),t=e+t),r){var n=Ui(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var o=n.path.lastIndexOf("/");o>=0&&(n.path=n.path.substring(0,o+1))}t=JC(Ko(n),t)}return Cu(t)}$e.computeSourceURL=Wv});var xu=H(jC=>{var Eu=zo(),Iu=Object.prototype.hasOwnProperty,$n=typeof Map<"u";function zr(){this._array=[],this._set=$n?new Map:Object.create(null)}zr.fromArray=function(t,r){for(var n=new zr,o=0,i=t.length;o<i;o++)n.add(t[o],r);return n};zr.prototype.size=function(){return $n?this._set.size:Object.getOwnPropertyNames(this._set).length};zr.prototype.add=function(t,r){var n=$n?t:Eu.toSetString(t),o=$n?this.has(t):Iu.call(this._set,n),i=this._array.length;(!o||r)&&this._array.push(t),o||($n?this._set.set(t,i):this._set[n]=i)};zr.prototype.has=function(t){if($n)return this._set.has(t);var r=Eu.toSetString(t);return Iu.call(this._set,r)};zr.prototype.indexOf=function(t){if($n){var r=this._set.get(t);if(r>=0)return r}else{var n=Eu.toSetString(t);if(Iu.call(this._set,n))return this._set[n]}throw new Error('"'+t+'" is not in the set.')};zr.prototype.at=function(t){if(t>=0&&t<this._array.length)return this._array[t];throw new Error("No element indexed by "+t)};zr.prototype.toArray=function(){return this._array.slice()};jC.ArraySet=zr});var KC=H(WC=>{var VC=zo();function Kv(e,t){var r=e.generatedLine,n=t.generatedLine,o=e.generatedColumn,i=t.generatedColumn;return n>r||n==r&&i>=o||VC.compareByGeneratedPositionsInflated(e,t)<=0}function $a(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}$a.prototype.unsortedForEach=function(t,r){this._array.forEach(t,r)};$a.prototype.add=function(t){Kv(this._last,t)?(this._last=t,this._array.push(t)):(this._sorted=!1,this._array.push(t))};$a.prototype.toArray=function(){return this._sorted||(this._array.sort(VC.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};WC.MappingList=$a});var yu=H(zC=>{var Yi=hu(),De=zo(),Xa=xu().ArraySet,zv=KC().MappingList;function or(e){e||(e={}),this._file=De.getArg(e,"file",null),this._sourceRoot=De.getArg(e,"sourceRoot",null),this._skipValidation=De.getArg(e,"skipValidation",!1),this._ignoreInvalidMapping=De.getArg(e,"ignoreInvalidMapping",!1),this._sources=new Xa,this._names=new Xa,this._mappings=new zv,this._sourcesContents=null}or.prototype._version=3;or.fromSourceMap=function(t,r){var n=t.sourceRoot,o=new or(Object.assign(r||{},{file:t.file,sourceRoot:n}));return t.eachMapping(function(i){var s={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(s.source=i.source,n!=null&&(s.source=De.relative(n,s.source)),s.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(s.name=i.name)),o.addMapping(s)}),t.sources.forEach(function(i){var s=i;n!==null&&(s=De.relative(n,i)),o._sources.has(s)||o._sources.add(s);var a=t.sourceContentFor(i);a!=null&&o.setSourceContent(i,a)}),o};or.prototype.addMapping=function(t){var r=De.getArg(t,"generated"),n=De.getArg(t,"original",null),o=De.getArg(t,"source",null),i=De.getArg(t,"name",null);!this._skipValidation&&this._validateMapping(r,n,o,i)===!1||(o!=null&&(o=String(o),this._sources.has(o)||this._sources.add(o)),i!=null&&(i=String(i),this._names.has(i)||this._names.add(i)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:o,name:i}))};or.prototype.setSourceContent=function(t,r){var n=t;this._sourceRoot!=null&&(n=De.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[De.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[De.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};or.prototype.applySourceMap=function(t,r,n){var o=r;if(r==null){if(t.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);o=t.file}var i=this._sourceRoot;i!=null&&(o=De.relative(i,o));var s=new Xa,a=new Xa;this._mappings.unsortedForEach(function(c){if(c.source===o&&c.originalLine!=null){var l=t.originalPositionFor({line:c.originalLine,column:c.originalColumn});l.source!=null&&(c.source=l.source,n!=null&&(c.source=De.join(n,c.source)),i!=null&&(c.source=De.relative(i,c.source)),c.originalLine=l.line,c.originalColumn=l.column,l.name!=null&&(c.name=l.name))}var A=c.source;A!=null&&!s.has(A)&&s.add(A);var u=c.name;u!=null&&!a.has(u)&&a.add(u)},this),this._sources=s,this._names=a,t.sources.forEach(function(c){var l=t.sourceContentFor(c);l!=null&&(n!=null&&(c=De.join(n,c)),i!=null&&(c=De.relative(i,c)),this.setSourceContent(c,l))},this)};or.prototype._validateMapping=function(t,r,n,o){if(r&&typeof r.line!="number"&&typeof r.column!="number"){var i="original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.";if(this._ignoreInvalidMapping)return typeof console<"u"&&console.warn&&console.warn(i),!1;throw new Error(i)}if(!(t&&"line"in t&&"column"in t&&t.line>0&&t.column>=0&&!r&&!n&&!o)){if(t&&"line"in t&&"column"in t&&r&&"line"in r&&"column"in r&&t.line>0&&t.column>=0&&r.line>0&&r.column>=0&&n)return;var i="Invalid mapping: "+JSON.stringify({generated:t,source:n,original:r,name:o});if(this._ignoreInvalidMapping)return typeof console<"u"&&console.warn&&console.warn(i),!1;throw new Error(i)}};or.prototype._serializeMappings=function(){for(var t=0,r=1,n=0,o=0,i=0,s=0,a="",c,l,A,u,f=this._mappings.toArray(),m=0,g=f.length;m<g;m++){if(l=f[m],c="",l.generatedLine!==r)for(t=0;l.generatedLine!==r;)c+=";",r++;else if(m>0){if(!De.compareByGeneratedPositionsInflated(l,f[m-1]))continue;c+=","}c+=Yi.encode(l.generatedColumn-t),t=l.generatedColumn,l.source!=null&&(u=this._sources.indexOf(l.source),c+=Yi.encode(u-s),s=u,c+=Yi.encode(l.originalLine-1-o),o=l.originalLine-1,c+=Yi.encode(l.originalColumn-n),n=l.originalColumn,l.name!=null&&(A=this._names.indexOf(l.name),c+=Yi.encode(A-i),i=A)),a+=c}return a};or.prototype._generateSourcesContent=function(t,r){return t.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=De.relative(r,n));var o=De.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,o)?this._sourcesContents[o]:null},this)};or.prototype.toJSON=function(){var t={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(t.file=this._file),this._sourceRoot!=null&&(t.sourceRoot=this._sourceRoot),this._sourcesContents&&(t.sourcesContent=this._generateSourcesContent(t.sources,t.sourceRoot)),t};or.prototype.toString=function(){return JSON.stringify(this.toJSON())};zC.SourceMapGenerator=or});var $C=H(Xn=>{Xn.GREATEST_LOWER_BOUND=1;Xn.LEAST_UPPER_BOUND=2;function wu(e,t,r,n,o,i){var s=Math.floor((t-e)/2)+e,a=o(r,n[s],!0);return a===0?s:a>0?t-s>1?wu(s,t,r,n,o,i):i==Xn.LEAST_UPPER_BOUND?t<n.length?t:-1:s:s-e>1?wu(e,s,r,n,o,i):i==Xn.LEAST_UPPER_BOUND?s:e<0?-1:e}Xn.search=function(t,r,n,o){if(r.length===0)return-1;var i=wu(-1,r.length,t,r,n,o||Xn.GREATEST_LOWER_BOUND);if(i<0)return-1;for(;i-1>=0&&n(r[i],r[i-1],!0)===0;)--i;return i}});var eE=H(ZC=>{function $v(e){function t(o,i,s){var a=o[i];o[i]=o[s],o[s]=a}function r(o,i){return Math.round(o+Math.random()*(i-o))}function n(o,i,s,a){if(s<a){var c=r(s,a),l=s-1;t(o,c,a);for(var A=o[a],u=s;u<a;u++)i(o[u],A,!1)<=0&&(l+=1,t(o,l,u));t(o,l+1,u);var f=l+1;n(o,i,s,f-1),n(o,i,f+1,a)}}return n}function Xv(e){let t=$v.toString();return new Function(`return ${t}`)()(e)}var XC=new WeakMap;ZC.quickSort=function(e,t,r=0){let n=XC.get(t);n===void 0&&(n=Xv(t),XC.set(t,n)),n(e,t,r,e.length-1)}});var nE=H(Za=>{var L=zo(),bu=$C(),$o=xu().ArraySet,Zv=hu(),qi=eE().quickSort;function Ce(e,t){var r=e;return typeof e=="string"&&(r=L.parseSourceMapInput(e)),r.sections!=null?new Cr(r,t):new at(r,t)}Ce.fromSourceMap=function(e,t){return at.fromSourceMap(e,t)};Ce.prototype._version=3;Ce.prototype.__generatedMappings=null;Object.defineProperty(Ce.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});Ce.prototype.__originalMappings=null;Object.defineProperty(Ce.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});Ce.prototype._charIsMappingSeparator=function(t,r){var n=t.charAt(r);return n===";"||n===","};Ce.prototype._parseMappings=function(t,r){throw new Error("Subclasses must implement _parseMappings")};Ce.GENERATED_ORDER=1;Ce.ORIGINAL_ORDER=2;Ce.GREATEST_LOWER_BOUND=1;Ce.LEAST_UPPER_BOUND=2;Ce.prototype.eachMapping=function(t,r,n){var o=r||null,i=n||Ce.GENERATED_ORDER,s;switch(i){case Ce.GENERATED_ORDER:s=this._generatedMappings;break;case Ce.ORIGINAL_ORDER:s=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}for(var a=this.sourceRoot,c=t.bind(o),l=this._names,A=this._sources,u=this._sourceMapURL,f=0,m=s.length;f<m;f++){var g=s[f],h=g.source===null?null:A.at(g.source);h!==null&&(h=L.computeSourceURL(a,h,u)),c({source:h,generatedLine:g.generatedLine,generatedColumn:g.generatedColumn,originalLine:g.originalLine,originalColumn:g.originalColumn,name:g.name===null?null:l.at(g.name)})}};Ce.prototype.allGeneratedPositionsFor=function(t){var r=L.getArg(t,"line"),n={source:L.getArg(t,"source"),originalLine:r,originalColumn:L.getArg(t,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var o=[],i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",L.compareByOriginalPositions,bu.LEAST_UPPER_BOUND);if(i>=0){var s=this._originalMappings[i];if(t.column===void 0)for(var a=s.originalLine;s&&s.originalLine===a;)o.push({line:L.getArg(s,"generatedLine",null),column:L.getArg(s,"generatedColumn",null),lastColumn:L.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++i];else for(var c=s.originalColumn;s&&s.originalLine===r&&s.originalColumn==c;)o.push({line:L.getArg(s,"generatedLine",null),column:L.getArg(s,"generatedColumn",null),lastColumn:L.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++i]}return o};Za.SourceMapConsumer=Ce;function at(e,t){var r=e;typeof e=="string"&&(r=L.parseSourceMapInput(e));var n=L.getArg(r,"version"),o=L.getArg(r,"sources"),i=L.getArg(r,"names",[]),s=L.getArg(r,"sourceRoot",null),a=L.getArg(r,"sourcesContent",null),c=L.getArg(r,"mappings"),l=L.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);s&&(s=L.normalize(s)),o=o.map(String).map(L.normalize).map(function(A){return s&&L.isAbsolute(s)&&L.isAbsolute(A)?L.relative(s,A):A}),this._names=$o.fromArray(i.map(String),!0),this._sources=$o.fromArray(o,!0),this._absoluteSources=this._sources.toArray().map(function(A){return L.computeSourceURL(s,A,t)}),this.sourceRoot=s,this.sourcesContent=a,this._mappings=c,this._sourceMapURL=t,this.file=l}at.prototype=Object.create(Ce.prototype);at.prototype.consumer=Ce;at.prototype._findSourceIndex=function(e){var t=e;if(this.sourceRoot!=null&&(t=L.relative(this.sourceRoot,t)),this._sources.has(t))return this._sources.indexOf(t);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==e)return r;return-1};at.fromSourceMap=function(t,r){var n=Object.create(at.prototype),o=n._names=$o.fromArray(t._names.toArray(),!0),i=n._sources=$o.fromArray(t._sources.toArray(),!0);n.sourceRoot=t._sourceRoot,n.sourcesContent=t._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=t._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(m){return L.computeSourceURL(n.sourceRoot,m,r)});for(var s=t._mappings.toArray().slice(),a=n.__generatedMappings=[],c=n.__originalMappings=[],l=0,A=s.length;l<A;l++){var u=s[l],f=new rE;f.generatedLine=u.generatedLine,f.generatedColumn=u.generatedColumn,u.source&&(f.source=i.indexOf(u.source),f.originalLine=u.originalLine,f.originalColumn=u.originalColumn,u.name&&(f.name=o.indexOf(u.name)),c.push(f)),a.push(f)}return qi(n.__originalMappings,L.compareByOriginalPositions),n};at.prototype._version=3;Object.defineProperty(at.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function rE(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}var Bu=L.compareByGeneratedPositionsDeflatedNoLine;function tE(e,t){let r=e.length,n=e.length-t;if(!(n<=1))if(n==2){let o=e[t],i=e[t+1];Bu(o,i)>0&&(e[t]=i,e[t+1]=o)}else if(n<20)for(let o=t;o<r;o++)for(let i=o;i>t;i--){let s=e[i-1],a=e[i];if(Bu(s,a)<=0)break;e[i-1]=a,e[i]=s}else qi(e,Bu,t)}at.prototype._parseMappings=function(t,r){var n=1,o=0,i=0,s=0,a=0,c=0,l=t.length,A=0,u={},f={},m=[],g=[],h,E,C,x,y;let w=0;for(;A<l;)if(t.charAt(A)===";")n++,A++,o=0,tE(g,w),w=g.length;else if(t.charAt(A)===",")A++;else{for(h=new rE,h.generatedLine=n,x=A;x<l&&!this._charIsMappingSeparator(t,x);x++);for(E=t.slice(A,x),C=[];A<x;)Zv.decode(t,A,f),y=f.value,A=f.rest,C.push(y);if(C.length===2)throw new Error("Found a source, but no line and column");if(C.length===3)throw new Error("Found a source and line, but no column");if(h.generatedColumn=o+C[0],o=h.generatedColumn,C.length>1&&(h.source=a+C[1],a+=C[1],h.originalLine=i+C[2],i=h.originalLine,h.originalLine+=1,h.originalColumn=s+C[3],s=h.originalColumn,C.length>4&&(h.name=c+C[4],c+=C[4])),g.push(h),typeof h.originalLine=="number"){let S=h.source;for(;m.length<=S;)m.push(null);m[S]===null&&(m[S]=[]),m[S].push(h)}}tE(g,w),this.__generatedMappings=g;for(var B=0;B<m.length;B++)m[B]!=null&&qi(m[B],L.compareByOriginalPositionsNoSource);this.__originalMappings=[].concat(...m)};at.prototype._findMapping=function(t,r,n,o,i,s){if(t[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+t[n]);if(t[o]<0)throw new TypeError("Column must be greater than or equal to 0, got "+t[o]);return bu.search(t,r,i,s)};at.prototype.computeColumnSpans=function(){for(var t=0;t<this._generatedMappings.length;++t){var r=this._generatedMappings[t];if(t+1<this._generatedMappings.length){var n=this._generatedMappings[t+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}};at.prototype.originalPositionFor=function(t){var r={generatedLine:L.getArg(t,"line"),generatedColumn:L.getArg(t,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",L.compareByGeneratedPositionsDeflated,L.getArg(t,"bias",Ce.GREATEST_LOWER_BOUND));if(n>=0){var o=this._generatedMappings[n];if(o.generatedLine===r.generatedLine){var i=L.getArg(o,"source",null);i!==null&&(i=this._sources.at(i),i=L.computeSourceURL(this.sourceRoot,i,this._sourceMapURL));var s=L.getArg(o,"name",null);return s!==null&&(s=this._names.at(s)),{source:i,line:L.getArg(o,"originalLine",null),column:L.getArg(o,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}};at.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(t){return t==null}):!1};at.prototype.sourceContentFor=function(t,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(t);if(n>=0)return this.sourcesContent[n];var o=t;this.sourceRoot!=null&&(o=L.relative(this.sourceRoot,o));var i;if(this.sourceRoot!=null&&(i=L.urlParse(this.sourceRoot))){var s=o.replace(/^file:\/\//,"");if(i.scheme=="file"&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!i.path||i.path=="/")&&this._sources.has("/"+o))return this.sourcesContent[this._sources.indexOf("/"+o)]}if(r)return null;throw new Error('"'+o+'" is not in the SourceMap.')};at.prototype.generatedPositionFor=function(t){var r=L.getArg(t,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:L.getArg(t,"line"),originalColumn:L.getArg(t,"column")},o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",L.compareByOriginalPositions,L.getArg(t,"bias",Ce.GREATEST_LOWER_BOUND));if(o>=0){var i=this._originalMappings[o];if(i.source===n.source)return{line:L.getArg(i,"generatedLine",null),column:L.getArg(i,"generatedColumn",null),lastColumn:L.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};Za.BasicSourceMapConsumer=at;function Cr(e,t){var r=e;typeof e=="string"&&(r=L.parseSourceMapInput(e));var n=L.getArg(r,"version"),o=L.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new $o,this._names=new $o;var i={line:-1,column:0};this._sections=o.map(function(s){if(s.url)throw new Error("Support for url field in sections not implemented.");var a=L.getArg(s,"offset"),c=L.getArg(a,"line"),l=L.getArg(a,"column");if(c<i.line||c===i.line&&l<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=a,{generatedOffset:{generatedLine:c+1,generatedColumn:l+1},consumer:new Ce(L.getArg(s,"map"),t)}})}Cr.prototype=Object.create(Ce.prototype);Cr.prototype.constructor=Ce;Cr.prototype._version=3;Object.defineProperty(Cr.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var r=0;r<this._sections[t].consumer.sources.length;r++)e.push(this._sections[t].consumer.sources[r]);return e}});Cr.prototype.originalPositionFor=function(t){var r={generatedLine:L.getArg(t,"line"),generatedColumn:L.getArg(t,"column")},n=bu.search(r,this._sections,function(i,s){var a=i.generatedLine-s.generatedOffset.generatedLine;return a||i.generatedColumn-s.generatedOffset.generatedColumn}),o=this._sections[n];return o?o.consumer.originalPositionFor({line:r.generatedLine-(o.generatedOffset.generatedLine-1),column:r.generatedColumn-(o.generatedOffset.generatedLine===r.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:t.bias}):{source:null,line:null,column:null,name:null}};Cr.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(t){return t.consumer.hasContentsOfAllSources()})};Cr.prototype.sourceContentFor=function(t,r){for(var n=0;n<this._sections.length;n++){var o=this._sections[n],i=o.consumer.sourceContentFor(t,!0);if(i||i==="")return i}if(r)return null;throw new Error('"'+t+'" is not in the SourceMap.')};Cr.prototype.generatedPositionFor=function(t){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(L.getArg(t,"source"))!==-1){var o=n.consumer.generatedPositionFor(t);if(o){var i={line:o.line+(n.generatedOffset.generatedLine-1),column:o.column+(n.generatedOffset.generatedLine===o.line?n.generatedOffset.generatedColumn-1:0)};return i}}}return{line:null,column:null}};Cr.prototype._parseMappings=function(t,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var o=this._sections[n],i=o.consumer._generatedMappings,s=0;s<i.length;s++){var a=i[s],c=o.consumer._sources.at(a.source);c!==null&&(c=L.computeSourceURL(o.consumer.sourceRoot,c,this._sourceMapURL)),this._sources.add(c),c=this._sources.indexOf(c);var l=null;a.name&&(l=o.consumer._names.at(a.name),this._names.add(l),l=this._names.indexOf(l));var A={source:c,generatedLine:a.generatedLine+(o.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(o.generatedOffset.generatedLine===a.generatedLine?o.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:l};this.__generatedMappings.push(A),typeof A.originalLine=="number"&&this.__originalMappings.push(A)}qi(this.__generatedMappings,L.compareByGeneratedPositionsDeflated),qi(this.__originalMappings,L.compareByOriginalPositions)};Za.IndexedSourceMapConsumer=Cr});var iE=H(oE=>{var e2=yu().SourceMapGenerator,ec=zo(),t2=/(\r?\n)/,r2=10,Xo="$$$isSourceNode$$$";function Ot(e,t,r,n,o){this.children=[],this.sourceContents={},this.line=e??null,this.column=t??null,this.source=r??null,this.name=o??null,this[Xo]=!0,n!=null&&this.add(n)}Ot.fromStringWithSourceMap=function(t,r,n){var o=new Ot,i=t.split(t2),s=0,a=function(){var f=g(),m=g()||"";return f+m;function g(){return s<i.length?i[s++]:void 0}},c=1,l=0,A=null;return r.eachMapping(function(f){if(A!==null)if(c<f.generatedLine)u(A,a()),c++,l=0;else{var m=i[s]||"",g=m.substr(0,f.generatedColumn-l);i[s]=m.substr(f.generatedColumn-l),l=f.generatedColumn,u(A,g),A=f;return}for(;c<f.generatedLine;)o.add(a()),c++;if(l<f.generatedColumn){var m=i[s]||"";o.add(m.substr(0,f.generatedColumn)),i[s]=m.substr(f.generatedColumn),l=f.generatedColumn}A=f},this),s<i.length&&(A&&u(A,a()),o.add(i.splice(s).join(""))),r.sources.forEach(function(f){var m=r.sourceContentFor(f);m!=null&&(n!=null&&(f=ec.join(n,f)),o.setSourceContent(f,m))}),o;function u(f,m){if(f===null||f.source===void 0)o.add(m);else{var g=n?ec.join(n,f.source):f.source;o.add(new Ot(f.originalLine,f.originalColumn,g,m,f.name))}}};Ot.prototype.add=function(t){if(Array.isArray(t))t.forEach(function(r){this.add(r)},this);else if(t[Xo]||typeof t=="string")t&&this.children.push(t);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);return this};Ot.prototype.prepend=function(t){if(Array.isArray(t))for(var r=t.length-1;r>=0;r--)this.prepend(t[r]);else if(t[Xo]||typeof t=="string")this.children.unshift(t);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+t);return this};Ot.prototype.walk=function(t){for(var r,n=0,o=this.children.length;n<o;n++)r=this.children[n],r[Xo]?r.walk(t):r!==""&&t(r,{source:this.source,line:this.line,column:this.column,name:this.name})};Ot.prototype.join=function(t){var r,n,o=this.children.length;if(o>0){for(r=[],n=0;n<o-1;n++)r.push(this.children[n]),r.push(t);r.push(this.children[n]),this.children=r}return this};Ot.prototype.replaceRight=function(t,r){var n=this.children[this.children.length-1];return n[Xo]?n.replaceRight(t,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(t,r):this.children.push("".replace(t,r)),this};Ot.prototype.setSourceContent=function(t,r){this.sourceContents[ec.toSetString(t)]=r};Ot.prototype.walkSourceContents=function(t){for(var r=0,n=this.children.length;r<n;r++)this.children[r][Xo]&&this.children[r].walkSourceContents(t);for(var o=Object.keys(this.sourceContents),r=0,n=o.length;r<n;r++)t(ec.fromSetString(o[r]),this.sourceContents[o[r]])};Ot.prototype.toString=function(){var t="";return this.walk(function(r){t+=r}),t};Ot.prototype.toStringWithSourceMap=function(t){var r={code:"",line:1,column:0},n=new e2(t),o=!1,i=null,s=null,a=null,c=null;return this.walk(function(l,A){r.code+=l,A.source!==null&&A.line!==null&&A.column!==null?((i!==A.source||s!==A.line||a!==A.column||c!==A.name)&&n.addMapping({source:A.source,original:{line:A.line,column:A.column},generated:{line:r.line,column:r.column},name:A.name}),i=A.source,s=A.line,a=A.column,c=A.name,o=!0):o&&(n.addMapping({generated:{line:r.line,column:r.column}}),i=null,o=!1);for(var u=0,f=l.length;u<f;u++)l.charCodeAt(u)===r2?(r.line++,r.column=0,u+1===f?(i=null,o=!1):o&&n.addMapping({source:A.source,original:{line:A.line,column:A.column},generated:{line:r.line,column:r.column},name:A.name})):r.column++}),this.walkSourceContents(function(l,A){n.setSourceContent(l,A)}),{code:r.code,map:n}};oE.SourceNode=Ot});var sE=H(tc=>{tc.SourceMapGenerator=yu().SourceMapGenerator;tc.SourceMapConsumer=nE().SourceMapConsumer;tc.SourceNode=iE().SourceNode});function nc(e){let{children:t,...r}=e;return(0,rc.jsxs)(aE.Link,{...r,target:"_blank",rel:"noopener noreferrer",children:[t," ",(0,rc.jsx)(ca,{fontSize:"small"})]})}var rc,aE,cE=p(()=>{rc=d(R(),1);lA();aE=d(N(),1)});function Su({text:e,extra:t}){let{classes:r}=n2(),n=t?`supporting data: ${JSON.stringify(t,null,2)}`:"",o=[e,n].filter(Boolean).join(`
`),i=encodeURIComponent(`I got this error from JBrowse, here is the stack trace:

\`\`\`
${e}
\`\`\`
${n}
`),s=`https://github.com/GMOD/jbrowse-components/issues/new?labels=bug&title=JBrowse+issue&body=${i}`,a=`mailto:${lE}?subject=JBrowse%202%20error&body=${i}`;return(0,$r.jsxs)($r.Fragment,{children:[(0,$r.jsxs)(oc.Typography,{children:["Post a new issue at"," ",(0,$r.jsx)(nc,{href:s,children:"GitHub"})," or send an email to ",(0,$r.jsx)(nc,{href:a,children:lE})]}),(0,$r.jsx)("pre",{className:r.pre,children:o})]})}var $r,oc,lE,n2,AE=p(()=>{$r=d(R(),1),oc=d(N(),1);cE();yt();lE="jbrowse2@berkeley.edu",n2=te()(e=>({pre:{background:(0,oc.alpha)(e.palette.error.main,.2),border:`1px solid ${e.palette.divider}`,overflow:"auto",margin:20,maxHeight:300}}))});function Qu({message:e,children:t,variant:r="body2",...n}){let{classes:o}=o2();return(0,uE.jsx)(fE.Typography,{className:za(o.dots,n.className),...n,variant:r,children:e||"Loading"})}var uE,fE,o2,dE=p(()=>{uE=d(R(),1),fE=d(N(),1);yt();o2=te()({dots:{"&::after":{display:"inline-block",content:'""',width:"1em",textAlign:"left",animation:`${lu`
      0% {
        content: '';
      }
      25% {
          content: '.';
      }
      50% {
        content: '..';
      }
      75% {
        content: '...';
      }
      `} 1.2s infinite ease-in-out`}}})});var gE=H((MG,mE)=>{mE.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,r=[],n=0;n<e.rangeCount;n++)r.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||r.forEach(function(o){e.addRange(o)}),t&&t.focus()}}});var CE=H((vG,hE)=>{"use strict";var i2=gE(),pE={"text/plain":"Text","text/html":"Url",default:"Text"},s2="Copy to clipboard: #{key}, Enter";function a2(e){var t=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function c2(e,t){var r,n,o,i,s,a,c=!1;t||(t={}),r=t.debug||!1;try{o=i2(),i=document.createRange(),s=document.getSelection(),a=document.createElement("span"),a.textContent=e,a.ariaHidden="true",a.style.all="unset",a.style.position="fixed",a.style.top=0,a.style.clip="rect(0, 0, 0, 0)",a.style.whiteSpace="pre",a.style.webkitUserSelect="text",a.style.MozUserSelect="text",a.style.msUserSelect="text",a.style.userSelect="text",a.addEventListener("copy",function(A){if(A.stopPropagation(),t.format)if(A.preventDefault(),typeof A.clipboardData>"u"){r&&console.warn("unable to use e.clipboardData"),r&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var u=pE[t.format]||pE.default;window.clipboardData.setData(u,e)}else A.clipboardData.clearData(),A.clipboardData.setData(t.format,e);t.onCopy&&(A.preventDefault(),t.onCopy(A.clipboardData))}),document.body.appendChild(a),i.selectNodeContents(a),s.addRange(i);var l=document.execCommand("copy");if(!l)throw new Error("copy command was unsuccessful");c=!0}catch(A){r&&console.error("unable to copy using execCommand: ",A),r&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),c=!0}catch(u){r&&console.error("unable to copy using clipboardData: ",u),r&&console.error("falling back to prompt"),n=a2("message"in t?t.message:s2),window.prompt(n,e)}}finally{s&&(typeof s.removeRange=="function"?s.removeRange(i):s.removeAllRanges()),a&&document.body.removeChild(a),o()}return c}hE.exports=c2});var wE={};rt(wE,{default:()=>yE});async function xE(e){let t=await fetch(e);if(!t.ok)throw new Error(`HTTP ${t.status} fetching ${e}: ${await t.text()}`);return t.text()}async function l2(e){return JSON.parse(await xE(e))}async function f2(e){if(Mu[e])return Mu[e];let t=new URL(e).search,r=await xE(e),n=A2.exec(r)?.[1]??"",o=await l2(new URL(n,e).href+t),i=new IE.SourceMapConsumer(o);return Mu[e]=i,i}async function d2(e){let t=[];for(let r of e.split(`
`)){let n=u2.exec(r);if(!n){t.push(r);continue}let o=n[2],s=(await f2(o)).originalPositionFor({line:+n[3],column:+n[4]});if(!s.source||!s.line||!s.column){t.push(r);continue}t.push(`${s.source}:${s.line}:${s.column+1} (${n[1].trim()})`)}return t.join(`
`)}function m2(e,t){return e.startsWith("Error:")?e.slice(`${t}`.length):e}function g2(e){return typeof e=="object"&&e!==null&&"stack"in e?`${e.stack}`:""}function yE({error:e,onClose:t,extra:r}){let[n,o]=(0,Zo.useState)(),[i,s]=(0,Zo.useState)(),[a,c]=(0,Zo.useState)(!1),l=e?`${e}`:"",A=m2(g2(e),l);(0,Zo.useEffect)(()=>{(async()=>{try{o(await d2(A))}catch(m){console.error(m),o(A),s(m)}})()},[A]);let u=window.JBrowseSession?.version,f=[i?"Error loading source map, showing raw stack trace below:":"",l.length>EE?`${l.slice(0,EE)}...`:l,n||"No stack trace available",u?`JBrowse ${u}`:""].filter(Boolean).join(`
`);return(0,ir.jsxs)(Ht.Dialog,{open:!0,onClose:t,maxWidth:"xl",children:[(0,ir.jsxs)(Ht.DialogTitle,{children:["Stack trace",(0,ir.jsx)(Ht.IconButton,{onClick:t,sx:{position:"absolute",right:8,top:8},children:(0,ir.jsx)(ba,{})})]}),(0,ir.jsx)(Ht.DialogContent,{children:n===void 0?(0,ir.jsx)(Qu,{variant:"h6"}):(0,ir.jsx)(Su,{text:f,extra:r})}),(0,ir.jsxs)(Ht.DialogActions,{children:[(0,ir.jsx)(Ht.Button,{variant:"contained",color:"secondary",onClick:async()=>{let{default:m}=await Promise.resolve().then(()=>d(CE(),1));m(f),c(!0),setTimeout(()=>{c(!1)},1e3)},children:a?"Copied!":"Copy stack trace to clipboard"}),(0,ir.jsx)(Ht.Button,{variant:"contained",color:"primary",onClick:t,children:"Close"})]})]})}var ir,Zo,Ht,IE,Mu,A2,u2,EE,BE=p(()=>{ir=d(R(),1),Zo=d(b(),1);HA();Ht=d(N(),1),IE=d(sE(),1);AE();dE();Mu={},A2=/\/\/# sourceMappingURL=(.*)/,u2=/(.*)((?:https?|file):\/\/.*):(\d+):(\d+)/;EE=1e4});function h2(e){let t="",r="is not assignable",n=e.indexOf(r);if(n!==-1){let o=e.slice(0,n+r.length),i=/.*at path "(.*)" snapshot `(.*)` is not assignable/m.exec(o);i&&(e=`Failed to load element at ${i[1]}...Failed element had snapshot`,t=i[2]);let s=/.*snapshot `(.*)` is not assignable/.exec(o);s&&(e="Failed to load element...Failed element had snapshot",t=s[1])}return t}function C2({error:e,onReset:t}){let{classes:r}=bE(),[n,o]=(0,ti.useState)(!1);return(0,Dt.jsxs)("div",{className:r.iconFloat,children:[typeof e=="object"&&e&&"stack"in e?(0,Dt.jsx)(ei.Tooltip,{title:"Get stack trace",children:(0,Dt.jsx)(ei.IconButton,{onClick:()=>{o(!0)},color:"primary",children:(0,Dt.jsx)(p0,{})})}):null,t?(0,Dt.jsx)(ei.Tooltip,{title:"Retry",children:(0,Dt.jsx)(ei.IconButton,{onClick:t,color:"primary",children:(0,Dt.jsx)(d0,{})})}):null,n?(0,Dt.jsx)(ti.Suspense,{fallback:null,children:(0,Dt.jsx)(p2,{error:e,onClose:()=>{o(!1)}})}):null]})}function E2({error:e,onReset:t}){let{classes:r}=bE(),n=`${e}`,o=n.indexOf("expected an instance of"),i=o!==-1?n.slice(0,o):n,s=h2(n);return(0,Dt.jsxs)(du,{children:[i.slice(0,1e4),(0,Dt.jsx)(C2,{error:e,onReset:t}),s?(0,Dt.jsx)("pre",{className:r.bg,children:JSON.stringify(JSON.parse(s),null,2)}):null]})}var Dt,ti,ei,p2,bE,SE,QE=p(()=>{Dt=d(R(),1),ti=d(b(),1);m0();h0();ei=d(N(),1);NC();yt();p2=(0,ti.lazy)(()=>Promise.resolve().then(()=>(BE(),wE))),bE=te()(e=>({bg:{background:e.palette.divider,border:"1px solid black",margin:20},iconFloat:{float:"right",marginLeft:100}}));SE=E2});function bt(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return Fu(e,t,n)}}function Q2(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ru(e,r)}}function q(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ac;ME&&ME(e,null);let n=t.length;for(;n--;){let o=t[n];if(typeof o=="string"){let i=r(o);i!==o&&(I2(t)||(t[n]=i),o=i)}e[o]=!0}return e}function M2(e){for(let t=0;t<e.length;t++)Er(e,t)||(e[t]=null);return e}function Tr(e){let t=Lu(null);for(let[r,n]of FE(e))Er(e,r)&&(Array.isArray(n)?t[r]=M2(n):n&&typeof n=="object"&&n.constructor===Object?t[r]=Tr(n):t[r]=n);return t}function Ki(e,t){for(;e!==null;){let n=y2(e,t);if(n){if(n.get)return bt(n.get);if(typeof n.value=="function")return bt(n.value)}e=x2(e)}function r(){return null}return r}function GE(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:G2(),t=P=>GE(P);if(t.version="3.3.1",t.removed=[],!e||!e.document||e.document.nodeType!==zi.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e,n=r,o=n.currentScript,{DocumentFragment:i,HTMLTemplateElement:s,Node:a,Element:c,NodeFilter:l,NamedNodeMap:A=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:u,DOMParser:f,trustedTypes:m}=e,g=c.prototype,h=Ki(g,"cloneNode"),E=Ki(g,"remove"),C=Ki(g,"nextSibling"),x=Ki(g,"childNodes"),y=Ki(g,"parentNode");if(typeof s=="function"){let P=r.createElement("template");P.content&&P.content.ownerDocument&&(r=P.content.ownerDocument)}let w,B="",{implementation:S,createNodeIterator:M,createDocumentFragment:v,getElementsByTagName:_}=r,{importNode:O}=n,D=LE();t.isSupported=typeof FE=="function"&&typeof y=="function"&&S&&S.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:T,ERB_EXPR:V,TMPLIT_EXPR:J,DATA_ATTR:Be,ARIA_ATTR:ht,IS_SCRIPT_OR_DATA:Ar,ATTR_WHITESPACE:an,CUSTOM_ELEMENT:cn}=NE,{IS_ALLOWED_URI:Ei}=NE,_e=null,Fr=q({},[...TE,...Du,..._u,...ku,...DE]),ge=null,kn=q({},[..._E,...Nu,...kE,...sc]),pe=Object.seal(Lu(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Br=null,ur=null,ln=Object.seal(Lu(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}})),Ii=!0,Ao=!0,Es=!1,Is=!0,Wt=!1,Nn=!0,An=!1,ne=!1,Ae=!1,se=!1,ue=!1,lt=!1,Rr=!0,ke=!1,et="user-content-",kt=!0,un=!1,Pr={},Nt=null,At=q({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Kt=null,uo=q({},["audio","video","img","source","image","track"]),xi=null,fo=q({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),xs="http://www.w3.org/1998/Math/MathML",ys="http://www.w3.org/2000/svg",Gr="http://www.w3.org/1999/xhtml",mo=Gr,il=!1,sl=null,BQ=q({},[xs,ys,Gr],vu),ws=q({},["mi","mo","mn","ms","mtext"]),Bs=q({},["annotation-xml"]),bQ=q({},["title","style","font","a","script"]),yi=null,SQ=["application/xhtml+xml","text/html"],QQ="text/html",Je=null,go=null,MQ=r.createElement("form"),_d=function(I){return I instanceof RegExp||I instanceof Function},al=function(){let I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(go&&go===I)){if((!I||typeof I!="object")&&(I={}),I=Tr(I),yi=SQ.indexOf(I.PARSER_MEDIA_TYPE)===-1?QQ:I.PARSER_MEDIA_TYPE,Je=yi==="application/xhtml+xml"?vu:ac,_e=Er(I,"ALLOWED_TAGS")?q({},I.ALLOWED_TAGS,Je):Fr,ge=Er(I,"ALLOWED_ATTR")?q({},I.ALLOWED_ATTR,Je):kn,sl=Er(I,"ALLOWED_NAMESPACES")?q({},I.ALLOWED_NAMESPACES,vu):BQ,xi=Er(I,"ADD_URI_SAFE_ATTR")?q(Tr(fo),I.ADD_URI_SAFE_ATTR,Je):fo,Kt=Er(I,"ADD_DATA_URI_TAGS")?q(Tr(uo),I.ADD_DATA_URI_TAGS,Je):uo,Nt=Er(I,"FORBID_CONTENTS")?q({},I.FORBID_CONTENTS,Je):At,Br=Er(I,"FORBID_TAGS")?q({},I.FORBID_TAGS,Je):Tr({}),ur=Er(I,"FORBID_ATTR")?q({},I.FORBID_ATTR,Je):Tr({}),Pr=Er(I,"USE_PROFILES")?I.USE_PROFILES:!1,Ii=I.ALLOW_ARIA_ATTR!==!1,Ao=I.ALLOW_DATA_ATTR!==!1,Es=I.ALLOW_UNKNOWN_PROTOCOLS||!1,Is=I.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Wt=I.SAFE_FOR_TEMPLATES||!1,Nn=I.SAFE_FOR_XML!==!1,An=I.WHOLE_DOCUMENT||!1,se=I.RETURN_DOM||!1,ue=I.RETURN_DOM_FRAGMENT||!1,lt=I.RETURN_TRUSTED_TYPE||!1,Ae=I.FORCE_BODY||!1,Rr=I.SANITIZE_DOM!==!1,ke=I.SANITIZE_NAMED_PROPS||!1,kt=I.KEEP_CONTENT!==!1,un=I.IN_PLACE||!1,Ei=I.ALLOWED_URI_REGEXP||RE,mo=I.NAMESPACE||Gr,ws=I.MATHML_TEXT_INTEGRATION_POINTS||ws,Bs=I.HTML_INTEGRATION_POINTS||Bs,pe=I.CUSTOM_ELEMENT_HANDLING||{},I.CUSTOM_ELEMENT_HANDLING&&_d(I.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(pe.tagNameCheck=I.CUSTOM_ELEMENT_HANDLING.tagNameCheck),I.CUSTOM_ELEMENT_HANDLING&&_d(I.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(pe.attributeNameCheck=I.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),I.CUSTOM_ELEMENT_HANDLING&&typeof I.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(pe.allowCustomizedBuiltInElements=I.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Wt&&(Ao=!1),ue&&(se=!0),Pr&&(_e=q({},DE),ge=[],Pr.html===!0&&(q(_e,TE),q(ge,_E)),Pr.svg===!0&&(q(_e,Du),q(ge,Nu),q(ge,sc)),Pr.svgFilters===!0&&(q(_e,_u),q(ge,Nu),q(ge,sc)),Pr.mathMl===!0&&(q(_e,ku),q(ge,kE),q(ge,sc))),I.ADD_TAGS&&(typeof I.ADD_TAGS=="function"?ln.tagCheck=I.ADD_TAGS:(_e===Fr&&(_e=Tr(_e)),q(_e,I.ADD_TAGS,Je))),I.ADD_ATTR&&(typeof I.ADD_ATTR=="function"?ln.attributeCheck=I.ADD_ATTR:(ge===kn&&(ge=Tr(ge)),q(ge,I.ADD_ATTR,Je))),I.ADD_URI_SAFE_ATTR&&q(xi,I.ADD_URI_SAFE_ATTR,Je),I.FORBID_CONTENTS&&(Nt===At&&(Nt=Tr(Nt)),q(Nt,I.FORBID_CONTENTS,Je)),I.ADD_FORBID_CONTENTS&&(Nt===At&&(Nt=Tr(Nt)),q(Nt,I.ADD_FORBID_CONTENTS,Je)),kt&&(_e["#text"]=!0),An&&q(_e,["html","head","body"]),_e.table&&(q(_e,["tbody"]),delete Br.tbody),I.TRUSTED_TYPES_POLICY){if(typeof I.TRUSTED_TYPES_POLICY.createHTML!="function")throw Wi('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof I.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Wi('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=I.TRUSTED_TYPES_POLICY,B=w.createHTML("")}else w===void 0&&(w=O2(m,o)),w!==null&&typeof B=="string"&&(B=w.createHTML(""));Bt&&Bt(I),go=I}},kd=q({},[...Du,..._u,...v2]),Nd=q({},[...ku,...T2]),vQ=function(I){let Q=y(I);(!Q||!Q.tagName)&&(Q={namespaceURI:mo,tagName:"template"});let F=ac(I.tagName),xe=ac(Q.tagName);return sl[I.namespaceURI]?I.namespaceURI===ys?Q.namespaceURI===Gr?F==="svg":Q.namespaceURI===xs?F==="svg"&&(xe==="annotation-xml"||ws[xe]):!!kd[F]:I.namespaceURI===xs?Q.namespaceURI===Gr?F==="math":Q.namespaceURI===ys?F==="math"&&Bs[xe]:!!Nd[F]:I.namespaceURI===Gr?Q.namespaceURI===ys&&!Bs[xe]||Q.namespaceURI===xs&&!ws[xe]?!1:!Nd[F]&&(bQ[F]||!kd[F]):!!(yi==="application/xhtml+xml"&&sl[I.namespaceURI]):!1},br=function(I){ji(t.removed,{element:I});try{y(I).removeChild(I)}catch{E(I)}},Ln=function(I,Q){try{ji(t.removed,{attribute:Q.getAttributeNode(I),from:Q})}catch{ji(t.removed,{attribute:null,from:Q})}if(Q.removeAttribute(I),I==="is")if(se||ue)try{br(Q)}catch{}else try{Q.setAttribute(I,"")}catch{}},Ld=function(I){let Q=null,F=null;if(Ae)I="<remove></remove>"+I;else{let Ne=Tu(I,/^[\r\n\t ]+/);F=Ne&&Ne[0]}yi==="application/xhtml+xml"&&mo===Gr&&(I='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+I+"</body></html>");let xe=w?w.createHTML(I):I;if(mo===Gr)try{Q=new f().parseFromString(xe,yi)}catch{}if(!Q||!Q.documentElement){Q=S.createDocument(mo,"template",null);try{Q.documentElement.innerHTML=il?B:xe}catch{}}let ut=Q.body||Q.documentElement;return I&&F&&ut.insertBefore(r.createTextNode(F),ut.childNodes[0]||null),mo===Gr?_.call(Q,An?"html":"body")[0]:An?Q.documentElement:ut},Fd=function(I){return M.call(I.ownerDocument||I,I,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null)},cl=function(I){return I instanceof u&&(typeof I.nodeName!="string"||typeof I.textContent!="string"||typeof I.removeChild!="function"||!(I.attributes instanceof A)||typeof I.removeAttribute!="function"||typeof I.setAttribute!="function"||typeof I.namespaceURI!="string"||typeof I.insertBefore!="function"||typeof I.hasChildNodes!="function")},Rd=function(I){return typeof a=="function"&&I instanceof a};function Or(P,I,Q){ic(P,F=>{F.call(t,I,Q,go)})}let Pd=function(I){let Q=null;if(Or(D.beforeSanitizeElements,I,null),cl(I))return br(I),!0;let F=Je(I.nodeName);if(Or(D.uponSanitizeElement,I,{tagName:F,allowedTags:_e}),Nn&&I.hasChildNodes()&&!Rd(I.firstElementChild)&&wt(/<[/\w!]/g,I.innerHTML)&&wt(/<[/\w!]/g,I.textContent)||I.nodeType===zi.progressingInstruction||Nn&&I.nodeType===zi.comment&&wt(/<[/\w]/g,I.data))return br(I),!0;if(!(ln.tagCheck instanceof Function&&ln.tagCheck(F))&&(!_e[F]||Br[F])){if(!Br[F]&&Od(F)&&(pe.tagNameCheck instanceof RegExp&&wt(pe.tagNameCheck,F)||pe.tagNameCheck instanceof Function&&pe.tagNameCheck(F)))return!1;if(kt&&!Nt[F]){let xe=y(I)||I.parentNode,ut=x(I)||I.childNodes;if(ut&&xe){let Ne=ut.length;for(let Tt=Ne-1;Tt>=0;--Tt){let Hr=h(ut[Tt],!0);Hr.__removalCount=(I.__removalCount||0)+1,xe.insertBefore(Hr,C(I))}}}return br(I),!0}return I instanceof c&&!vQ(I)||(F==="noscript"||F==="noembed"||F==="noframes")&&wt(/<\/no(script|embed|frames)/i,I.innerHTML)?(br(I),!0):(Wt&&I.nodeType===zi.text&&(Q=I.textContent,ic([T,V,J],xe=>{Q=Vi(Q,xe," ")}),I.textContent!==Q&&(ji(t.removed,{element:I.cloneNode()}),I.textContent=Q)),Or(D.afterSanitizeElements,I,null),!1)},Gd=function(I,Q,F){if(Rr&&(Q==="id"||Q==="name")&&(F in r||F in MQ))return!1;if(!(Ao&&!ur[Q]&&wt(Be,Q))){if(!(Ii&&wt(ht,Q))){if(!(ln.attributeCheck instanceof Function&&ln.attributeCheck(Q,I))){if(!ge[Q]||ur[Q]){if(!(Od(I)&&(pe.tagNameCheck instanceof RegExp&&wt(pe.tagNameCheck,I)||pe.tagNameCheck instanceof Function&&pe.tagNameCheck(I))&&(pe.attributeNameCheck instanceof RegExp&&wt(pe.attributeNameCheck,Q)||pe.attributeNameCheck instanceof Function&&pe.attributeNameCheck(Q,I))||Q==="is"&&pe.allowCustomizedBuiltInElements&&(pe.tagNameCheck instanceof RegExp&&wt(pe.tagNameCheck,F)||pe.tagNameCheck instanceof Function&&pe.tagNameCheck(F))))return!1}else if(!xi[Q]){if(!wt(Ei,Vi(F,an,""))){if(!((Q==="src"||Q==="xlink:href"||Q==="href")&&I!=="script"&&b2(F,"data:")===0&&Kt[I])){if(!(Es&&!wt(Ar,Vi(F,an,"")))){if(F)return!1}}}}}}}return!0},Od=function(I){return I!=="annotation-xml"&&Tu(I,cn)},Hd=function(I){Or(D.beforeSanitizeAttributes,I,null);let{attributes:Q}=I;if(!Q||cl(I))return;let F={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ge,forceKeepAttr:void 0},xe=Q.length;for(;xe--;){let ut=Q[xe],{name:Ne,namespaceURI:Tt,value:Hr}=ut,po=Je(Ne),ll=Hr,tt=Ne==="value"?ll:S2(ll);if(F.attrName=po,F.attrValue=tt,F.keepAttr=!0,F.forceKeepAttr=void 0,Or(D.uponSanitizeAttribute,I,F),tt=F.attrValue,ke&&(po==="id"||po==="name")&&(Ln(Ne,I),tt=et+tt),Nn&&wt(/((--!?|])>)|<\/(style|title|textarea)/i,tt)){Ln(Ne,I);continue}if(po==="attributename"&&Tu(tt,"href")){Ln(Ne,I);continue}if(F.forceKeepAttr)continue;if(!F.keepAttr){Ln(Ne,I);continue}if(!Is&&wt(/\/>/i,tt)){Ln(Ne,I);continue}Wt&&ic([T,V,J],Ud=>{tt=Vi(tt,Ud," ")});let Jd=Je(I.nodeName);if(!Gd(Jd,po,tt)){Ln(Ne,I);continue}if(w&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!Tt)switch(m.getAttributeType(Jd,po)){case"TrustedHTML":{tt=w.createHTML(tt);break}case"TrustedScriptURL":{tt=w.createScriptURL(tt);break}}if(tt!==ll)try{Tt?I.setAttributeNS(Tt,Ne,tt):I.setAttribute(Ne,tt),cl(I)?br(I):vE(t.removed)}catch{Ln(Ne,I)}}Or(D.afterSanitizeAttributes,I,null)},TQ=function P(I){let Q=null,F=Fd(I);for(Or(D.beforeSanitizeShadowDOM,I,null);Q=F.nextNode();)Or(D.uponSanitizeShadowNode,Q,null),Pd(Q),Hd(Q),Q.content instanceof i&&P(Q.content);Or(D.afterSanitizeShadowDOM,I,null)};return t.sanitize=function(P){let I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q=null,F=null,xe=null,ut=null;if(il=!P,il&&(P="<!-->"),typeof P!="string"&&!Rd(P))if(typeof P.toString=="function"){if(P=P.toString(),typeof P!="string")throw Wi("dirty is not a string, aborting")}else throw Wi("toString is not a function");if(!t.isSupported)return P;if(ne||al(I),t.removed=[],typeof P=="string"&&(un=!1),un){if(P.nodeName){let Hr=Je(P.nodeName);if(!_e[Hr]||Br[Hr])throw Wi("root node is forbidden and cannot be sanitized in-place")}}else if(P instanceof a)Q=Ld("<!---->"),F=Q.ownerDocument.importNode(P,!0),F.nodeType===zi.element&&F.nodeName==="BODY"||F.nodeName==="HTML"?Q=F:Q.appendChild(F);else{if(!se&&!Wt&&!An&&P.indexOf("<")===-1)return w&&lt?w.createHTML(P):P;if(Q=Ld(P),!Q)return se?null:lt?B:""}Q&&Ae&&br(Q.firstChild);let Ne=Fd(un?P:Q);for(;xe=Ne.nextNode();)Pd(xe),Hd(xe),xe.content instanceof i&&TQ(xe.content);if(un)return P;if(se){if(ue)for(ut=v.call(Q.ownerDocument);Q.firstChild;)ut.appendChild(Q.firstChild);else ut=Q;return(ge.shadowroot||ge.shadowrootmode)&&(ut=O.call(n,ut,!0)),ut}let Tt=An?Q.outerHTML:Q.innerHTML;return An&&_e["!doctype"]&&Q.ownerDocument&&Q.ownerDocument.doctype&&Q.ownerDocument.doctype.name&&wt(PE,Q.ownerDocument.doctype.name)&&(Tt="<!DOCTYPE "+Q.ownerDocument.doctype.name+`>
`+Tt),Wt&&ic([T,V,J],Hr=>{Tt=Vi(Tt,Hr," ")}),w&&lt?w.createHTML(Tt):Tt},t.setConfig=function(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};al(P),ne=!0},t.clearConfig=function(){go=null,ne=!1},t.isValidAttribute=function(P,I,Q){go||al({});let F=Je(P),xe=Je(I);return Gd(F,xe,Q)},t.addHook=function(P,I){typeof I=="function"&&ji(D[P],I)},t.removeHook=function(P,I){if(I!==void 0){let Q=w2(D[P],I);return Q===-1?void 0:B2(D[P],Q,1)[0]}return vE(D[P])},t.removeHooks=function(P){D[P]=[]},t.removeAllHooks=function(){D=LE()},t}var FE,ME,I2,x2,y2,Bt,sr,Lu,Fu,Ru,ic,w2,vE,ji,B2,ac,vu,Tu,Vi,b2,S2,Er,wt,Wi,TE,Du,_u,v2,ku,T2,DE,_E,Nu,kE,sc,D2,_2,k2,N2,L2,RE,F2,R2,PE,P2,NE,zi,G2,O2,LE,Pu,OE=p(()=>{({entries:FE,setPrototypeOf:ME,isFrozen:I2,getPrototypeOf:x2,getOwnPropertyDescriptor:y2}=Object),{freeze:Bt,seal:sr,create:Lu}=Object,{apply:Fu,construct:Ru}=typeof Reflect<"u"&&Reflect;Bt||(Bt=function(t){return t});sr||(sr=function(t){return t});Fu||(Fu=function(t,r){for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];return t.apply(r,o)});Ru||(Ru=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return new t(...n)});ic=bt(Array.prototype.forEach),w2=bt(Array.prototype.lastIndexOf),vE=bt(Array.prototype.pop),ji=bt(Array.prototype.push),B2=bt(Array.prototype.splice),ac=bt(String.prototype.toLowerCase),vu=bt(String.prototype.toString),Tu=bt(String.prototype.match),Vi=bt(String.prototype.replace),b2=bt(String.prototype.indexOf),S2=bt(String.prototype.trim),Er=bt(Object.prototype.hasOwnProperty),wt=bt(RegExp.prototype.test),Wi=Q2(TypeError);TE=Bt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Du=Bt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),_u=Bt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),v2=Bt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ku=Bt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),T2=Bt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),DE=Bt(["#text"]),_E=Bt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Nu=Bt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),kE=Bt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),sc=Bt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),D2=sr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),_2=sr(/<%[\w\W]*|[\w\W]*%>/gm),k2=sr(/\$\{[\w\W]*/gm),N2=sr(/^data-[\-\w.\u00B7-\uFFFF]+$/),L2=sr(/^aria-[\-\w]+$/),RE=sr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),F2=sr(/^(?:\w+script|data):/i),R2=sr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),PE=sr(/^html$/i),P2=sr(/^[a-z][.\w]*(-[.\w]+)+$/i),NE=Object.freeze({__proto__:null,ARIA_ATTR:L2,ATTR_WHITESPACE:R2,CUSTOM_ELEMENT:P2,DATA_ATTR:N2,DOCTYPE_NAME:PE,ERB_EXPR:_2,IS_ALLOWED_URI:RE,IS_SCRIPT_OR_DATA:F2,MUSTACHE_EXPR:D2,TMPLIT_EXPR:k2}),zi={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},G2=function(){return typeof window>"u"?null:window},O2=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null,o="data-tt-policy-suffix";r&&r.hasAttribute(o)&&(n=r.getAttribute(o));let i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},LE=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};Pu=GE()});var JE=H((GG,HE)=>{"use strict";var H2=/["'&<>]/;HE.exports=J2;function J2(e){var t=""+e,r=H2.exec(t);if(!r)return t;var n,o="",i=0,s=0;for(i=r.index;i<t.length;i++){switch(t.charCodeAt(i)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#39;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}s!==i&&(o+=t.substring(s,i)),s=i+1,o+=n}return s!==i?o+t.substring(s,i):o}});function q2(e){return Y2.test(e)}function En({html:e,className:t}){let r=Ah(`${e}`),n=q2(r)?r:(0,jE.default)(r);return(0,qE.useEffect)(()=>{UE||(UE=!0,Pu.addHook("afterSanitizeAttributes",o=>{o.tagName==="A"&&(o.setAttribute("rel","noopener noreferrer"),o.setAttribute("target","_blank"))}))},[]),(0,YE.jsx)("span",{className:t,dangerouslySetInnerHTML:{__html:Pu.sanitize(n)}})}var YE,qE,jE,U2,UE,Y2,Gu=p(()=>{YE=d(R(),1),qE=d(b(),1);OE();jE=d(JE(),1);hn();U2=["a","b","br","code","div","em","h1","h2","h3","h4","h5","h6","i","img","li","p","pre","span","small","strong","table","tbody","sup","sub","td","tfoot","th","thead","tr","u","ul"],UE=!1,Y2=new RegExp(U2.map(e=>String.raw`<${e}\b[^>]*>`).join("|"),"i")});function j2({error:e}){let{classes:t}=KE();return(0,Jt.jsx)("div",{className:t.errorBox,children:(0,Jt.jsx)(SE,{error:e})})}var Jt,VE,mt,WE,KE,V2,zE,$E=p(()=>{Jt=d(R(),1),VE=d(b(),1);HA();mt=d(N(),1),WE=d(G(),1);RA();QE();Gu();yt();KE=te()(e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},errorBox:{width:800,margin:40}}));V2=(0,WE.observer)(function(t){let{classes:r}=KE(),{titleNode:n,...o}=t,{title:i,header:s,children:a,onClose:c}=o,l=(0,mt.useTheme)();return(0,Jt.jsx)(mt.Dialog,{...o,children:(0,Jt.jsxs)(mt.ScopedCssBaseline,{children:[(0,VE.isValidElement)(s)?s:(0,Jt.jsxs)(mt.DialogTitle,{children:[n||(0,Jt.jsx)(En,{html:i||""}),c?(0,Jt.jsx)(mt.IconButton,{className:r.closeButton,onClick:A=>{c(A,"backdropClick")},children:(0,Jt.jsx)(ba,{})}):null]}),(0,Jt.jsx)(mt.Divider,{}),(0,Jt.jsx)(No,{FallbackComponent:j2,children:(0,Jt.jsx)(mt.ThemeProvider,{theme:(0,mt.createTheme)(l,{components:{MuiInputBase:{styleOverrides:{input:{boxSizing:"content-box!important"}}}}}),children:a})})]})})}),zE=V2});function Ou({onClose:e,helpText:t,label:r}){return(0,Zn.jsx)(zE,{open:!0,onClose:e,title:"Help",titleNode:r?(0,Zn.jsxs)(Zn.Fragment,{children:["Help: ",r]}):void 0,onClick:n=>{n.stopPropagation()},onMouseDown:n=>{n.stopPropagation()},children:(0,Zn.jsx)(XE.DialogContent,{children:t})})}var Zn,XE,ZE=p(()=>{Zn=d(R(),1),XE=d(N(),1);$E()});function Hu({helpText:e,label:t}){let[r,n]=(0,cc.useState)(!1);return(0,Xr.jsxs)(Xr.Fragment,{children:[(0,Xr.jsx)(eI.IconButton,{size:"small",onClick:o=>{o.stopPropagation(),n(!0)},style:{marginLeft:4,padding:4},children:(0,Xr.jsx)(l0,{fontSize:"small"})}),r?(0,Xr.jsxs)(cc.Suspense,{fallback:null,children:[(0,Xr.jsx)(Ou,{helpText:e,label:t,onClose:o=>{o.stopPropagation(),n(!1)}})," "]}):null]})}var Xr,cc,eI,tI=p(()=>{Xr=d(R(),1),cc=d(b(),1);A0();eI=d(N(),1);ZE()});var rI,nI,oI,W2,iI,sI=p(()=>{rI=d(R(),1),nI=d(b(),1),oI=d(N(),1),W2=nI.forwardRef(function(t,r){return(0,rI.jsx)(oI.Menu,{...t,ref:r,style:{pointerEvents:"none",...t.style},slotProps:{...t.slotProps,paper:{style:{pointerEvents:"auto"}}}})}),iI=W2});var aI,cI,lI=p(()=>{"use client";$();aI=d(R(),1),cI=(0,k.createSvgIcon)((0,aI.jsx)("path",{d:"m10 17 5-5-5-5z"}),"ArrowRight")});var AI,uI,fI=p(()=>{"use client";$();AI=d(R(),1),uI=(0,k.createSvgIcon)((0,AI.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2m-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckBox")});var dI,mI,gI=p(()=>{"use client";$();dI=d(R(),1),mI=(0,k.createSvgIcon)((0,dI.jsx)("path",{d:"M19 5v14H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}),"CheckBoxOutlineBlank")});var pI,hI,CI=p(()=>{"use client";$();pI=d(R(),1),hI=(0,k.createSvgIcon)((0,pI.jsx)("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5m0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"RadioButtonChecked")});var EI,II,xI=p(()=>{"use client";$();EI=d(R(),1),II=(0,k.createSvgIcon)((0,EI.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"RadioButtonUnchecked")});function yI(e){let{classes:t}=K2(),{type:r}=e,n,o;"checked"in e&&({checked:n,disabled:o}=e);let i;switch(r){case"subMenu":{i=(0,In.jsx)(cI,{color:"action"});break}case"checkbox":{n?i=(0,In.jsx)(uI,{color:o?"inherit":void 0}):i=(0,In.jsx)(mI,{color:"action"});break}case"radio":{n?i=(0,In.jsx)(hI,{color:o?"inherit":void 0}):i=(0,In.jsx)(II,{color:"action"});break}}return(0,In.jsx)("div",{className:t.menuItemEndDecoration,children:i})}var In,lc,K2,wI=p(()=>{In=d(R(),1);lI();fI();gI();CI();xI();lc=d(N(),1);yt();K2=te()({menuItemEndDecoration:{padding:0,margin:0,height:16}})});function BI(e){if(typeof e=="string")return e.toLowerCase().replace(/\s+/g,"_")}function z2({title:e,Icon:t,inset:r,menuItems:n,onMenuItemClick:o,closeAfterItemClick:i,onCloseRoot:s,isOpen:a,onOpen:c,onClose:l}){let[A,u]=(0,Ju.useState)(null),f=BI(e);return(0,ae.jsxs)(ae.Fragment,{children:[(0,ae.jsxs)(St.MenuItem,{ref:u,"data-testid":f?`cascading-submenu-${f}`:void 0,onMouseOver:c,onFocus:c,onClick:c,children:[t?(0,ae.jsx)(St.ListItemIcon,{children:(0,ae.jsx)(t,{})}):null,(0,ae.jsx)(St.ListItemText,{primary:e,inset:r}),(0,ae.jsx)(s0,{})]}),(0,ae.jsx)(iI,{open:a,anchorEl:A,onClose:l,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},children:(0,ae.jsx)(bI,{closeAfterItemClick:i,onMenuItemClick:o,menuItems:n,onCloseRoot:s})})]})}function bI({onMenuItemClick:e,closeAfterItemClick:t,menuItems:r,onCloseRoot:n}){let[o,i]=(0,Ju.useState)(),s=()=>{i(void 0)},a=r.some(A=>"icon"in A&&A.icon),c=r.some(A=>(A.type==="checkbox"||A.type==="radio")&&"helpText"in A&&A.helpText),l=r.toSorted((A,u)=>(u.priority||0)-(A.priority||0));return(0,ae.jsx)(ae.Fragment,{children:l.map((A,u)=>{if("subMenu"in A)return(0,ae.jsx)(z2,{title:A.label,Icon:A.icon,inset:a&&!A.icon,onMenuItemClick:e,menuItems:A.subMenu,closeAfterItemClick:t,onCloseRoot:n,isOpen:o===u,onOpen:()=>{i(u)},onClose:s},`subMenu-${A.label}-${u}`);if(A.type==="divider")return(0,ae.jsx)(St.Divider,{component:"li"},`divider-${u}`);if(A.type==="subHeader")return(0,ae.jsx)(St.ListSubheader,{children:A.label},`subHeader-${A.label}-${u}`);let f=A,m=f.helpText,g=f.type==="checkbox"||f.type==="radio",h=BI(f.label);return(0,ae.jsxs)(St.MenuItem,{"data-testid":h?`cascading-menuitem-${h}`:void 0,disabled:!!f.disabled,onClick:E=>{t&&n(),e(E,f.onClick)},onMouseOver:s,children:[f.icon?(0,ae.jsx)(St.ListItemIcon,{children:(0,ae.jsx)(f.icon,{})}):null,(0,ae.jsx)(St.ListItemText,{primary:f.label,secondary:f.subLabel,inset:a&&!f.icon}),(0,ae.jsx)("div",{style:{flexGrow:1,minWidth:10}}),g?(0,ae.jsx)(yI,{type:f.type,checked:f.checked,disabled:f.disabled}):null,m?(0,ae.jsx)(Hu,{helpText:m,label:f.label}):g&&c?(0,ae.jsx)("div",{style:{marginLeft:4,padding:4,width:28,height:28}}):null]},`${f.label}-${u}`)})})}function Uu({onMenuItemClick:e,closeAfterItemClick:t=!0,menuItems:r,open:n,onClose:o,anchorEl:i,anchorOrigin:s,transformOrigin:a,anchorReference:c,anchorPosition:l,slotProps:A,marginThreshold:u,style:f}){let m=Array.isArray(r)?r:r();return(0,ae.jsx)(St.Menu,{anchorEl:i,open:n,onClose:o,anchorOrigin:s,transformOrigin:a,anchorReference:c,anchorPosition:l,slotProps:A,marginThreshold:u??void 0,style:f,children:(0,ae.jsx)(bI,{menuItems:m,closeAfterItemClick:t,onMenuItemClick:e,onCloseRoot:o})})}var ae,Ju,St,SI=p(()=>{ae=d(R(),1),Ju=d(b(),1);a0();St=d(N(),1);tI();sI();wI()});function $2({children:e,menuItems:t,closeAfterItemClick:r=!0,stopPropagation:n,disabled:o,setOpen:i,ButtonComponent:s=QI.IconButton,onClick:a,anchorOrigin:c,transformOrigin:l,marginThreshold:A,...u}){let[f,m]=(0,Ac.useState)(null),g=!!f;(0,Ac.useEffect)(()=>{i?.(g)},[g,i]);let h=o??(Array.isArray(t)&&t.length===0);return(0,eo.jsxs)(eo.Fragment,{children:[(0,eo.jsx)(s,{onClick:E=>{n&&E.stopPropagation(),m(E.currentTarget),a?.(E)},...u,disabled:h,children:e}),g?(0,eo.jsx)(Uu,{open:g,onClose:()=>{m(null)},anchorEl:f,anchorOrigin:c,transformOrigin:l,marginThreshold:A,menuItems:t,closeAfterItemClick:r,onMenuItemClick:(E,C)=>{C()}}):null]})}var eo,Ac,QI,ri,uc=p(()=>{eo=d(R(),1),Ac=d(b(),1),QI=d(N(),1);SI();ri=$2});var MI,fc,Yu=p(()=>{"use client";$();MI=d(R(),1),fc=(0,k.createSvgIcon)((0,MI.jsx)("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"}),"AccountTree")});var vI,TI,DI=p(()=>{"use client";$();vI=d(R(),1),TI=(0,k.createSvgIcon)((0,vI.jsx)("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment")});var _I,kI,NI=p(()=>{"use client";$();_I=d(R(),1),kI=(0,k.createSvgIcon)((0,_I.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61"}),"FilterAlt")});var LI,qu,FI=p(()=>{"use client";$();LI=d(R(),1),qu=(0,k.createSvgIcon)((0,LI.jsx)("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V8h16z"}),"FolderOpen")});var RI,PI,GI=p(()=>{"use client";$();RI=d(R(),1),PI=(0,k.createSvgIcon)((0,RI.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu")});var ju,OI,HI=p(()=>{"use client";$();ju=d(R(),1),OI=(0,k.createSvgIcon)([(0,ju.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,ju.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"PhotoCamera")});var JI,UI,YI=p(()=>{"use client";$();JI=d(R(),1),UI=(0,k.createSvgIcon)((0,JI.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")});var qI,jI,VI=p(()=>{"use client";$();qI=d(R(),1),jI=(0,k.createSvgIcon)((0,qI.jsx)("path",{d:"M3 18h6v-2H3zM3 6v2h18V6zm0 7h12v-2H3z"}),"Sort")});var WI,Vu,KI=p(()=>{"use client";$();WI=d(R(),1),Vu=(0,k.createSvgIcon)((0,WI.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")});var X2,ni,zI=p(()=>{X2={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},ni=X2});var Z2,$i,$I=p(()=>{Z2={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},$i=Z2});var eT,Xi,XI=p(()=>{eT={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Xi=eT});var tT,Zi,ZI=p(()=>{tT={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Zi=tT});var rT,xn,ex=p(()=>{rT={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},xn=rT});var Wu=p(()=>{zI();$I();XI();ZI();ex()});var ox=H((eO,nx)=>{"use strict";var nT=function(t){return oT(t)&&!iT(t)};function oT(e){return!!e&&typeof e=="object"}function iT(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||cT(e)}var sT=typeof Symbol=="function"&&Symbol.for,aT=sT?Symbol.for("react.element"):60103;function cT(e){return e.$$typeof===aT}function lT(e){return Array.isArray(e)?[]:{}}function es(e,t){return t.clone!==!1&&t.isMergeableObject(e)?oi(lT(e),e,t):e}function AT(e,t,r){return e.concat(t).map(function(n){return es(n,r)})}function uT(e,t){if(!t.customMerge)return oi;var r=t.customMerge(e);return typeof r=="function"?r:oi}function fT(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function tx(e){return Object.keys(e).concat(fT(e))}function rx(e,t){try{return t in e}catch{return!1}}function dT(e,t){return rx(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function mT(e,t,r){var n={};return r.isMergeableObject(e)&&tx(e).forEach(function(o){n[o]=es(e[o],r)}),tx(t).forEach(function(o){dT(e,o)||(rx(e,o)&&r.isMergeableObject(t[o])?n[o]=uT(o,r)(e[o],t[o],r):n[o]=es(t[o],r))}),n}function oi(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||AT,r.isMergeableObject=r.isMergeableObject||nT,r.cloneUnlessOtherwiseSpecified=es;var n=Array.isArray(t),o=Array.isArray(e),i=n===o;return i?n?r.arrayMerge(e,t,r):mT(e,t,r):es(t,r)}oi.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,o){return oi(n,o,r)},{})};var gT=oi;nx.exports=gT});function ax(){return{palette:{...dc,mode:void 0},components:{MuiLink:{styleOverrides:{root:({theme:e})=>({color:e.palette.tertiary.main})}}}}}function TT(){return{...ax(),name:"Default (from config)"}}function DT(){return{...ax(),name:"Light (stock)"}}function _T(){return{name:"Dark (stock)",palette:{...dc,mode:"dark"},components:{MuiAppBar:{defaultProps:{enableColorOnDark:!0},styleOverrides:{root:({theme:e})=>e.palette.primary.main}}}}}function kT(){return{name:"Dark (minimal)",palette:{...dc,mode:"dark",primary:{main:xn[700]},secondary:{main:xn[800]},tertiary:Se.palette.augmentColor({color:{main:xn[900]}})}}}function NT(){return{name:"Light (minimal)",palette:{...dc,primary:{main:xn[900]},secondary:{main:xn[800]},tertiary:Se.palette.augmentColor({color:{main:xn[900]}})}}}var sx,pT,Se,hT,CT,ET,ix,rO,IT,xT,yT,wT,BT,bT,ST,QT,MT,vT,dc,nO,cx=p(()=>{sx=d(N(),1);Wu();pT=d(ox(),1),Se=(0,sx.createTheme)(),hT=Se.palette.augmentColor({color:{main:"#0D233F"}}),CT=Se.palette.augmentColor({color:{main:"#721E63"}}),ET=Se.palette.augmentColor({color:{main:"#135560"}}),ix=Se.palette.augmentColor({color:{main:"#FFB11D"}}),rO=Se.palette.augmentColor({color:{main:"#aaa"}}),IT={A:Se.palette.augmentColor({color:Xi}),C:Se.palette.augmentColor({color:$i}),G:Se.palette.augmentColor({color:Zi}),T:Se.palette.augmentColor({color:ni})},xT=[null,Se.palette.augmentColor({color:{main:"#FF8080"}}),Se.palette.augmentColor({color:{main:"#80FF80"}}),Se.palette.augmentColor({color:{main:"#8080FF"}}),Se.palette.augmentColor({color:{main:"#8080FF"}}),Se.palette.augmentColor({color:{main:"#80FF80"}}),Se.palette.augmentColor({color:{main:"#FF8080"}})],yT=[null,Se.palette.augmentColor({color:{main:"#8f8f8f"}}),Se.palette.augmentColor({color:{main:"#adadad"}}),Se.palette.augmentColor({color:{main:"#d8d8d8"}}),Se.palette.augmentColor({color:{main:"#d8d8d8"}}),Se.palette.augmentColor({color:{main:"#adadad"}}),Se.palette.augmentColor({color:{main:"#8f8f8f"}})],wT="#e22",BT="#3e3",bT="#800080",ST="#808080",QT="#f00",MT="#00f",vT="#97b8c9",dc={primary:hT,secondary:CT,tertiary:ET,quaternary:ix,highlight:ix,stopCodon:wT,startCodon:BT,insertion:bT,deletion:ST,softclip:MT,hardclip:QT,bases:IT,frames:yT,framesCDS:xT,skip:vT};nO={default:TT(),lightStock:DT(),lightMinimal:NT(),darkMinimal:kT(),darkStock:_T()}});var lx=p(()=>{});var Ax=p(()=>{});var Ku=p(()=>{cx();Gu();lx();Ax()});function yn({value:e}){let{classes:t}=LT(),r=/^https?:\/\//.exec(`${e}`);return(0,mc.jsx)("div",{className:t.fieldValue,children:(0,ux.isValidElement)(e)?e:r?(0,mc.jsx)(fx.Link,{href:`${e}`,children:`${e}`}):(0,mc.jsx)(En,{html:tr(e)?JSON.stringify(e):String(e)})})}var mc,ux,fx,LT,gc=p(()=>{mc=d(R(),1),ux=d(b(),1),fx=d(N(),1);Ku();hn();yt();LT=te()(e=>({fieldValue:{wordBreak:"break-word",maxHeight:300,fontSize:12,padding:e.spacing(.5),overflow:"auto"}}))});function Dr({description:e,name:t,width:r,prefix:n=[]}){let{classes:o}=FT(),i=[...n,t].join(".");return e?(0,pc.jsx)(dx.Tooltip,{title:e,placement:"left",children:(0,pc.jsx)("div",{className:za(o.fieldDescription,o.fieldName),children:i})}):(0,pc.jsx)("div",{className:o.fieldName,style:{width:r},children:i})}var pc,dx,FT,ts=p(()=>{pc=d(R(),1),dx=d(N(),1);yt();FT=te()(e=>({fieldDescription:{"&:hover":{background:e.palette.mode==="dark"?"#e65100":"yellow"}},fieldName:{wordBreak:"break-all",minWidth:90,borderBottom:"1px solid #0003",fontSize:12,background:e.palette.action.disabledBackground,marginRight:e.spacing(1),padding:e.spacing(.5)}}))});function $u({name:e,value:t,description:r,formatter:n,prefix:o=[]}){let{classes:i}=RT(),[s,a]=(0,mx.useState)(!1),c=t.length>zu,l=c&&!s?t.slice(0,zu):t;return t.length===1?tr(t[0])?(0,Qt.jsx)(_r,{formatter:n,attributes:t[0],prefix:[...o,e]}):(0,Qt.jsxs)("div",{className:i.field,children:[(0,Qt.jsx)(Dr,{prefix:o,description:r,name:e}),(0,Qt.jsx)(yn,{value:n?n(t[0],e):t[0]})]}):t.every(A=>tr(A))?(0,Qt.jsx)(Qt.Fragment,{children:t.map((A,u)=>(0,Qt.jsx)(_r,{formatter:n,attributes:A,prefix:[...o,`${e}-${u}`]},`${JSON.stringify(A)}-${u}`))}):(0,Qt.jsxs)("div",{className:i.field,children:[(0,Qt.jsx)(Dr,{prefix:o,description:r,name:e}),l.map((A,u)=>(0,Qt.jsx)("div",{className:i.fieldSubvalue,children:(0,Qt.jsx)(yn,{value:n?n(A,e):A})},`${JSON.stringify(A)}-${u}`)),c?(0,Qt.jsx)("button",{type:"button",onClick:()=>{a(A=>!A)},children:s?"Show less":`Showing ${zu} of ${t.length}. Show all...`}):null]})}var Qt,mx,zu,RT,gx=p(()=>{Qt=d(R(),1),mx=d(b(),1);hc();gc();ts();hn();yt();zu=100,RT=te()(e=>({field:{display:"flex",flexWrap:"wrap"},fieldSubvalue:{wordBreak:"break-word",maxHeight:300,padding:e.spacing(.5),border:`1px solid ${e.palette.action.selected}`,boxSizing:"border-box",overflow:"auto"}}))});var hx=H((wO,px)=>{px.exports=JBrowseExports["@mui/x-data-grid"]});function Xu({children:e,style:t}){let{classes:r}=PT();return(0,Cx.jsx)("div",{className:r.flexContainer,style:t,children:e})}var Cx,PT,Ex=p(()=>{Cx=d(R(),1);yt();PT=te()({flexContainer:{display:"flex",flexDirection:"column"}})});function Zu({value:e,prefix:t,name:r}){let{classes:n}=GT(),[o,i]=(0,Ix.useState)(!1),s=Object.keys(e[0]).sort(),a=new Set(s),c=Object.entries(e).map(([u,f])=>{let{id:m,...g}=f;return{id:u,identifier:m,...g}});for(let u of e)for(let f of Object.keys(u))a.add(f);let l;a.has("id")?(a.delete("id"),l=["identifier",...a]):l=[...a];let A=l.map(u=>uh(c.map(f=>f[u])));return a.size<s.length+5?(0,Ir.jsxs)("div",{className:n.margin,children:[(0,Ir.jsx)(Dr,{prefix:t,name:r}),(0,Ir.jsx)(ii.FormControlLabel,{control:(0,Ir.jsx)(ii.Checkbox,{checked:o,onChange:u=>{i(u.target.checked)}}),label:(0,Ir.jsx)(ii.Typography,{variant:"body2",children:"Show options"})}),(0,Ir.jsx)(Xu,{children:(0,Ir.jsx)(xx.DataGrid,{disableRowSelectionOnClick:!0,rows:c,rowHeight:20,columnHeaderHeight:35,hideFooter:c.length<25,showToolbar:o,columns:l.map((u,f)=>({field:u,width:A[f],renderCell:({value:m})=>(0,Ir.jsx)("div",{className:n.cell,children:(0,Ir.jsx)(En,{html:TA(m||"")})})}))})})]}):null}var Ir,Ix,ii,xx,GT,yx=p(()=>{Ir=d(R(),1),Ix=d(b(),1),ii=d(N(),1),xx=d(hx(),1);ts();Ex();Ku();hn();yt();GT=te()(e=>({margin:{marginBottom:e.spacing(4)},cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}))});function ef({name:e,value:t,description:r,prefix:n,width:o,formatter:i}){let{classes:s}=OT();return t!=null?(0,rs.jsxs)("div",{className:s.field,children:[(0,rs.jsx)(Dr,{prefix:n,description:r,name:e,width:o}),(0,rs.jsx)(yn,{value:i?i(t,e):t})]}):null}var rs,OT,wx=p(()=>{rs=d(R(),1);gc();ts();yt();OT=te()({field:{display:"flex",flexWrap:"wrap"}})});function tf({value:e,prefix:t,name:r}){let{classes:n}=HT(),{uri:o,baseUri:i=""}=e,s;try{s=new URL(o,i).href}catch{s=o}return(0,ns.jsxs)("div",{className:n.field,children:[(0,ns.jsx)(Dr,{prefix:t,name:r}),(0,ns.jsx)(yn,{value:s})]})}var ns,HT,Bx=p(()=>{ns=d(R(),1);gc();ts();yt();HT=te()({field:{display:"flex",flexWrap:"wrap"}})});function bx(e,t){return Math.ceil(DA(e.map(r=>MA([...t,r[0]].join("."),12))))+10}function Sx(e,t={}){let r=t;for(let n of e)tr(r)&&(r=r[n]);return typeof r=="string"?r:tr(r)&&typeof r.Description=="string"?r.Description:void 0}var Qx=p(()=>{hn()});function _r(e){let{attributes:t,omit:r=[],omitSingleLevel:n=[],descriptions:o,formatter:i,hideUris:s,prefix:a=[]}=e,c=new Set([...r,...UT,...n]),{__jbrowsefmt:l,...A}=t,u=Object.entries({...A,...l}).filter(([m,g])=>g!=null&&!c.has(m)),f=bx(u,a);return(0,Zr.jsx)(Zr.Fragment,{children:u.map(([m,g])=>{let h=Sx([...a,m],o);if(Array.isArray(g))return g.length>1&&g.every(E=>tr(E))?(0,Zr.jsx)(Zu,{name:m,prefix:a,value:g},m):(0,Zr.jsx)($u,{name:m,value:g,formatter:i,description:h,prefix:a},m);if(tr(g)){let{omitSingleLevel:E,...C}=e;return pa(g)?s?null:(0,Zr.jsx)(tf,{name:m,prefix:a,value:g},m):(0,Zr.jsx)(_r,{...C,formatter:i,attributes:g,descriptions:o,prefix:[...a,m]},m)}else return(0,Zr.jsx)(ef,{name:m,formatter:i,value:g,description:h,prefix:a,width:Math.min(f,JT)},m)})})}var Zr,JT,UT,hc=p(()=>{Zr=d(R(),1);gx();yx();wx();Bx();Qx();hn();JT=170,UT=["__jbrowsefmt","length","position","subfeatures","uniqueId","exonFrames","parentId","thickStart","thickEnd","_lineHash"]});function ro({children:e,title:t,defaultExpanded:r=!0}){let{classes:n}=YT();return(0,to.jsxs)(wn.Accordion,{defaultExpanded:r,children:[(0,to.jsx)(wn.AccordionSummary,{expandIcon:(0,to.jsx)(ra,{className:n.icon}),children:(0,to.jsx)(wn.Typography,{variant:"button",children:t})}),(0,to.jsx)(wn.AccordionDetails,{className:n.expansionPanelDetails,children:e})]})}var to,wn,YT,rf=p(()=>{to=d(R(),1);eA();wn=d(N(),1);yt();YT=te()(e=>({expansionPanelDetails:{display:"block",padding:e.spacing(1)},icon:{color:e.palette.tertiary.contrastText||"#fff"}}))});function qT(e){return os.default.createElement("div",null,os.default.createElement(Cc.FormControlLabel,{...e}))}function Xe({checked:e,label:t,disabled:r,onChange:n}){return os.default.createElement(qT,{control:os.default.createElement(Cc.Checkbox,{disabled:r,checked:e,onChange:n}),label:t})}var os,Cc,Ec=p(()=>{os=d(b(),1),Cc=d(N(),1)});function is({str:e}){let{classes:t}=jT(),[r,n]=(0,xr.useState)(!1),[o,i]=(0,xr.useState)(!1),[s,a]=(0,xr.useState)(!1),c=A=>A.replaceAll("-","").replaceAll(".",""),l=e.map(([A,u])=>[A,o?u:c(u)]).filter(A=>s?!0:!!A[1]).map(([A,u])=>`>${A}
${o?u:c(u)}`).join(`
`);return xr.default.createElement(xr.default.Fragment,null,xr.default.createElement(Ic.Button,{color:"primary",variant:"contained",onClick:()=>{Ni(l),n(!0),setTimeout(()=>{n(!1)},500)}},r?"Copied!":"Copy to clipboard"),xr.default.createElement(Xe,{label:"Show gaps",checked:o,onChange:()=>{i(!o)}}),xr.default.createElement(Xe,{label:"Show empty",checked:s,onChange:()=>{a(!s)}}),xr.default.createElement(Ic.TextField,{variant:"outlined",multiline:!0,className:t.dialogContent,minRows:5,maxRows:10,fullWidth:!0,value:l,InputProps:{readOnly:!0,classes:{input:t.textAreaFont}}}))}var xr,Ic,Mx,jT,nf=p(()=>{xr=d(b(),1),Ic=d(N(),1),Mx=d(Ve(),1);Ec();GA();jT=(0,Mx.makeStyles)()({textAreaFont:{fontFamily:"Courier New",wordWrap:"break-word"},dialogContent:{background:"lightgrey",margin:4,minWidth:"80em"}})});var _x={};rt(_x,{default:()=>WT});var si,vx,Tx,Dx,VT,WT,kx=p(()=>{si=d(b(),1);hc();rf();vx=d(he(),1),Tx=d(N(),1),Dx=d(G(),1);nf();VT=(0,Dx.observer)(function({model:e,onClose:t}){let{header:r}=e;return si.default.createElement(vx.Dialog,{onClose:()=>{t()},open:!0,title:"Metadata",maxWidth:"xl"},si.default.createElement(Tx.DialogContent,null,si.default.createElement(_r,{attributes:r}),si.default.createElement(ro,{title:"sequence"},si.default.createElement(is,{str:e.rows}))))}),WT=VT});var Lx={};rt(Lx,{default:()=>Nx});function Nx({model:e,onClose:t}){let[r,n]=(0,ye.useState)(!0),[o,i]=(0,ye.useState)(!0),[s,a]=(0,ye.useState)("viewport"),[c,l]=(0,ye.useState)(),A=(0,Ee.useTheme)(),{totalWidth:u,totalHeight:f,treeAreaWidth:m,turnedOnTracks:g}=e,h=g.length>0,E=u+m,C=f,x=s==="entire"&&(E>1e4||C>1e4);return ye.default.createElement(xc.Dialog,{onClose:()=>{t()},open:!0,title:"Export SVG"},ye.default.createElement(Ee.DialogContent,null,c?ye.default.createElement(xc.ErrorMessage,{error:c}):null,ye.default.createElement(Ee.Typography,null,"Settings:"),ye.default.createElement(Xe,{label:"Include minimap?",disabled:s==="entire",checked:r,onChange:()=>{n(!r)}}),h?ye.default.createElement(Xe,{label:"Include tracks?",checked:o,onChange:()=>{i(!o)}}):null,ye.default.createElement("div",null,ye.default.createElement(Ee.FormControl,null,ye.default.createElement(Ee.FormLabel,null,"Export type"),ye.default.createElement(Ee.RadioGroup,{value:s,onChange:y=>{a(y.target.value)}},ye.default.createElement(Ee.FormControlLabel,{value:"entire",control:ye.default.createElement(Ee.Radio,null),label:"Entire MSA"}),ye.default.createElement(Ee.FormControlLabel,{value:"viewport",control:ye.default.createElement(Ee.Radio,null),label:"Current viewport only"})))),x?ye.default.createElement(Ee.Alert,{severity:"warning",style:{marginTop:8}},"The entire MSA is very large (",Math.round(E),"x",Math.round(C)," pixels). Export may be slow or fail."):null),ye.default.createElement(Ee.DialogActions,null,ye.default.createElement(Ee.Button,{variant:"contained",color:"primary",onClick:()=>{(async()=>{try{await e.exportSVG({theme:A,includeMinimap:s==="entire"?!1:r,includeTracks:h&&o,exportType:s}),t()}catch(y){console.error(y),l(y)}})()}},"Submit"),ye.default.createElement(Ee.Button,{variant:"contained",color:"secondary",onClick:()=>{t()}},"Cancel")))}var ye,xc,Ee,Fx=p(()=>{ye=d(b(),1),xc=d(he(),1),Ee=d(N(),1);Ec()});function Rx(e){return of[Math.min(e,of.length-1)]}var of,sf,af=p(()=>{of=[["#F8766D"],["#F8766D","#00BFC4"],["#F8766D","#00BA38","#619CFF"],["#F8766D","#7CAE00","#00BFC4","#C77CFF"],["#F8766D","#A3A500","#00BF7D","#00B0F6","#E76BF3"],["#F8766D","#B79F00","#00BA38","#00BFC4","#619CFF","#F564E3"],["#F8766D","#C49A00","#53B400","#00C094","#00B6EB","#A58AFF","#FB61D7"],["#F8766D","#CD9600","#7CAE00","#00BE67","#00BFC4","#00A9FF","#C77CFF","#FF61CC"]];sf=of});var Gx={};rt(Gx,{default:()=>XT});var fe,Px,ss,yc,KT,zT,$T,XT,Ox=p(()=>{fe=d(b(),1),Px=d(he(),1),ss=d(N(),1),yc=d(G(),1);af();KT=(0,yc.observer)(function({model:e}){let{featureFilters:t}=e;return fe.default.createElement("div",null,fe.default.createElement(ss.Button,{onClick:()=>{for(let r of t.keys())e.setFilter(r,!0)}},"Toggle all on"),fe.default.createElement(ss.Button,{onClick:()=>{for(let r of t.keys())e.setFilter(r,!1)}},"Toggle all off"))}),zT=(0,yc.observer)(function({model:e}){let{tidyInterProAnnotationTypes:t,featureFilters:r}=e,n=[...t.values()],o=Rx(n.length-1);return fe.default.createElement(fe.default.Fragment,null,fe.default.createElement(KT,{model:e}),fe.default.createElement("table",null,fe.default.createElement("thead",null,fe.default.createElement("tr",null,fe.default.createElement("td",null),fe.default.createElement("td",null,"accession"),fe.default.createElement("td",null,"name"),fe.default.createElement("td",null,"description"))),fe.default.createElement("tbody",null,n.map(({accession:i,name:s,description:a},c)=>fe.default.createElement("tr",{key:i},fe.default.createElement("td",null,fe.default.createElement("input",{type:"checkbox",checked:r.get(i)??!1,onChange:()=>{e.setFilter(i,!e.featureFilters.get(i))}})),fe.default.createElement("td",null,i),fe.default.createElement("td",null,s),fe.default.createElement("td",null,a),fe.default.createElement("td",null,fe.default.createElement("div",{style:{width:20,height:20,background:o[c]||"black"}})))))))}),$T=(0,yc.observer)(function({onClose:e,model:t}){return fe.default.createElement(Px.Dialog,{onClose:()=>{e()},open:!0,title:"Feature filters",maxWidth:"xl"},fe.default.createElement(ss.DialogContent,null,fe.default.createElement(zT,{model:t})))}),XT=$T});var ZT,en,Ze,ar,Wx,Hx,cf,eD,wc,Kx,zx,Jx,Ux,Yx,as,tD,rD,nD,oD,uf,qx,iD,lf,Af,jx,ff,Mt,Vx,Bc,bc=p(()=>{ZT={grad:.9,turn:360,rad:360/(2*Math.PI)},en=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},Ze=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=Math.pow(10,t)),Math.round(r*e)/r+0},ar=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=1),e>r?r:e>t?e:t},Wx=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},Hx=function(e){return{r:ar(e.r,0,255),g:ar(e.g,0,255),b:ar(e.b,0,255),a:ar(e.a)}},cf=function(e){return{r:Ze(e.r),g:Ze(e.g),b:Ze(e.b),a:Ze(e.a,3)}},eD=/^#([0-9a-f]{3,8})$/i,wc=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Kx=function(e){var t=e.r,r=e.g,n=e.b,o=e.a,i=Math.max(t,r,n),s=i-Math.min(t,r,n),a=s?i===t?(r-n)/s:i===r?2+(n-t)/s:4+(t-r)/s:0;return{h:60*(a<0?a+6:a),s:i?s/i*100:0,v:i/255*100,a:o}},zx=function(e){var t=e.h,r=e.s,n=e.v,o=e.a;t=t/360*6,r/=100,n/=100;var i=Math.floor(t),s=n*(1-r),a=n*(1-(t-i)*r),c=n*(1-(1-t+i)*r),l=i%6;return{r:255*[n,a,s,s,c,n][l],g:255*[c,n,n,a,s,s][l],b:255*[s,s,c,n,n,a][l],a:o}},Jx=function(e){return{h:Wx(e.h),s:ar(e.s,0,100),l:ar(e.l,0,100),a:ar(e.a)}},Ux=function(e){return{h:Ze(e.h),s:Ze(e.s),l:Ze(e.l),a:Ze(e.a,3)}},Yx=function(e){return zx((r=(t=e).s,{h:t.h,s:(r*=((n=t.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:t.a}));var t,r,n},as=function(e){return{h:(t=Kx(e)).h,s:(o=(200-(r=t.s))*(n=t.v)/100)>0&&o<200?r*n/100/(o<=100?o:200-o)*100:0,l:o/2,a:t.a};var t,r,n,o},tD=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,rD=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,nD=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,oD=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,uf={string:[[function(e){var t=eD.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?Ze(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?Ze(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=nD.exec(e)||oD.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:Hx({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=tD.exec(e)||rD.exec(e);if(!t)return null;var r,n,o=Jx({h:(r=t[1],n=t[2],n===void 0&&(n="deg"),Number(r)*(ZT[n]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Yx(o)},"hsl"]],object:[[function(e){var t=e.r,r=e.g,n=e.b,o=e.a,i=o===void 0?1:o;return en(t)&&en(r)&&en(n)?Hx({r:Number(t),g:Number(r),b:Number(n),a:Number(i)}):null},"rgb"],[function(e){var t=e.h,r=e.s,n=e.l,o=e.a,i=o===void 0?1:o;if(!en(t)||!en(r)||!en(n))return null;var s=Jx({h:Number(t),s:Number(r),l:Number(n),a:Number(i)});return Yx(s)},"hsl"],[function(e){var t=e.h,r=e.s,n=e.v,o=e.a,i=o===void 0?1:o;if(!en(t)||!en(r)||!en(n))return null;var s=(function(a){return{h:Wx(a.h),s:ar(a.s,0,100),v:ar(a.v,0,100),a:ar(a.a)}})({h:Number(t),s:Number(r),v:Number(n),a:Number(i)});return zx(s)},"hsv"]]},qx=function(e,t){for(var r=0;r<t.length;r++){var n=t[r][0](e);if(n)return[n,t[r][1]]}return[null,void 0]},iD=function(e){return typeof e=="string"?qx(e.trim(),uf.string):typeof e=="object"&&e!==null?qx(e,uf.object):[null,void 0]},lf=function(e,t){var r=as(e);return{h:r.h,s:ar(r.s+100*t,0,100),l:r.l,a:r.a}},Af=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},jx=function(e,t){var r=as(e);return{h:r.h,s:r.s,l:ar(r.l+100*t,0,100),a:r.a}},ff=(function(){function e(t){this.parsed=iD(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return Ze(Af(this.rgba),2)},e.prototype.isDark=function(){return Af(this.rgba)<.5},e.prototype.isLight=function(){return Af(this.rgba)>=.5},e.prototype.toHex=function(){return t=cf(this.rgba),r=t.r,n=t.g,o=t.b,s=(i=t.a)<1?wc(Ze(255*i)):"","#"+wc(r)+wc(n)+wc(o)+s;var t,r,n,o,i,s},e.prototype.toRgb=function(){return cf(this.rgba)},e.prototype.toRgbString=function(){return t=cf(this.rgba),r=t.r,n=t.g,o=t.b,(i=t.a)<1?"rgba("+r+", "+n+", "+o+", "+i+")":"rgb("+r+", "+n+", "+o+")";var t,r,n,o,i},e.prototype.toHsl=function(){return Ux(as(this.rgba))},e.prototype.toHslString=function(){return t=Ux(as(this.rgba)),r=t.h,n=t.s,o=t.l,(i=t.a)<1?"hsla("+r+", "+n+"%, "+o+"%, "+i+")":"hsl("+r+", "+n+"%, "+o+"%)";var t,r,n,o,i},e.prototype.toHsv=function(){return t=Kx(this.rgba),{h:Ze(t.h),s:Ze(t.s),v:Ze(t.v),a:Ze(t.a,3)};var t},e.prototype.invert=function(){return Mt({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),Mt(lf(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),Mt(lf(this.rgba,-t))},e.prototype.grayscale=function(){return Mt(lf(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),Mt(jx(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),Mt(jx(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?Mt({r:(r=this.rgba).r,g:r.g,b:r.b,a:t}):Ze(this.rgba.a,3);var r},e.prototype.hue=function(t){var r=as(this.rgba);return typeof t=="number"?Mt({h:t,s:r.s,l:r.l,a:r.a}):Ze(r.h)},e.prototype.isEqual=function(t){return this.toHex()===Mt(t).toHex()},e})(),Mt=function(e){return e instanceof ff?e:new ff(e)},Vx=[],Bc=function(e){e.forEach(function(t){Vx.indexOf(t)<0&&(t(ff,uf),Vx.push(t))})}});function Sc(e,t){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var o in r)n[r[o]]=o;var i={};e.prototype.toName=function(s){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,c,l=n[this.toHex()];if(l)return l;if(s?.closest){var A=this.toRgb(),u=1/0,f="black";if(!i.length)for(var m in r)i[m]=new e(r[m]).toRgb();for(var g in r){var h=(a=A,c=i[g],Math.pow(a.r-c.r,2)+Math.pow(a.g-c.g,2)+Math.pow(a.b-c.b,2));h<u&&(u=h,f=g)}return f}},t.string.push([function(s){var a=s.toLowerCase(),c=a==="transparent"?"#0000":r[a];return c?new e(c).toRgb():null},"name"])}var df=p(()=>{});function Qc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}var $x=p(()=>{});function Mc(e,t){let r;if(t===void 0)for(let n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let o of e)(o=t(o,++n,e))!=null&&(r<o||r===void 0&&o>=o)&&(r=o)}return r}var Xx=p(()=>{});var mf=p(()=>{$x();Xx()});function vc(e,t){return Object.fromEntries(Object.entries(e).map(t))}function no(e,t){return vc(e,([r,n])=>[r,t.palette.getContrastText(Mt(n).toHex())])}function gf(e,t){if(e.length===0)return typeof t=="string"?t:t.join("");let r=[],n=0;for(let o of e)o>n&&r.push(typeof t=="string"?t.slice(n,o):t.slice(n,o).join("")),n=o+1;return n<t.length&&r.push(typeof t=="string"?t.slice(n):t.slice(n).join("")),r.join("")}function pf(e,t,r){e.len=(t+=Math.max(e.data.length||0,0))*r,e.children&&e.children.forEach(n=>{pf(n,t,r)})}function hf(e){return(e.data.length||0)+(e.children&&Mc(e.children,hf)||0)}function Zx(e){e.children&&(e._children=e.children,e.children=null)}function Cf(e){return e.end-e.start}function cs(e){return e==="-"||e==="."}var Bn=p(()=>{bc();df();mf();Bc([Sc])});var sD,ai,Tc=p(()=>{Wu();bc();df();Bn();Bc([Sc]);sD={none:{},clustal:{G:"orange",P:"orange",S:"orange",T:"orange",H:"red",K:"red",R:"red",F:"blue",W:"blue",Y:"blue",I:"green",L:"green",M:"green",V:"green"},lesk:{G:"orange",A:"orange",S:"orange",T:"orange",C:"green",V:"green",I:"green",L:"green",P:"green",F:"green",Y:"green",M:"green",W:"green",N:"magenta",Q:"magenta",H:"magenta",D:"red",E:"red",K:"blue",R:"blue"},maeditor:{A:"lightgreen",G:"lightgreen",C:"green",D:"darkgreen",E:"darkgreen",N:"darkgreen",Q:"darkgreen",I:"blue",L:"blue",M:"blue",V:"blue",F:"#c8a2c8",W:"#c8a2c8",Y:"#c8a2c8",H:"darkblue",K:"orange",R:"orange",P:"pink",S:"red",T:"red"},percent_identity_dynamic:{},flower:{A:"#b18a51",C:"#ff5701",D:"#01a578",E:"#2da0a1",F:"#fa559d",G:"#b1c23c",H:"#0194f9",I:"#f27663",K:"#7fc3d7",L:"#df6e75",M:"#fe9daf",N:"#0bcec6",P:"#4fa32a",Q:"#7295ae",R:"#83bff1",S:"#b4bd9b",T:"#d2b576",V:"#fd997b",W:"#ff2ded",Y:"#c96ecf"},rainbow_dna:{A:"#3737f5",C:"#37f537",G:"#f5f537",T:"#f53737",U:"#f53737"},clustalx_protein:{A:"#197fe5",C:"#e57f7f",D:"#cc4ccc",E:"#cc4ccc",F:"#197fe5",G:"#e5994c",H:"#19b2b2",I:"#197fe5",K:"#e53319",L:"#197fe5",M:"#197fe5",N:"#19cc19",P:"#cccc00",Q:"#19cc19",R:"#e53319",S:"#19cc19",T:"#19cc19",V:"#197fe5",W:"#197fe5",Y:"#19b2b2"},clustalx_protein_dynamic:{},clustalx_dna:{A:"#e53319",C:"#197fe5",G:"#e5994c",T:"#19cc19",U:"#19cc19"},jbrowse_dna:{A:Xi[500],C:$i[500],G:Zi[500],T:ni[500],U:ni[500]},jalview_buried:{A:"#00a35c",R:"#00fc03",N:"#00eb14",D:"#00eb14",C:"#0000ff",Q:"#00f10e",E:"#00f10e",G:"#009d62",H:"#00d52a",I:"#0054ab",L:"#007b84",K:"#00ff00",M:"#009768",F:"#008778",P:"#00e01f",S:"#00d52a",T:"#00db24",W:"#00a857",Y:"#00e619",V:"#005fa0",B:"#00eb14",X:"#00b649",Z:"#00f10e"},jalview_hydrophobicity:{A:"#ad0052",R:"#0000ff",N:"#0c00f3",D:"#0c00f3",C:"#c2003d",Q:"#0c00f3",E:"#0c00f3",G:"#6a0095",H:"#1500ea",I:"#ff0000",L:"#ea0015",K:"#0000ff",M:"#b0004f",F:"#cb0034",P:"#4600b9",S:"#5e00a1",T:"#61009e",W:"#5b00a4",Y:"#4f00b0",V:"#f60009",B:"#0c00f3",X:"#680097",Z:"#0c00f3"},jalview_prophelix:{A:"#e718e7",R:"#6f906f",N:"#1be41b",D:"#778877",C:"#23dc23",Q:"#926d92",E:"#ff00ff",G:"#00ff00",H:"#758a75",I:"#8a758a",L:"#ae51ae",K:"#a05fa0",M:"#ef10ef",F:"#986798",P:"#00ff00",S:"#36c936",T:"#47b847",W:"#8a758a",Y:"#21de21",V:"#857a85",B:"#49b649",X:"#758a75",Z:"#c936c9"},jalview_propstrand:{A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8"},jalview_propturn:{A:"#2cd3d3",R:"#708f8f",N:"#ff0000",D:"#e81717",C:"#a85757",Q:"#3fc0c0",E:"#778888",G:"#ff0000",H:"#708f8f",I:"#00ffff",L:"#1ce3e3",K:"#7e8181",M:"#1ee1e1",F:"#1ee1e1",P:"#f60909",S:"#e11e1e",T:"#738c8c",W:"#738c8c",Y:"#9d6262",V:"#07f8f8",B:"#f30c0c",X:"#7c8383",Z:"#5ba4a4"},jalview_taylor:{A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00"},jalview_zappo:{A:"#ffafaf",R:"#6464ff",N:"#00ff00",D:"#ff0000",C:"#ffff00",Q:"#00ff00",E:"#ff0000",G:"#ff00ff",H:"#6464ff",I:"#ffafaf",L:"#ffafaf",K:"#6464ff",M:"#ffafaf",F:"#ffc800",P:"#ff00ff",S:"#00ff00",T:"#00ff00",W:"#ffc800",Y:"#ffc800",V:"#ffafaf"},cinema:{H:"blue",K:"blue",R:"blue",D:"red",E:"red",S:"green",T:"green",N:"green",Q:"green",A:"white",V:"white",L:"white",I:"white",M:"white",F:"magenta",W:"magenta",Y:"magenta",P:"brown",G:"brown",C:"yellow",B:"gray",Z:"gray",X:"gray","-":"gray",".":"gray"}},ai=vc(sD,([e,t])=>[e,vc(t,([r,n])=>[r,Mt(n).toHex()])])});var ny={};rt(ny,{default:()=>uD});var Y,ty,Ge,ls,ry,Ef,ey,aD,cD,lD,AD,uD,oy=p(()=>{Y=d(b(),1),ty=d(he(),1),Ge=d(N(),1),ls=d(G(),1),ry=d(Ve(),1);Tc();Ec();Ef=(0,ry.makeStyles)()(e=>({field:{margin:e.spacing(4)},flex:{display:"flex"},minw:{width:"80em"}})),ey=(e=0)=>+e.toFixed(1),aD=(0,ls.observer)(function({model:e}){return Y.default.createElement(Y.default.Fragment,null,Y.default.createElement(cD,{model:e}),Y.default.createElement(lD,{model:e}))}),cD=(0,ls.observer)(function({model:t}){let{classes:r}=Ef(),{drawTree:n,drawLabels:o,drawNodeBubbles:i,labelsAlignRight:s,noTree:a,showBranchLen:c,treeWidthMatchesArea:l,treeWidth:A}=t;return Y.default.createElement("div",null,Y.default.createElement("h1",null,"Tree options"),Y.default.createElement(Xe,{checked:c,label:"Show branch length?",onChange:()=>{t.setShowBranchLen(!c)}}),Y.default.createElement(Xe,{checked:i,label:"Draw clickable bubbles on tree branches?",onChange:()=>{t.setDrawNodeBubbles(!i)}}),Y.default.createElement(Xe,{checked:n,label:"Show tree?",onChange:()=>{t.setDrawTree(!n)}}),Y.default.createElement(Xe,{checked:s,label:"Tree labels align right?",onChange:()=>{t.setLabelsAlignRight(!s)}}),Y.default.createElement(Xe,{checked:o,label:"Draw labels",onChange:()=>{t.setDrawLabels(!o)}}),a?null:Y.default.createElement("div",null,Y.default.createElement(Xe,{checked:l,label:"Make tree width fit to tree area?",onChange:()=>{t.setTreeWidthMatchesArea(!l)}}),l?null:Y.default.createElement("div",{className:r.flex},Y.default.createElement(Ge.Typography,null,"Tree width (",A,"px)"),Y.default.createElement(Ge.Slider,{className:r.field,min:50,max:600,value:A,onChange:(u,f)=>{t.setTreeWidth(f)}}))))}),lD=(0,ls.observer)(function({model:t}){let{classes:r}=Ef(),{bgColor:n,contrastLettering:o,colWidth:i,allowedGappyness:s,drawMsaLetters:a,colorSchemeName:c,hideGaps:l,rowHeight:A}=t;return Y.default.createElement("div",null,Y.default.createElement("h1",null,"MSA options"),Y.default.createElement(Xe,{checked:a,label:"Draw letters",onChange:()=>{t.setDrawMsaLetters(!a)}}),Y.default.createElement(Xe,{checked:n,label:"Color letters instead of background of tiles",onChange:()=>{t.setBgColor(!n)}}),Y.default.createElement(Xe,{checked:o,label:"Use contrast lettering",onChange:()=>{t.setContrastLettering(!o)}}),Y.default.createElement(Xe,{checked:l,label:"Enable hiding gappy columns?",onChange:()=>{t.setHideGaps(!l)}}),l?Y.default.createElement("div",{className:r.flex},Y.default.createElement(Ge.Typography,null,"Hide columns w/ >",s,"% gaps"),Y.default.createElement(Ge.Slider,{className:r.field,min:1,max:100,value:s,onChange:(u,f)=>{t.setAllowedGappyness(f)}})):null,Y.default.createElement("div",{className:r.flex},Y.default.createElement(Ge.Typography,null,"Column width (",ey(i),"px)"),Y.default.createElement(Ge.Slider,{className:r.field,min:1,max:50,value:i,onChange:(u,f)=>{t.setColWidth(f)}})),Y.default.createElement("div",{className:r.flex},Y.default.createElement(Ge.Typography,null,"Row height (",ey(A),"px)"),Y.default.createElement(Ge.Slider,{className:r.field,min:1,max:50,value:A,onChange:(u,f)=>{t.setRowHeight(f)}})),Y.default.createElement(Ge.TextField,{select:!0,label:"Color scheme",value:c,onChange:u=>{t.setColorSchemeName(u.target.value)}},Object.keys(ai).map(u=>Y.default.createElement(Ge.MenuItem,{key:u,value:u},u))))}),AD=(0,ls.observer)(function({model:e,onClose:t}){let{classes:r}=Ef();return Y.default.createElement(ty.Dialog,{open:!0,title:"Settings",maxWidth:"xl",onClose:()=>{t()}},Y.default.createElement(Ge.DialogContent,{className:r.minw},Y.default.createElement(aD,{model:e}),Y.default.createElement(Ge.DialogActions,null,Y.default.createElement(Ge.Button,{variant:"contained",color:"primary",onClick:()=>{t()}},"Submit"))))}),uD=AD});async function iy(e,t){let r=await fetch(e,t);if(!r.ok)throw new Error(`HTTP ${r.status} fetching ${e} ${await r.text()}`);return r}async function If(e,t){return(await iy(e,t)).text()}async function Dc(e,t){return(await iy(e,t)).json()}function sy(e){return new Promise(t=>setTimeout(t,e))}var xf=p(()=>{});var ly={};rt(ly,{default:()=>dD});var Ie,ay,yf,Qe,cy,fD,dD,Ay=p(()=>{Ie=d(b(),1),ay=d(he(),1),yf=d(ie(),1),Qe=d(N(),1),cy=d(G(),1);xf();fD=(0,cy.observer)(function({handleClose:e,model:t}){let[r,n]=(0,Ie.useState)(),[o,i]=(0,Ie.useState)("file"),[s,a]=(0,Ie.useState)("");return Ie.default.createElement(ay.Dialog,{maxWidth:"xl",title:"Open protein domains from file",onClose:()=>{e()},open:!0},Ie.default.createElement(Qe.DialogContent,null,Ie.default.createElement("div",null,Ie.default.createElement(Qe.Typography,null,"Open a JSON file of InterProScan results that you run remotely on EBI servers or locally"),Ie.default.createElement("div",{style:{display:"flex",margin:30}},Ie.default.createElement(Qe.FormControl,{component:"fieldset"},Ie.default.createElement(Qe.RadioGroup,{value:o,onChange:c=>{i(c.target.value)}},Ie.default.createElement(Qe.FormControlLabel,{value:"url",control:Ie.default.createElement(Qe.Radio,null),label:"URL"}),Ie.default.createElement(Qe.FormControlLabel,{value:"file",control:Ie.default.createElement(Qe.Radio,null),label:"File"}))),o==="url"?Ie.default.createElement("div",null,Ie.default.createElement(Qe.Typography,null,"Open a InterProScan JSON file remote URL"),Ie.default.createElement(Qe.TextField,{label:"URL",value:s,onChange:c=>{a(c.target.value)}})):null,o==="file"?Ie.default.createElement("div",{style:{paddingTop:20}},Ie.default.createElement(Qe.Typography,null,"Open a InterProScan JSON file file from your local drive"),Ie.default.createElement(Qe.Button,{variant:"outlined",component:"label"},"Choose File",Ie.default.createElement("input",{type:"file",hidden:!0,onChange:({target:c})=>{let l=c.files?.[0];l&&n(l)}}))):null))),Ie.default.createElement(Qe.DialogActions,null,Ie.default.createElement(Qe.Button,{variant:"contained",color:"primary",onClick:()=>{(async()=>{try{let c=r?JSON.parse(await r.text()):await Dc(s);t.setInterProAnnotations(Object.fromEntries(c.results.map(l=>[l.xref[0].id,l]))),t.setShowDomains(!0),(0,yf.getSession)(t).notify("Loaded interproscan results","success")}catch(c){console.error(c),(0,yf.getSession)(t).notifyError(`${c}`,c)}finally{t.setStatus()}})(),e()}},"Open results")))}),dD=fD});async function mD({seq:e,onProgress:t,onJobId:r,programs:n,model:o}){let i=await If(`${Bf}/iprscan5/run`,{method:"POST",body:new URLSearchParams({email:"colin.diesh@gmail.com",sequence:e,programs:n.join(",")})});r?.(i),await pD({jobId:i,onProgress:t}),await hD({jobId:i,model:o})}function gD(e){return Dc(`${Bf}/iprscan5/result/${e}/json`)}async function pD({onProgress:e,jobId:t}){let r=`${Bf}/iprscan5/status/${t}`;try{for(;;){for(let o=0;o<10;o++)await sy(1e3),e({msg:`Checking status ${10-o}`,url:r});let n=await If(r);if(n.includes("FINISHED"))break;if(n.includes("FAILURE"))throw new Error(`Failed to run: jobId ${t}`)}}finally{e()}}async function uy({algorithm:e,seq:t,programs:r,onJobId:n,onProgress:o,model:i}){try{throw o({msg:`Launching ${e} MSA`}),e==="interproscan"&&await mD({seq:t,onJobId:n,onProgress:o,programs:r,model:i}),new Error("unknown algorithm")}finally{o()}}async function hD({jobId:e,model:t}){try{t.setStatus({msg:`Downloading results of ${e} (for larger sequences this can be slow, click status to download and upload in the manual tab)`,url:`https://www.ebi.ac.uk/Tools/services/rest/iprscan5/result/${e}/json`});let r=await gD(e);t.setInterProAnnotations(Object.fromEntries(r.results.map(n=>[n.xref[0].id,n]))),t.setShowDomains(!0),(0,wf.getSession)(t).notify(`Loaded interproscan ${e} results`,"success")}catch(r){console.error(r),(0,wf.getSession)(t).notifyError(`${r}`,r)}finally{t.setStatus()}}var wf,Bf,fy=p(()=>{wf=d(ie(),1);xf();Bf="https://www.ebi.ac.uk/Tools/services/rest"});var py={};rt(py,{default:()=>ED});var Me,dy,my,Ut,gy,CD,ED,hy=p(()=>{Me=d(b(),1),dy=d(he(),1),my=d(ie(),1),Ut=d(N(),1),gy=d(G(),1);fy();CD=(0,gy.observer)(function({handleClose:e,model:t}){let[r,n]=(0,Me.useState)([{name:"NCBIfam",description:"NCBI RefSeq FAMs including TIGRFAMs",category:"Families, domains, sites & repeats",checked:!0},{name:"SFLD",description:"Structure function linkage database",category:"Families, domains, sites & repeats",checked:!0},{name:"Phobius",checked:!0,description:"A combined transmembrane topology and signal peptide predictor",category:"Other sequence features"},{name:"SignalP",checked:!0,category:"Other sequence features"},{name:"SignalP_EUK",category:"Other category",checked:!0},{name:"SignalP_GRAM_POSITIVE",category:"Other category",checked:!0},{name:"SignalP_GRAM_NEGATIVE",checked:!0,category:"Other category"},{name:"SUPERFAMILY",category:"Structural domains",checked:!0},{name:"PANTHER",category:"Families, domains, sites & repeats",checked:!0},{name:"Gene3D",category:"Structural domains",checked:!0},{name:"Hamap",category:"Families, domains, sites & repeats",checked:!0},{name:"ProSiteProfiles",category:"Families, domains, sites & repeats",checked:!0},{name:"ProSitePatterns",category:"Families, domains, sites & repeats",checked:!0},{name:"Coils",category:"Other sequence features",checked:!0},{name:"SMART",category:"Families, domains, sites & repeats",checked:!0},{name:"CDD",description:"Conserved Domains Database",category:"Families, domains, sites & repeats",checked:!0},{name:"PRINTS",category:"Families, domains, sites & repeats",checked:!0},{name:"Pfam",category:"Families, domains, sites & repeats",checked:!0},{name:"MobiDBLite",checked:!0,category:"Other sequence features"},{name:"PIRSF",checked:!0,category:"Other category"},{name:"TMHMM",checked:!0,category:"Other sequence features"},{name:"AntiFam",checked:!0,category:"Other category"},{name:"FunFam",checked:!0,category:"Other category"},{name:"PIRSR",checked:!0,category:"Families, domains, sites & repeats"}]),o=r.filter(a=>a.checked).map(a=>a.name),[i,s]=(0,Me.useState)(!1);return Me.default.createElement(dy.Dialog,{maxWidth:"xl",title:"Query InterProScan API for domains",onClose:()=>{e()},open:!0},Me.default.createElement(Ut.DialogContent,null,Me.default.createElement(Ut.Typography,null,"This will run InterProScan via the InterProScan API on all rows of the current MSA"),Me.default.createElement(Ut.Button,{onClick:()=>{s(!i)}},i?"Hide":"Show"," advanced options"),i?Me.default.createElement("div",null,Me.default.createElement(Ut.Typography,null,"Select algorithms for InterProScan to run"),Me.default.createElement("div",null,Me.default.createElement(Ut.Button,{variant:"contained",color:"secondary",onClick:()=>{n(r.map(a=>({...a,checked:!1})))}},"Select none"),Me.default.createElement(Ut.Button,{variant:"contained",color:"primary",onClick:()=>{n(r.map(a=>({...a,checked:!0})))}},"Select all")),Me.default.createElement("table",null,Me.default.createElement("tbody",null,r.toSorted((a,c)=>a.category.localeCompare(c.category)).map(({name:a,checked:c,category:l})=>Me.default.createElement("tr",{key:a},Me.default.createElement("td",null,Me.default.createElement("input",{type:"checkbox",key:a,checked:c,onChange:()=>{n(r.map(A=>A.name===a?{...A,checked:!A.checked}:A))}})),Me.default.createElement("td",null,a),Me.default.createElement("td",null,l)))))):null),Me.default.createElement(Ut.DialogActions,null,Me.default.createElement(Ut.Button,{variant:"contained",color:"secondary",onClick:()=>{e()}},"Cancel"),Me.default.createElement(Ut.Button,{variant:"contained",color:"primary",onClick:()=>{(async()=>{try{let{rows:a}=t;if(a.length>140)throw new Error("Too many sequences, please run InterProScan offline");await uy({algorithm:"interproscan",programs:o,seq:a.map(c=>[c[0],c[1].replaceAll("-","")]).filter(c=>!!c[1]).map(c=>`>${c[0]}
${c[1]}`).join(`
`),onProgress:c=>{t.setStatus(c)},model:t})}catch(a){console.error(a),(0,my.getSession)(t).notifyError(`${a}`,a)}finally{t.setStatus()}})(),e()}},"Send sequences to InterProScan")))}),ED=CD});var kr,Cy,ID,xD,yD,wD,BD,bD,SD,Ey,Iy=p(()=>{kr=d(b(),1);uc();Yu();DI();NI();FI();GI();HI();YI();VI();KI();Cy=d(G(),1),ID=(0,kr.lazy)(()=>Promise.resolve().then(()=>(kx(),_x))),xD=(0,kr.lazy)(()=>Promise.resolve().then(()=>(Fx(),Lx))),yD=(0,kr.lazy)(()=>Promise.resolve().then(()=>(Ox(),Gx))),wD=(0,kr.lazy)(()=>Promise.resolve().then(()=>(oy(),ny))),BD=(0,kr.lazy)(()=>Promise.resolve().then(()=>(Ay(),ly))),bD=(0,kr.lazy)(()=>Promise.resolve().then(()=>(hy(),py))),SD=(0,Cy.observer)(({model:e})=>{let{showDomains:t,actuallyShowDomains:r,subFeatureRows:n,noDomains:o,tracks:i,turnedOffTracks:s}=e;return kr.default.createElement(ri,{menuItems:[{label:"Return to import form",icon:qu,onClick:()=>{e.reset()}},{label:"Metadata",icon:TI,onClick:()=>{e.queueDialog(a=>[ID,{model:e,onClose:a}])}},{label:"More settings",onClick:()=>{e.queueDialog(a=>[wD,{model:e,onClose:a}])}},{label:"Tracks",icon:Vu,type:"subMenu",subMenu:i.map(a=>({label:a.model.name,type:"checkbox",checked:!s.has(a.model.id),onClick:()=>{e.toggleTrack(a.model.id)}}))},{label:"Export SVG",icon:OI,onClick:()=>{e.queueDialog(a=>[xD,{onClose:a,model:e}])}},...e.rows.length>=2?[{label:"Calculate neighbor joining tree (BLOSUM62)",icon:fc,onClick:()=>{try{e.calculateNeighborJoiningTreeFromMSA()}catch(a){console.error("Failed to calculate NJ tree:",a),e.setError(a)}}}]:[],{label:"Features/protein domains",type:"subMenu",subMenu:[{label:"Open domains...",icon:qu,onClick:()=>{e.queueDialog(a=>[BD,{handleClose:a,model:e}])}},{label:"Query InterProScan for domains...",icon:UI,onClick:()=>{e.queueDialog(a=>[bD,{handleClose:a,model:e}])}},{label:`Show domains${o?" (no domains loaded)":""}`,disabled:o,icon:Vu,checked:r?t:!1,type:"checkbox",onClick:()=>{e.setShowDomains(!t)}},{label:`Use sub-row layout${o?" (no domains loaded)":""}`,disabled:o,checked:r?n:!1,icon:jI,type:"checkbox",onClick:()=>{e.setSubFeatureRows(!n)}},{label:`Filter domains${o?" (no domains loaded)":""}`,icon:kI,disabled:o,onClick:()=>{e.queueDialog(a=>[yD,{onClose:a,model:e}])}}]},...e.extraViewMenuItems()]},kr.default.createElement(PI,null))}),Ey=SD});var _c,xy,yy,wy,By,QD,MD,by,Sy=p(()=>{_c=d(b(),1),xy=d(he(),1),yy=d(N(),1),wy=d(G(),1),By=d(Ve(),1),QD=(0,By.makeStyles)()({margin:{margin:"auto",marginLeft:10}}),MD=(0,wy.observer)(({model:e})=>{let{status:t}=e,{classes:r}=QD();return t?_c.default.createElement(yy.Typography,{className:r.margin},_c.default.createElement(xy.LoadingEllipses,{message:t.msg,component:"span"})," ",t.url?_c.default.createElement("a",{href:t.url,target:"_blank",rel:"noreferrer"},"(status)"):null):null}),by=MD});var bf,kc,Qy,vD,My,vy=p(()=>{bf=d(b(),1),kc=d(N(),1),Qy=d(G(),1),vD=(0,Qy.observer)(function({model:e}){let{currentAlignment:t,alignmentNames:r}=e;return r.length>0?bf.default.createElement(kc.TextField,{select:!0,variant:"outlined",value:t,size:"small",onChange:n=>{e.setCurrentAlignment(+n.target.value),e.setScrollX(0),e.setScrollY(0)}},r.map((n,o)=>bf.default.createElement(kc.MenuItem,{key:`${n}-${o}`,value:o},n))):null}),My=vD});var Ty,Dy,_y=p(()=>{"use client";$();Ty=d(R(),1),Dy=(0,k.createSvgIcon)((0,Ty.jsx)("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10c1.38 0 2.5-1.12 2.5-2.5 0-.61-.23-1.2-.64-1.67-.08-.1-.13-.21-.13-.33 0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9m5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9M5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5m6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5"}),"Palette")});var Sf,ky,TD,Ny,Ly=p(()=>{Sf=d(b(),1);uc();Yu();_y();Zl();ky=d(G(),1);Tc();TD=(0,ky.observer)(function({model:e}){let{colorSchemeName:t,drawMsaLetters:r,contrastLettering:n,hideGaps:o,bgColor:i,drawTree:s,showBranchLen:a,labelsAlignRight:c,drawNodeBubbles:l,drawLabels:A,treeWidthMatchesArea:u,noTree:f}=e;return Sf.default.createElement(ri,{closeAfterItemClick:!1,menuItems:[{label:"Color scheme",icon:Dy,type:"subMenu",subMenu:Object.keys(ai).map(m=>({label:m,type:"radio",checked:t===m,onClick:()=>{e.setColorSchemeName(m)}}))},{label:"MSA settings",type:"subMenu",subMenu:[{label:"Draw letters",type:"checkbox",checked:r,onClick:()=>{e.setDrawMsaLetters(!r)}},{label:"Color letters instead of background of tiles",type:"checkbox",checked:!i,onClick:()=>{e.setBgColor(!i)}},{label:"Use contrast lettering",type:"checkbox",checked:n,onClick:()=>{e.setContrastLettering(!n)}},{label:"Enable hiding gappy columns?",type:"checkbox",checked:o,onClick:()=>{e.setHideGaps(!o)}}]},{label:"Tree settings",type:"subMenu",icon:fc,subMenu:[{label:"Show branch length",type:"checkbox",checked:a,onClick:()=>{e.setShowBranchLen(!a)}},{label:"Show tree",type:"checkbox",checked:s,onClick:()=>{e.setDrawTree(!s)}},{label:"Draw clickable bubbles on tree branches",type:"checkbox",checked:l,onClick:()=>{e.setDrawNodeBubbles(!l)}},{label:"Tree labels align right",type:"checkbox",checked:c,onClick:()=>{e.setLabelsAlignRight(!c)}},{label:"Draw labels",type:"checkbox",checked:A,onClick:()=>{e.setDrawLabels(!A)}},...f?[]:[{label:"Make tree width fit to tree area",type:"checkbox",checked:u,onClick:()=>{e.setTreeWidthMatchesArea(!u)}}]]}]},Sf.default.createElement(ta,null))}),Ny=TD});var Qf,Fy,Ry=p(()=>{"use client";$();Qf=d(R(),1),Fy=(0,k.createSvgIcon)([(0,Qf.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"},"0"),(0,Qf.jsx)("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"},"1")],"ZoomIn")});var Py,Gy,Oy=p(()=>{"use client";$();Py=d(R(),1),Gy=(0,k.createSvgIcon)((0,Py.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14M7 9h5v1H7z"}),"ZoomOut")});var oo,Mf,Hy,DD,Jy,Uy=p(()=>{oo=d(b(),1);Ry();Oy();Mf=d(N(),1),Hy=d(G(),1),DD=(0,Hy.observer)(function({model:t}){return oo.default.createElement(oo.default.Fragment,null,oo.default.createElement(Mf.IconButton,{onClick:()=>{t.zoomIn()}},oo.default.createElement(Fy,null)),oo.default.createElement(Mf.IconButton,{onClick:()=>{t.zoomOut()}},oo.default.createElement(Gy,null)))}),Jy=DD});var Yy,qy,jy=p(()=>{"use client";$();Yy=d(R(),1),qy=(0,k.createSvgIcon)((0,Yy.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")});var Vy,Nc,vf=p(()=>{"use client";$();Vy=d(R(),1),Nc=(0,k.createSvgIcon)((0,Vy.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"}),"RestartAlt")});var Tf,Wy,_D,Ky,zy=p(()=>{Tf=d(b(),1);uc();jy();vf();Wy=d(G(),1),_D=(0,Wy.observer)(function({model:e}){return Tf.default.createElement(ri,{menuItems:[{label:"Fit both vertically/horizontally",onClick:()=>{e.fit()}},{label:"Fit vertically",onClick:()=>{e.fitVertically()}},{label:"Fit horizontally",onClick:()=>{e.fitHorizontally()}},{label:"Reset zoom to default",icon:Nc,onClick:()=>{e.resetZoom()}},{label:"Show extra zoom options",checked:e.showZoomStar,type:"checkbox",onClick:()=>{e.setShowZoomStar(!e.showZoomStar)}}]},Tf.default.createElement(qy,null))}),Ky=_D});var cr,ci,$y,Xy,kD,ND,Zy,ew=p(()=>{cr=d(b(),1);vf();ci=d(N(),1),$y=d(G(),1),Xy=d(Ve(),1),kD=(0,Xy.makeStyles)()(e=>({dpad:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)"},icon:{padding:e.spacing(.5)}})),ND=(0,$y.observer)(function({model:e}){let{classes:t}=kD();return cr.default.createElement("div",{className:t.dpad},cr.default.createElement("div",null),cr.default.createElement(ci.IconButton,{className:t.icon,onClick:()=>{e.zoomInVertical()}},"Y+"),cr.default.createElement("div",null),cr.default.createElement(ci.IconButton,{className:t.icon,onClick:()=>{e.zoomOutHorizontal()}},"X-"),cr.default.createElement(ci.IconButton,{className:t.icon,onClick:()=>{e.resetZoom()}},cr.default.createElement(Nc,null)),cr.default.createElement(ci.IconButton,{className:t.icon,onClick:()=>{e.zoomInHorizontal()}},"X+"),cr.default.createElement("div",null),cr.default.createElement(ci.IconButton,{className:t.icon,onClick:()=>{e.zoomOutVertical()}},"Y-"),cr.default.createElement("div",null))}),Zy=ND});var tw,rw=p(()=>{tw="5.0.6"});var iw={};rt(iw,{default:()=>ow});function ow({onClose:e}){return je.default.createElement(nw.Dialog,{open:!0,title:"About",onClose:()=>{e()}},je.default.createElement(vt.DialogContent,null,je.default.createElement(vt.Typography,null,"MSAView ",tw," (",je.default.createElement(vt.Link,{href:"https://github.com/gmod/react-msaview"},"Github"),")"),je.default.createElement("ul",null,je.default.createElement("li",null,je.default.createElement(vt.Typography,null,"We use some color schemes from the"," ",je.default.createElement(vt.Link,{href:"https://github.com/biotite-dev/biotite"},"biotite")," ","project, and their license is reproduced"," ",je.default.createElement(vt.Link,{href:"https://github.com/biotite-dev/biotite/blob/master/LICENSE.rst"},"here"))),je.default.createElement("li",null,je.default.createElement(vt.Typography,null,"See this page for some information on jalview colorings"," ",je.default.createElement(vt.Link,{href:"https://www.jalview.org/help/html/colourSchemes/"},"here"))),je.default.createElement("li",null,je.default.createElement(vt.Typography,null,"See this page for some info on the clustal, cinema, maeditor, and lesk color schemes"," ",je.default.createElement(vt.Link,{href:"http://www.bioinformatics.nl/~berndb/aacolour.html"},"here"))),je.default.createElement("li",null,je.default.createElement(vt.Typography,null,"See this paper about the flower color scheme"," ",je.default.createElement(vt.Link,{href:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC7245768/"},"here"))))))}var je,nw,vt,sw=p(()=>{je=d(b(),1),nw=d(he(),1),vt=d(N(),1);rw()});function RD(){return Oe.default.createElement("div",{style:{flex:1}})}var Oe,aw,cw,LD,FD,lw,Aw=p(()=>{Oe=d(b(),1);Fp();Kh();aw=d(N(),1),cw=d(G(),1);Xh();o0();Iy();Sy();vy();Ly();Uy();zy();ew();LD=(0,Oe.lazy)(()=>Promise.resolve().then(()=>(sw(),iw))),FD=(0,cw.observer)(function({model:e}){let[t,{height:r}]=xA();return(0,Oe.useEffect)(()=>{e.setHeaderHeight(r||0)},[e,r]),Oe.default.createElement("div",{ref:t,style:{display:"flex"}},Oe.default.createElement(Ey,{model:e}),Oe.default.createElement(Ny,{model:e}),Oe.default.createElement(Jy,{model:e}),e.showZoomStar?Oe.default.createElement(Zy,{model:e}):null,Oe.default.createElement(Ky,{model:e}),Oe.default.createElement($h,{model:e}),Oe.default.createElement("div",{style:{paddingLeft:20,margin:"auto"}},Oe.default.createElement(My,{model:e})),Oe.default.createElement(n0,{model:e}),Oe.default.createElement(RD,null),Oe.default.createElement(by,{model:e}),Oe.default.createElement(aw.IconButton,{onClick:()=>{e.queueDialog(n=>[LD,{onClose:n}])}},Oe.default.createElement(Wh,null)))});lw=FD});var Yt,uw,PD,fw,dw=p(()=>{Yt=d(b(),1),uw=d(G(),1),PD=(0,uw.observer)(function({model:e}){let[t,r]=(0,Yt.useState)(),[n,o]=(0,Yt.useState)(!1),i=(0,Yt.useRef)(!1),{scrollX:s,msaAreaWidth:a,minimapHeight:c,colWidth:l,numColumns:A}=e,u=a/A/l,f=-s,m=f+a,g=f*u,h=m*u,E="rgba(66, 119, 127, 0.3)",C=Math.max(h-g,20);(0,Yt.useEffect)(()=>{function w(S){t!==void 0&&(i.current||(i.current=!0,window.requestAnimationFrame(()=>{e.setScrollX(t.scrollX-(S.clientX-t.clientX)/u),i.current=!1})))}function B(){r(void 0)}if(t!==void 0)return document.addEventListener("mousemove",w),document.addEventListener("mouseup",B),()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mousemove",B)}},[e,u,t]);let x=12,y=c-x;return Yt.default.createElement("div",{style:{position:"relative",height:c,width:"100%"}},Yt.default.createElement("div",{style:{height:x,boxSizing:"border-box",border:"1px solid #555"}}),Yt.default.createElement("div",{style:{position:"absolute",top:0,left:Math.max(0,g),background:n?"rgba(66,119,127,0.6)":E,cursor:"pointer",height:x,width:C,zIndex:100},onMouseOver:()=>{o(!0)},onMouseOut:()=>{o(!1)},onMouseDown:w=>{r({clientX:w.clientX,scrollX:e.scrollX})}}),Yt.default.createElement("svg",{height:y,style:{width:"100%"}},Yt.default.createElement("polygon",{fill:E,points:[[g+C,0],[g,0],[0,y],[a,y]].toString()})))}),fw=PD});function Df(){return Lc.default.createElement("div",{style:{position:"absolute",left:"50%",top:"50%"}},Lc.default.createElement(Fc.CircularProgress,null),Lc.default.createElement(Fc.Typography,null,"Loading..."))}var Lc,Fc,mw=p(()=>{Lc=d(b(),1),Fc=d(N(),1)});function Rc({model:e,offsetX:t,offsetY:r,ctx:n,highResScaleFactorOverride:o,blockSizeYOverride:i}){let{leaves:s,blockSize:a,rowHeight:c,highResScaleFactor:l,showDomains:A}=e;if(A){let u=o||l,f=i||a;n.resetTransform(),n.scale(u,u),n.translate(-t,c/2-r);let m=Math.max(0,Math.floor((r-c)/c)),g=Math.max(0,Math.ceil((r+f+c)/c)),h=s.slice(m,g);GD({model:e,ctx:n,visibleLeaves:h})}}function GD({model:e,ctx:t,visibleLeaves:r}){let{subFeatureRows:n,colWidth:o,rowHeight:i,fillPalette:s,strokePalette:a,tidyFilteredGatheredInterProAnnotations:c}=e;for(let l=0,A=r.length;l<A;l++){let u=r[l],{x:f,data:{name:m}}=u,g=f,h=c[m];if(h)for(let E=0,C=h.length;E<C;E++){let{start:x,end:y,accession:w}=h[E],B=e.seqPosToVisibleCol(m,x-1),S=e.seqPosToVisibleCol(m,y);if(B===void 0||S===void 0)continue;let M=B*o;t.fillStyle=s[w],t.strokeStyle=a[w];let v=n?4:i,_=g-i+(n?E*v:0),O=o*(S-B);t.fillRect(M,_,O,v),t.strokeRect(M,_,O,v)}}}var _f=p(()=>{});function Pc({model:e,offsetX:t,offsetY:r,contrastScheme:n,ctx:o,theme:i,highResScaleFactorOverride:s,blockSizeXOverride:a,blockSizeYOverride:c}){let{colWidth:l,blockSize:A,rowHeight:u,fontSize:f,highResScaleFactor:m,actuallyShowDomains:g,leaves:h,bgColor:E}=e,C=s||m,x=a||A,y=c||A;o.resetTransform(),o.scale(C,C),o.translate(-t,u/2-r),o.textAlign="center",o.font=o.font.replace(/\d+px/,`${E?"":"bold "}${f}px`);let w=Math.max(0,Math.floor((r-u)/u)),B=Math.max(0,Math.ceil((r+y+u)/u)),S=Math.max(0,Math.floor(t/l)),M=Math.max(0,Math.ceil((t+x)/l)),v=h.slice(w,B);g||OD({model:e,ctx:o,theme:i,offsetX:t,xStart:S,xEnd:M,visibleLeaves:v}),HD({model:e,ctx:o,offsetX:t,contrastScheme:n,xStart:S,xEnd:M,visibleLeaves:v}),JD({model:e,ctx:o,xStart:S,xEnd:M,visibleLeaves:v}),o.resetTransform()}function OD({model:e,offsetX:t,ctx:r,visibleLeaves:n,theme:o,xStart:i,xEnd:s}){let{bgColor:a,colorSchemeName:c,colorScheme:l,columns:A,colWidth:u,rowHeight:f,relativeTo:m}=e,g=m?A[m]?.slice(i,s):null,h=c==="clustalx_protein_dynamic",E=c==="percent_identity_dynamic",C=t-t%u;for(let x=0,y=n.length;x<y;x++){let w=n[x],{data:{name:B}}=w,S=w.x,M=A[B]?.slice(i,s);if(M)for(let v=0,_=M.length;v<_;v++){let O=M[v],D=g&&B!==m&&O===g[v],T=h?e.colClustalX[i+v][O]:E?(()=>{let V=e.colConsensus[i+v];return O===V.letter?V.color:void 0})():l[O.toUpperCase()];if(a||h||E){let V=D?o.palette.action.hover:T||o.palette.background.default;r.fillStyle=V,r.fillRect(v*u+C,S-f,u,f)}}}}function HD({model:e,offsetX:t,contrastScheme:r,ctx:n,visibleLeaves:o,xStart:i,xEnd:s}){let{bgColor:a,actuallyShowDomains:c,showMsaLetters:l,colorScheme:A,columns:u,colWidth:f,contrastLettering:m,rowHeight:g,relativeTo:h}=e,E=h?u[h]?.slice(i,s):null;if(l){let C=t-t%f,x=f/2,y=g/4;for(let w=0,B=o.length;w<B;w++){let S=o[w],{data:{name:M}}=S,v=S.x-y,_=u[M]?.slice(i,s);if(_)for(let O=0,D=_.length;O<D;O++){let T=_[O],J=E&&M!==h&&T===E[O]?".":T,Be=A[T.toUpperCase()],ht=m&&r[T.toUpperCase()]||"black";n.fillStyle=c?"black":a?ht:Be||"black",n.fillText(J,O*f+C+x,v)}}}}function JD({model:e,ctx:t,visibleLeaves:r,xStart:n,xEnd:o}){let{bgColor:i,hideGapsEffective:s}=e;s&&(t.lineWidth=1,t.strokeStyle="#f0f",gw({visibleLeaves:r,xStart:n,ctx:t,model:e,xEnd:o,offset:0}),t.strokeStyle=i?"#fff":"#000",gw({visibleLeaves:r,xStart:n,ctx:t,model:e,xEnd:o,offset:-1}))}function gw({model:e,ctx:t,visibleLeaves:r,xStart:n,xEnd:o,offset:i}){let{colWidth:a,rowHeight:c,insertionPositions:l}=e;for(let A of r){let{name:u}=A.data,f=l.get(u);if(f){let m=A.x;for(let{pos:g}of f)if(g>=n&&g<o){let h=g*a,E=m-c,C=m;t.beginPath(),t.moveTo(h+i,E+i);let x=E,y=!0;for(;x<C;){let w=Math.min(x+2,C),B=y?h+1:h-1;t.lineTo(B+i,w+i),x=w,y=!y}t.stroke()}}}}var kf=p(()=>{});var qt,pw,hw,Cw,Ew,UD,Iw,xw=p(()=>{qt=d(b(),1),pw=d(he(),1),hw=d(N(),1),Cw=d(jr(),1),Ew=d(G(),1);_f();kf();Bn();UD=(0,Ew.observer)(function({model:e,offsetX:t,offsetY:r}){let{colWidth:n,rowHeight:o,scrollY:i,scrollX:s,colorScheme:a,blockSize:c,mouseClickCol:l,mouseClickRow:A,highResScaleFactor:u}=e,f=(0,hw.useTheme)(),m=(0,qt.useMemo)(()=>no(a,f),[a,f]),g=(0,qt.useRef)(null);(0,qt.useEffect)(()=>{let x=g.current?.getContext("2d");if(x)return(0,Cw.autorun)(()=>{x.resetTransform(),x.clearRect(0,0,c*u,c*u);let{actuallyShowDomains:y}=e;y&&Rc({ctx:x,offsetX:t,offsetY:r,model:e}),Pc({ctx:x,theme:f,offsetX:t,offsetY:r,contrastScheme:m,model:e})})},[e,t,r,f,c,u,m]);let[h,E]=(0,qt.useState)(),{hoveredInsertion:C}=e;return qt.default.createElement(qt.default.Fragment,null,qt.default.createElement("canvas",{ref:g,onMouseMove:x=>{if(!g.current)return;E({x:x.clientX,y:x.clientY});let{left:y,top:w}=g.current.getBoundingClientRect(),B=x.clientX-y+t,S=x.clientY-w+r,M=Math.floor(B/n),v=Math.floor(S/o);M>=0&&M<e.numColumns&&v>=0&&v<e.numRows?e.setMousePos(M,v):e.setMousePos(void 0,void 0)},onClick:x=>{if(!g.current)return;let{left:y,top:w}=g.current.getBoundingClientRect(),B=x.clientX-y+t,S=x.clientY-w+r,M=Math.floor(B/n),v=Math.floor(S/o);M===l&&v===A?e.setMouseClickPos(void 0,void 0):e.setMouseClickPos(M,v)},onMouseLeave:()=>{e.setMousePos(),E(void 0)},width:c*u,height:c*u,style:{position:"absolute",top:i+r,left:s+t,width:c,height:c}}),C&&h?qt.default.createElement(pw.BaseTooltip,{clientPoint:{x:h.x,y:h.y+15}},"Insertion (",C.letters.length,e.sequenceType==="amino"?"aa":"bp","):"," ",C.letters.length>20?`${C.letters.slice(0,20)}...`:C.letters):null)}),Iw=UD});var gt,yw,YD,ww,Bw=p(()=>{gt=d(b(),1),yw=d(G(),1);mw();xw();YD=(0,yw.observer)(function({model:e}){let{MSA:t,verticalScrollbarWidth:r,msaFilehandle:n,height:o,msaAreaWidth:i,blocks2d:s}=e,a=(0,gt.useRef)(null),c=(0,gt.useRef)(!1),l=(0,gt.useRef)(0),A=(0,gt.useRef)(0),u=(0,gt.useRef)(0),f=(0,gt.useRef)(0),[m,g]=(0,gt.useState)(!1);return(0,gt.useEffect)(()=>{let h=a.current;if(!h)return;function E(C){l.current+=C.deltaX,A.current+=C.deltaY,c.current||(c.current=!0,requestAnimationFrame(()=>{e.doScrollX(-l.current),e.doScrollY(-A.current),l.current=0,A.current=0,c.current=!1})),C.preventDefault(),C.stopPropagation()}return h.addEventListener("wheel",E,{passive:!1}),()=>{h.removeEventListener("wheel",E)}},[e]),(0,gt.useEffect)(()=>{let h=()=>{};function E(x){x.preventDefault();let y=x.clientX,w=x.clientY,B=y-u.current,S=w-f.current;(B||S)&&(c.current||(c.current=!0,window.requestAnimationFrame(()=>{e.doScrollX(B),e.doScrollY(S),c.current=!1,u.current=x.clientX,f.current=x.clientY})))}function C(){u.current=0,m&&g(!1)}return m&&(window.addEventListener("mousemove",E,!0),window.addEventListener("mouseup",C,!0),h=()=>{window.removeEventListener("mousemove",E,!0),window.removeEventListener("mouseup",C,!0)}),h},[e,m]),gt.default.createElement("div",{ref:a,onMouseDown:h=>{let E=h.target;E.draggable||E.dataset.resizer||h.button===0&&(u.current=h.clientX,f.current=h.clientY,g(!0))},onMouseUp:h=>{h.preventDefault(),g(!1)},onMouseLeave:h=>{h.preventDefault()},style:{position:"relative",height:o,width:i-r,overflow:"hidden"}},!t&&!n?null:t?s.map(([h,E])=>gt.default.createElement(Iw,{key:`${h}_${E}`,model:e,offsetX:h,offsetY:E})):gt.default.createElement(Df,null))}),ww=YD});function Sw({ctx:e,model:t}){let{mouseCol:r,colWidth:n,msaAreaWidth:o,verticalScrollbarWidth:i,height:s,rowHeight:a,scrollX:c,scrollY:l,mouseRow:A,mouseCol2:u,mouseClickRow:f,mouseClickCol:m,relativeTo:g,rowNamesSet:h,hoveredTreeNode:E,highlightedColumns:C}=t,x=o-i;if(e.resetTransform(),e.clearRect(0,0,x,s),g){let y=h.get(g);y!==void 0&&(e.fillStyle=qD,e.fillRect(0,y*a+l,x,a))}if(E){e.fillStyle=jD;for(let y of E.descendantNames){let w=h.get(y);w!==void 0&&e.fillRect(0,w*a+l,x,a)}}if(C?.length){e.fillStyle=Gc;for(let y of C)e.fillRect(y*n+c,0,n,s)}r!==void 0&&(e.fillStyle=bw,e.fillRect(r*n+c,0,n,s)),A!==void 0&&(e.fillStyle=bw,e.fillRect(0,A*a+l,x,a)),m!==void 0&&(e.fillStyle=Gc,e.fillRect(m*n+c,0,n,s)),f!==void 0&&(e.fillStyle=Gc,e.fillRect(0,f*a+l,x,a)),u!==void 0&&(e.fillStyle=Gc,e.fillRect(u*n+c,0,n,s))}var bw,Gc,qD,jD,Qw=p(()=>{bw="rgba(0,0,0,0.15)",Gc="rgba(128,128,0,0.2)",qD="rgba(0,128,255,0.3)",jD="rgba(255,165,0,0.15)"});var li,Mw,vw,Tw,VD,Dw,_w=p(()=>{li=d(b(),1),Mw=d(Lt(),1),vw=d(jr(),1),Tw=d(G(),1);Qw();VD=(0,Tw.observer)(function({model:e}){let t=(0,li.useRef)(null),{height:r,msaAreaWidth:n,verticalScrollbarWidth:o}=e,i=n-o;return(0,li.useEffect)(()=>{let s=t.current?.getContext("2d");return s?(0,vw.autorun)(()=>{(0,Mw.isAlive)(e)&&Sw({ctx:s,model:e})}):void 0},[e]),li.default.createElement("canvas",{ref:t,id:"mouseover",width:i,height:r,style:{position:"absolute",top:0,left:0,width:i,height:r,zIndex:1e3,pointerEvents:"none"}})}),Dw=VD});var Oc,kw,WD,Nw,Lw=p(()=>{Oc=d(b(),1),kw=d(G(),1);Bw();_w();WD=(0,kw.observer)(function({model:e}){return Oc.default.createElement("div",{style:{position:"relative"}},Oc.default.createElement(ww,{model:e}),Oc.default.createElement(Dw,{model:e}))}),Nw=WD});var As,Fw=p(()=>{As=class{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(t,r){let n=this.length++;for(;n>0;){let o=n-1>>1,i=this.values[o];if(r>=i)break;this.ids[n]=this.ids[o],this.values[n]=i,n=o}this.ids[n]=t,this.values[n]=r}pop(){if(this.length===0)return;let t=this.ids,r=this.values,n=t[0],o=--this.length;if(o>0){let i=t[o],s=r[o],a=0,c=o>>1;for(;a<c;){let l=(a<<1)+1,A=l+1,u=l+(+(A<o)&+(r[A]<r[l]));if(r[u]>=s)break;t[a]=t[u],r[a]=r[u],a=u}t[a]=i,r[a]=s}return n}peek(){return this.length>0?this.ids[0]:void 0}peekValue(){return this.length>0?this.values[0]:void 0}shrink(){this.ids.length=this.values.length=this.length}}});function Pw(e,t){let r=0,n=t.length-1;for(;r<n;){let o=r+n>>1;t[o]>e?n=o:r=o+1}return t[r]}function Lf(e,t,r,n,o,i){if(Math.floor(n/i)>=Math.floor(o/i))return;let s=e[n],a=e[n+o>>1],c=e[o],l=c,A=Math.max(s,a);c>A?l=A:A===s?l=Math.max(a,c):A===a&&(l=Math.max(s,c));let u=n-1,f=o+1;for(;;){do u++;while(e[u]<l);do f--;while(e[f]>l);if(u>=f)break;KD(e,t,r,u,f)}Lf(e,t,r,n,f,i),Lf(e,t,r,f+1,o,i)}function KD(e,t,r,n,o){let i=e[n];e[n]=e[o],e[o]=i;let s=4*n,a=4*o,c=t[s],l=t[s+1],A=t[s+2],u=t[s+3];t[s]=t[a],t[s+1]=t[a+1],t[s+2]=t[a+2],t[s+3]=t[a+3],t[a]=c,t[a+1]=l,t[a+2]=A,t[a+3]=u;let f=r[n];r[n]=r[o],r[o]=f}function zD(e,t){let r=e^t,n=65535^r,o=65535^(e|t),i=e&(t^65535),s=r|n>>1,a=r>>1^r,c=o>>1^n&i>>1^o,l=r&o>>1^i>>1^i;r=s,n=a,o=c,i=l,s=r&r>>2^n&n>>2,a=r&n>>2^n&(r^n)>>2,c^=r&o>>2^n&i>>2,l^=n&o>>2^(r^n)&i>>2,r=s,n=a,o=c,i=l,s=r&r>>4^n&n>>4,a=r&n>>4^n&(r^n)>>4,c^=r&o>>4^n&i>>4,l^=n&o>>4^(r^n)&i>>4,r=s,n=a,o=c,i=l,c^=r&o>>8^n&i>>8,l^=n&o>>8^(r^n)&i>>8,r=c^c>>1,n=l^l>>1;let A=e^t,u=n|65535^(A|r);return A=(A|A<<8)&16711935,A=(A|A<<4)&252645135,A=(A|A<<2)&858993459,A=(A|A<<1)&1431655765,u=(u|u<<8)&16711935,u=(u|u<<4)&252645135,u=(u|u<<2)&858993459,u=(u|u<<1)&1431655765,(u<<1|A)>>>0}var Rw,Nf,us,Gw=p(()=>{Fw();Rw=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Nf=3,us=class e{static from(t,r=0){if(r%8!==0)throw new Error("byteOffset must be 8-byte aligned.");if(!t||t.byteLength===void 0||t.buffer)throw new Error("Data must be an instance of ArrayBuffer or SharedArrayBuffer.");let[n,o]=new Uint8Array(t,r+0,2);if(n!==251)throw new Error("Data does not appear to be in a Flatbush format.");let i=o>>4;if(i!==Nf)throw new Error(`Got v${i} data when expected v${Nf}.`);let s=Rw[o&15];if(!s)throw new Error("Unrecognized array type.");let[a]=new Uint16Array(t,r+2,1),[c]=new Uint32Array(t,r+4,1);return new e(c,a,s,void 0,t,r)}constructor(t,r=16,n=Float64Array,o=ArrayBuffer,i,s=0){if(t===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(t)||t<=0)throw new Error(`Unexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+r,2),65535),this.byteOffset=s;let a=t,c=a;this._levelBounds=[a*4];do a=Math.ceil(a/this.nodeSize),c+=a,this._levelBounds.push(c*4);while(a!==1);this.ArrayType=n,this.IndexArrayType=c<16384?Uint16Array:Uint32Array;let l=Rw.indexOf(n),A=c*4*n.BYTES_PER_ELEMENT;if(l<0)throw new Error(`Unexpected typed array class: ${n}.`);if(i)this.data=i,this._boxes=new n(i,s+8,c*4),this._indices=new this.IndexArrayType(i,s+8+A,c),this._pos=c*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1];else{let u=this.data=new o(8+A+c*this.IndexArrayType.BYTES_PER_ELEMENT);this._boxes=new n(u,8,c*4),this._indices=new this.IndexArrayType(u,8+A,c),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(u,0,2).set([251,(Nf<<4)+l]),new Uint16Array(u,2,1)[0]=r,new Uint32Array(u,4,1)[0]=t}this._queue=new As}add(t,r,n=t,o=r){let i=this._pos>>2,s=this._boxes;return this._indices[i]=i,s[this._pos++]=t,s[this._pos++]=r,s[this._pos++]=n,s[this._pos++]=o,t<this.minX&&(this.minX=t),r<this.minY&&(this.minY=r),n>this.maxX&&(this.maxX=n),o>this.maxY&&(this.maxY=o),i}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);let t=this._boxes;if(this.numItems<=this.nodeSize){t[this._pos++]=this.minX,t[this._pos++]=this.minY,t[this._pos++]=this.maxX,t[this._pos++]=this.maxY;return}let r=this.maxX-this.minX||1,n=this.maxY-this.minY||1,o=new Uint32Array(this.numItems),i=65535;for(let s=0,a=0;s<this.numItems;s++){let c=t[a++],l=t[a++],A=t[a++],u=t[a++],f=Math.floor(i*((c+A)/2-this.minX)/r),m=Math.floor(i*((l+u)/2-this.minY)/n);o[s]=zD(f,m)}Lf(o,t,this._indices,0,this.numItems-1,this.nodeSize);for(let s=0,a=0;s<this._levelBounds.length-1;s++){let c=this._levelBounds[s];for(;a<c;){let l=a,A=t[a++],u=t[a++],f=t[a++],m=t[a++];for(let g=1;g<this.nodeSize&&a<c;g++)A=Math.min(A,t[a++]),u=Math.min(u,t[a++]),f=Math.max(f,t[a++]),m=Math.max(m,t[a++]);this._indices[this._pos>>2]=l,t[this._pos++]=A,t[this._pos++]=u,t[this._pos++]=f,t[this._pos++]=m}}}search(t,r,n,o,i){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let s=this._boxes.length-4,a=[],c=[];for(;s!==void 0;){let l=Math.min(s+this.nodeSize*4,Pw(s,this._levelBounds));for(let A=s;A<l;A+=4){let u=this._boxes[A];if(n<u)continue;let f=this._boxes[A+1];if(o<f)continue;let m=this._boxes[A+2];if(t>m)continue;let g=this._boxes[A+3];if(r>g)continue;let h=this._indices[A>>2]|0;s>=this.numItems*4?a.push(h):(i===void 0||i(h,u,f,m,g))&&c.push(h)}s=a.pop()}return c}neighbors(t,r,n=1/0,o=1/0,i){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let s=this._boxes.length-4,a=this._queue,c=[],l=o*o;e:for(;s!==void 0;){let A=Math.min(s+this.nodeSize*4,Pw(s,this._levelBounds));for(let u=s;u<A;u+=4){let f=this._indices[u>>2]|0,m=this._boxes[u],g=this._boxes[u+1],h=this._boxes[u+2],E=this._boxes[u+3],C=t<m?m-t:t>h?t-h:0,x=r<g?g-r:r>E?r-E:0,y=C*C+x*x;y>l||(s>=this.numItems*4?a.push(f<<1,y):(i===void 0||i(f))&&a.push((f<<1)+1,y))}for(;a.length&&a.peek()&1;)if(a.peekValue()>l||(c.push(a.pop()>>1),c.length===n))break e;s=a.length?a.pop()>>1:void 0}return a.clear(),c}}});var fs,Ai,Ow,$D,Hw,Jw=p(()=>{fs=d(b(),1),Ai=d(N(),1),Ow=d(G(),1),$D=(0,Ow.observer)(function({node:e,model:t,onClose:r}){return fs.default.createElement(Ai.Menu,{anchorReference:"anchorPosition",anchorPosition:{left:e.x,top:e.y},transitionDuration:0,keepMounted:!0,open:!!e,onClose:r},fs.default.createElement(Ai.MenuItem,{dense:!0,disabled:!0},e.name),fs.default.createElement(Ai.MenuItem,{dense:!0,onClick:()=>{t.toggleCollapsed(e.id),r()}},t.collapsed.includes(e.id)?"Expand this node":"Collapse this node"),fs.default.createElement(Ai.MenuItem,{dense:!0,onClick:()=>{t.showOnly===e.id?t.setShowOnly(void 0):t.setShowOnly(e.id),r()}},t.showOnly===e.id?"Disable show only this node":"Show only this node"))}),Hw=$D});var jw={};rt(jw,{default:()=>ZD});var Nr,Uw,Yw,qw,XD,ZD,Vw=p(()=>{Nr=d(b(),1);hc();rf();Uw=d(he(),1),Yw=d(N(),1),qw=d(G(),1);nf();XD=(0,qw.observer)(function({info:e,model:t,nodeName:r,onClose:n}){let{treeMetadata:o,rows:i}=t,s=o[r],a=i.find(c=>c[0]===r);return Nr.default.createElement(Uw.Dialog,{onClose:()=>{n()},open:!0,title:"Tree node info",maxWidth:"xl"},Nr.default.createElement(Yw.DialogContent,null,Nr.default.createElement(ro,{title:"Attributes"},Nr.default.createElement(_r,{attributes:{nodeName:r,...e}})),Nr.default.createElement(ro,{title:"Sequence"},a?Nr.default.createElement(is,{str:[a]}):Nr.default.createElement("div",null,"Sequence not found")),s?Nr.default.createElement(ro,{title:"Extra metadata"},Nr.default.createElement(_r,{attributes:s})):null))}),ZD=XD});var tn,bn,Ww,e_,t_,Kw,zw=p(()=>{tn=d(b(),1),bn=d(N(),1),Ww=d(G(),1),e_=(0,tn.lazy)(()=>Promise.resolve().then(()=>(Vw(),jw))),t_=(0,Ww.observer)(function({node:e,onClose:t,model:r}){let{collapsed:n,collapsedLeaves:o}=r,{name:i}=e;return tn.default.createElement(bn.Menu,{anchorReference:"anchorPosition",anchorPosition:{top:e.y,left:e.x},transitionDuration:0,keepMounted:!0,open:!!e,onClose:t},tn.default.createElement(bn.MenuItem,{dense:!0,disabled:!0},i),tn.default.createElement(bn.MenuItem,{dense:!0,onClick:()=>{r.queueDialog(s=>[e_,{info:r.getRowData(i),model:r,nodeName:i,onClose:s}]),t()}},"More info..."),tn.default.createElement(bn.MenuItem,{dense:!0,onClick:()=>{n.includes(e.id)?r.toggleCollapsed(e.id):e.id.endsWith("-leafnode")?r.toggleCollapsedLeaf(e.id):r.toggleCollapsedLeaf(`${e.id}-leafnode`),t()}},n.includes(e.id)||o.includes(e.id)?"Show node":"Hide node"),tn.default.createElement(bn.MenuItem,{dense:!0,onClick:()=>{r.drawRelativeTo(e.name),t()}},"Indicate differences from this row"),r.relativeTo?tn.default.createElement(bn.MenuItem,{dense:!0,onClick:()=>{r.drawRelativeTo(void 0),t()}},"Clear reference row"):null)}),Kw=t_});function r_({offsetY:e,ctx:t,model:r,theme:n,blockSizeYOverride:o}){let{hierarchy:i,showBranchLenEffective:s,blockSize:a}=r,c=o||a;t.strokeStyle=n.palette.text.primary;for(let l of i.links()){let{source:A,target:u}=l;if(u.height===0&&!s)continue;let f=A.x,m=u.x,g=s?u.len:u.y,h=s?A.len:A.y;if(g===void 0||h===void 0)continue;let E=Math.min(f,m),C=Math.max(f,m);e+c>=E&&C>=e&&(t.beginPath(),t.moveTo(h,f),t.lineTo(h,m),t.lineTo(g,m),t.stroke())}}function n_({ctx:e,clickMap:t,offsetY:r,model:n,blockSizeYOverride:o}){let{hierarchy:i,showBranchLenEffective:s,collapsed:a,blockSize:c,marginLeft:l}=n,A=o||c;for(let u of i.descendants()){let f=s?u.len:u.y;if(f===void 0)continue;let{data:m}=u,g=u.x,{id:h,name:E}=m;u.height>1&&g>r-5&&g<r+A+5&&(e.strokeStyle="black",e.fillStyle=a.includes(h)?"black":"white",e.beginPath(),e.arc(f,g,2.5,0,2*Math.PI),e.fill(),e.stroke(),t?.insert({minX:f-2.5+l,maxX:f-2.5+5+l,minY:g-2.5,maxY:g-2.5+5,branch:!0,id:h,name:E}))}}function o_({theme:e,model:t,offsetY:r,ctx:n,clickMap:o,blockSizeYOverride:i}){let{fontSize:s,showBranchLenEffective:a,treeMetadata:c,hierarchy:l,collapsed:A,collapsedLeaves:u,blockSize:f,labelsAlignRight:m,drawTree:g,treeAreaWidth:h,treeWidth:E,treeAreaWidthMinusMargin:C,marginLeft:x,leaves:y,noTree:w}=t,B=i||f,S=n.measureText("M").width;m?(n.textAlign="right",n.setLineDash([1,3])):n.textAlign="start";for(let M of y){let{data:{name:v,id:_}}=M,O=M.len,D=M.x,T=M.y,V=c[v]?.genome||v;if(D>r-5&&D<r+B+5){let J=D+s/4,Be=0;w||(Be=(a?O:T)||0,!a&&!A.includes(_)&&!u.includes(_)&&(Be-=E/l.height));let{width:ht}=n.measureText(V);if(n.fillStyle=e.palette.text.primary,m){let an=C-2;g&&!w&&(n.moveTo(Be+2.5+2,D),n.lineTo(an-2-ht,D),n.stroke()),n.fillText(V,an,J),o?.insert({minX:h-ht,maxX:h,minY:J-S,maxY:J,name:v,id:_})}else{let Ar=w?2:Be+5;n.fillText(V,Ar,J),o?.insert({minX:Ar+x,maxX:Ar+ht+x,minY:J-S,maxY:J,name:v,id:_})}}}n.setLineDash([])}function Hc({model:e,clickMap:t,ctx:r,offsetY:n,theme:o,highResScaleFactorOverride:i,blockSizeYOverride:s}){t?.clear();let{noTree:a,drawTree:c,drawNodeBubbles:l,highResScaleFactor:A,fontSize:u,showTreeText:f,marginLeft:m,nref:g,rowHeight:h}=e;r.resetTransform();let E=g<0?Number.NEGATIVE_INFINITY:i||A;r.scale(E,E),r.translate(m,-n);let C=r.font;r.font=C.replace(/\d+px/,`${u}px`),!a&&c&&(r_({ctx:r,offsetY:n,model:e,theme:o,blockSizeYOverride:s}),l&&n_({ctx:r,offsetY:n,clickMap:t,model:e,blockSizeYOverride:s})),f&&o_({ctx:r,offsetY:n,model:e,clickMap:t,theme:o,blockSizeYOverride:s}),t?.finish()}var Jc=p(()=>{});var He,$w,Xw,Zw,Ff,i_,eB,tB=p(()=>{He=d(b(),1),$w=d(N(),1);Gw();Xw=d(jr(),1),Zw=d(G(),1);Jw();zw();Jc();Ff=class{flatbush=null;entries=[];clear(){this.flatbush=null,this.entries=[]}insert(t){this.entries.push(t)}finish(){if(this.entries.length===0){this.flatbush=null;return}else{this.flatbush=new us(this.entries.length);for(let t of this.entries)this.flatbush.add(t.minX,t.minY,t.maxX,t.maxY);this.flatbush.finish()}}search(t){return this.flatbush?.search(t.minX,t.minY,t.maxX,t.maxY).map(r=>this.entries[r])??[]}},i_=(0,Zw.observer)(function({model:e,offsetY:t}){let r=(0,$w.useTheme)(),n=(0,He.useRef)(null),o=(0,He.useRef)(new Ff),i=(0,He.useRef)(null),[s,a]=(0,He.useState)(),[c,l]=(0,He.useState)(),[A,u]=(0,He.useState)(),{scrollY:f,treeAreaWidth:m,blockSize:g,highResScaleFactor:h}=e,E=m+600,C=g,x=E*h,y=C*h,w=(0,He.useCallback)(v=>{e.incrementRef(),n.current=v},[e,C,E]);(0,He.useEffect)(()=>{let v=n.current?.getContext("2d");if(v)return(0,Xw.autorun)(()=>{v.resetTransform(),v.clearRect(0,0,(m+600)*h,g*h),Hc({ctx:v,model:e,offsetY:t,clickMap:o.current,theme:r})})},[e,g,h,m,t,r]),(0,He.useEffect)(()=>{let v=i.current?.getContext("2d");if(v&&(v.resetTransform(),v.clearRect(0,0,m+600,g),v.translate(0,-t),A)){let{minX:_,maxX:O,minY:D,maxY:T}=A;v.fillStyle="rgba(0,0,0,0.1)",v.fillRect(_,D,O-_,T-D)}},[A,t,g,m]);function B(v){let _=v.nativeEvent.offsetX,O=v.nativeEvent.offsetY,[D]=o.current.search({minX:_,maxX:_+1,minY:O+t,maxY:O+1+t});return D?.branch?{...D,x:v.clientX,y:v.clientY}:void 0}function S(v){let _=v.nativeEvent.offsetX,O=v.nativeEvent.offsetY,[D]=o.current.search({minX:_,maxX:_+1,minY:O+t,maxY:O+1+t});return D&&!D.branch?{...D,x:v.clientX,y:v.clientY}:void 0}let M={width:E,height:C,top:f+t,left:0,position:"absolute"};return He.default.createElement(He.default.Fragment,null,s?.id?He.default.createElement(Hw,{node:s,model:e,onClose:()=>{a(void 0)}}):null,c?.id?He.default.createElement(Kw,{node:c,model:e,onClose:()=>{l(void 0)}}):null,He.default.createElement("canvas",{width:x,height:y,style:M,onMouseMove:v=>{if(!n.current)return;let _=S(v),O=B(v),D=_||O;if(n.current.style.cursor=D?"pointer":"default",u(_),D){if(e.setHoveredTreeNode(D.id),_?.name){let T=e.rowNamesSet.get(_.name);T!==void 0&&e.setMousePos(void 0,T)}}else e.setHoveredTreeNode(void 0),e.setMousePos(void 0,void 0)},onClick:v=>{let{clientX:_,clientY:O}=v,D=B(v);D?.id&&a({x:_,y:O,id:D.id,name:D.name});let T=S(v);T?.id&&l({...T,x:_,y:O})},onMouseLeave:()=>{u(void 0),e.setHoveredTreeNode(void 0),e.setMousePos(void 0,void 0)},ref:w}),He.default.createElement("canvas",{style:{...M,pointerEvents:"none",zIndex:100},width:E,height:C,ref:i}))}),eB=i_});var pt,rB,nB,oB,s_,iB,sB=p(()=>{pt=d(b(),1),rB=d(Lt(),1),nB=d(jr(),1),oB=d(G(),1);tB();Jc();s_=(0,oB.observer)(function({model:e}){let t=(0,pt.useRef)(null),r=(0,pt.useRef)(null),n=(0,pt.useRef)(!1),o=(0,pt.useRef)(0),i=(0,pt.useRef)(0),{treeWidth:s,height:a,blocksY:c,treeAreaWidth:l,scrollY:A}=e,[u,f]=(0,pt.useState)(!1);(0,pt.useEffect)(()=>{let g=t.current;if(!g)return;function h(E){o.current+=E.deltaY,n.current||(n.current=!0,requestAnimationFrame(()=>{e.doScrollY(-o.current),o.current=0,n.current=!1})),E.preventDefault(),E.stopPropagation()}return g.addEventListener("wheel",h),()=>{g.removeEventListener("wheel",h)}},[e]),(0,pt.useEffect)(()=>{let g=()=>{};function h(C){C.preventDefault();let y=C.clientY-i.current;y&&(n.current||(n.current=!0,window.requestAnimationFrame(()=>{e.doScrollY(y),n.current=!1,i.current=C.clientY})))}function E(){i.current=0,u&&f(!1)}return u&&(window.addEventListener("mousemove",h,!0),window.addEventListener("mouseup",E,!0),g=()=>{window.removeEventListener("mousemove",h,!0),window.removeEventListener("mouseup",E,!0)}),g},[e,u]),(0,pt.useEffect)(()=>{let g=r.current?.getContext("2d");return g?(0,nB.autorun)(()=>{if((0,rB.isAlive)(e)){g.resetTransform(),g.clearRect(0,0,l,a);let{relativeTo:h,leaves:E,rowHeight:C,hoveredTreeNode:x}=e;if(h){let w=E.find(B=>B.data.name===h);if(w){let B=w.x+A;g.fillStyle="rgba(0,128,255,0.3)",g.fillRect(0,B-C/2,l,C)}}if(x){g.fillStyle="rgba(255,165,0,0.2)";for(let w of x.descendantNames){let B=E.find(S=>S.data.name===w);if(B){let S=B.x+A;g.fillRect(0,S-C/2,l,C)}}}let{mouseOverRowName:y}=e;if(y&&y!==h&&!x?.descendantNames.includes(y)){let w=E.find(B=>B.data.name===y);if(w){let B=w.x+A;g.fillStyle="rgba(255,165,0,0.2)",g.fillRect(0,B-C/2,l,C)}}}}):void 0},[e,l,a,A]);function m(g){let h=g.target;h.draggable||h.dataset.resizer||g.button===0&&(i.current=g.clientY,f(!0))}return pt.default.createElement("div",{ref:t,onMouseDown:m,onMouseUp:g=>{g.preventDefault(),f(!1)},onMouseLeave:g=>{g.preventDefault()},style:{height:a,position:"relative",width:s+600}},c.map(g=>pt.default.createElement(eB,{key:g,model:e,offsetY:g})),pt.default.createElement("canvas",{ref:r,width:l,height:a,style:{position:"absolute",top:0,left:0,width:l,height:a,zIndex:1e3,pointerEvents:"none"}}))}),iB=s_});var Rf,aB,a_,cB,lB=p(()=>{Rf=d(b(),1),aB=d(G(),1);sB();a_=(0,aB.observer)(function({model:e}){let{treeAreaWidth:t}=e;return Rf.default.createElement("div",{style:{overflow:"hidden",flexShrink:0,width:t}},Rf.default.createElement(iB,{model:e}))}),cB=a_});var AB,uB,c_,fB,dB=p(()=>{AB=d(b(),1),uB=d(G(),1),c_=(0,uB.observer)(({model:e})=>{let{treeAreaWidth:t}=e;return AB.default.createElement("div",{style:{flexShrink:0,width:t}})}),fB=c_});var re,io,l_,A_,u_,f_,d_,m_,mB,gB=p(()=>{re=d(b(),1),io=d(G(),1);Dh();Jh();jh();Aw();dw();Lw();lB();dB();l_=(0,io.observer)(function({model:e}){let{showHorizontalScrollbar:t}=e;return re.default.createElement("div",{style:{display:"flex"}},re.default.createElement(fB,{model:e}),t?re.default.createElement(fw,{model:e}):null)}),A_=(0,io.observer)(function({model:e}){let{mouseCol:t,mouseClickCol:r,colWidth:n,scrollX:o,treeAreaWidth:i,resizeHandleWidth:s,totalTrackAreaHeight:a,msaAreaWidth:c,verticalScrollbarWidth:l}=e,A=i+s,u=c-l;return re.default.createElement("div",{style:{position:"absolute",left:A,top:0,width:u,height:a,overflow:"hidden",pointerEvents:"none"}},t!==void 0?re.default.createElement("div",{style:{position:"absolute",left:t*n+o,top:0,width:n,height:a,backgroundColor:"rgba(0,0,0,0.15)",zIndex:100}}):null,r!==void 0?re.default.createElement("div",{style:{position:"absolute",left:r*n+o,top:0,width:n,height:a,backgroundColor:"rgba(128,128,0,0.2)",zIndex:100}}):null)}),u_=(0,io.observer)(function({model:e}){let{turnedOnTracks:t}=e;return t.length===0?null:re.default.createElement("div",{style:{position:"relative"}},re.default.createElement(A_,{model:e}),t.map(r=>re.default.createElement(Hh,{key:r.model.id,model:e,track:r})))}),f_=(0,io.observer)(function({model:e}){let{showVerticalScrollbar:t}=e;return re.default.createElement("div",{style:{display:"flex"}},re.default.createElement(cB,{model:e}),re.default.createElement(vh,{model:e}),re.default.createElement(Nw,{model:e}),t?re.default.createElement(qh,{model:e}):null)}),d_=(0,io.observer)(function({model:e}){return re.default.createElement("div",{style:{position:"relative"}},re.default.createElement(l_,{model:e}),re.default.createElement(u_,{model:e}),re.default.createElement(f_,{model:e}))}),m_=(0,io.observer)(function({model:e}){let{height:t,viewInitialized:r,DialogComponent:n,DialogProps:o}=e;return re.default.createElement("div",null,r?re.default.createElement(re.default.Fragment,null,re.default.createElement("div",{style:{height:t,overflow:"hidden"}},re.default.createElement(lw,{model:e}),re.default.createElement(d_,{model:e})),re.default.createElement(Th,{model:e}),n?re.default.createElement(re.Suspense,{fallback:null},re.default.createElement(n,{...o})):null):null)}),mB=m_});var pB,hB,CB,EB=p(()=>{pB=`CLUSTAL O(1.2.3) multiple sequence alignment
UniProt/Swiss-Prot|P26898|IL2RA_SHEEP      MEPSLLMWRFFVFIVVPGCVTEACHDDPPSLRNA----------MFKVLRYE----VGTM
UniProt/Swiss-Prot|P01590|IL2RA_MOUSE      MEPRLLMLGFLSLTIVPSCRAELCLYDPPEVPNA----------TFKALSYK----NGTI
UniProt/Swiss-Prot|P41690|IL2RA_FELCA      MEPSLLLWGILTFVVVHGHVTELCDENPPDIQHA----------TFKALTYK----TGTM
UniProt/Swiss-Prot|P01589|IL2RA_HUMAN      MDSYLLMWGLLTFIMVPGCQAELCDDDPPEIPHA----------TFKAMAYK----EGTM
UniProt/Swiss-Prot|Q5MNY4|IL2RA_MACMU      MDPYLLMWGLLTFITVPGCQAELCDDDPPKITHA----------TFKAVAYK----EGTM
UniProt/Swiss-Prot|Q95118|IL2RG_BOVIN      -----------------------------------LLMWGLLT-----------------
UniProt/Swiss-Prot|P40321|IL2RG_CANFA      MLKPPLPLRSLLFLQLSLLGVGLNSTVPMPNGNEDIT------PDFFLTATPSETLSVSS
UniProt/Swiss-Prot|P26896|IL2RB_RAT        MATVDLSWRLPLYILLLLLATT--------------------------------WVSAAV
UniProt/Swiss-Prot|Q8BZM1|GLMN_MOUSE       PLPLRSLLFLQLPLLGVGLNP------------------PLPLRSLLFLQLPLLGVGLNP
UniProt/Swiss-Prot|P36835|IL2_CAPHI        -----------LLGVGLNPKFLTP------------------------------------
UniProt/Swiss-Prot|Q7JFM4|IL2_AOTVO        MLKPPLPLRSLLFLQLPLLGVGLNPKFLTPSGNEDIGGKPGTGGDFFLTSTPAGTLDVST
UniProt/Swiss-Prot|Q29416|IL2_CANFA        --------------LFLQLSLLG-------------------------------------
`,hB=`CLUSTAL O(1.2.4) multiple sequence alignment


sp|P69905|HBA_HUMAN       MVLSPADKTNVKAAWGKVGAHAGEYGAEALERMFLSFPTTKTYFPHFDLSHGSAQVKGHG	60
sp|P01942|HBA_MOUSE       MVLSGEDKSNIKAAWGKIGGHGAEYGAEALERMFASFPTTKTYFPHFDVSHGSAQVKGHG	60
sp|P13786|HBAZ_CAPHI      MSLTRTERTIILSLWSKISTQADVIGTETLERLFSCYPQAKTYFPHFDLHSGSAQLRAHG	60
                          * *:  ::: : : *.*:. :.   *:*:***:* .:* :********:  ****::.**

sp|P69905|HBA_HUMAN       KKVADALTNAVAHVDDMPNALSALSDLHAHKLRVDPVNFKLLSHCLLVTLAAHLPAEFTP	120
sp|P01942|HBA_MOUSE       KKVADALASAAGHLDDLPGALSALSDLHAHKLRVDPVNFKLLSHCLLVTLASHHPADFTP	120
sp|P13786|HBAZ_CAPHI      SKVVAAVGDAVKSIDNVTSALSKLSELHAYVLRVDPVNFKFLSHCLLVTLASHFPADFTA	120
                          .**. *: .*.  :*:: .*** **:***: *********:**********:* **:**

sp|P69905|HBA_HUMAN       AVHASLDKFLASVSTVLTSKYR	142
sp|P01942|HBA_MOUSE       AVHASLDKFLASVSTVLTSKYR	142
sp|P13786|HBAZ_CAPHI      DAHAAWDKFLSIVSGVLTEKYR	142
                           .**: ****: ** ***.***`,CB="(((UniProt/Swiss-Prot|P26898|IL2RA_SHEEP:0.24036,(UniProt/Swiss-Prot|P41690|IL2RA_FELCA:0.17737,(UniProt/Swiss-Prot|P01589|IL2RA_HUMAN:0.03906,UniProt/Swiss-Prot|Q5MNY4|IL2RA_MACMU:0.03787):0.13033):0.04964):0.02189,UniProt/Swiss-Prot|P01590|IL2RA_MOUSE:0.23072):0.06814,(((UniProt/Swiss-Prot|Q95118|IL2RG_BOVIN:0.09600,UniProt/Swiss-Prot|P40321|IL2RG_CANFA:0.09845):0.25333,UniProt/Swiss-Prot|Q29416|IL2_CANFA:-0.35055):0.10231,(UniProt/Swiss-Prot|P26896|IL2RB_RAT:0.33631,UniProt/Swiss-Prot|Q7JFM4|IL2_AOTVO:-0.33631):0.10166):0.01607,(UniProt/Swiss-Prot|Q8BZM1|GLMN_MOUSE:0.32378,UniProt/Swiss-Prot|P36835|IL2_CAPHI:-0.32378):0.09999)"});async function Uc(e,t,r,n){e.setError(void 0),t&&e.setMSAFilehandle(t),r&&e.setTreeFilehandle(r),n&&e.setGFFFilehandle(n)}var Pf=p(()=>{});function rn({onClick:e,model:t,children:r}){return _t.default.createElement("li",null,_t.default.createElement(Yc.Link,{onClick:n=>{t.setError(void 0),n.preventDefault(),e()},href:"#"},_t.default.createElement(Yc.Typography,{display:"inline"},r)))}var _t,Yc,IB,g_,xB,yB=p(()=>{_t=d(b(),1),Yc=d(N(),1),IB=d(G(),1);EB();Pf();g_=(0,IB.observer)(function({model:e}){function t(r,n){(async()=>{try{await Uc(e,r?{uri:r,locationType:"UriLocation"}:void 0,n?{uri:n,locationType:"UriLocation"}:void 0)}catch(o){console.error(o),e.setError(o)}})()}return _t.default.createElement("ul",null,_t.default.createElement(rn,{model:e,onClick:()=>{t(void 0,"https://jbrowse.org/genomes/newicktrees/sarscov2phylo.pub.ft.nh")}},"230k COVID-19 samples (tree only)"),_t.default.createElement(rn,{model:e,onClick:()=>{e.setData({msa:pB,tree:CB})}},"Small protein MSA+tree"),_t.default.createElement(rn,{model:e,onClick:()=>{e.setData({msa:hB})}},"Small MSA only"),_t.default.createElement(rn,{model:e,onClick:()=>{t("https://jbrowse.org/genomes/multiple_sequence_alignments/pfam-cov2.stock")}},"PFAM SARS-CoV2 multi-stockholm"),_t.default.createElement(rn,{model:e,onClick:()=>{t("https://jbrowse.org/genomes/multiple_sequence_alignments/Lysine.stock")}},"Lysine stockholm file"),_t.default.createElement(rn,{model:e,onClick:()=>{t("https://jbrowse.org/genomes/multiple_sequence_alignments/PF01601_full.txt")}},"PF01601 stockholm file (SARS-CoV2 spike protein)"),_t.default.createElement(rn,{model:e,onClick:()=>{t("https://jbrowse.org/genomes/multiple_sequence_alignments/europe_covid.fa")}},"Europe COVID full genomes (LR883044.1 and 199 other sequences)"),_t.default.createElement(rn,{model:e,onClick:()=>{t("https://jbrowse.org/genomes/multiple_sequence_alignments/rhv_test-only.aligned_with_mafft_auto.fa","https://jbrowse.org/genomes/multiple_sequence_alignments/rhv_test-only.aligned_with_mafft_auto.nh")}},"MAFFT+VeryFastTree(17.9k samples)"),_t.default.createElement(rn,{model:e,onClick:()=>{t("https://jbrowse.org/demos/ttc39a.mfa")}},"Human BLAST results mfa"))}),xB=g_});var de,ui,yr,wB,p_,BB,bB=p(()=>{de=d(b(),1),ui=d(he(),1),yr=d(N(),1),wB=d(G(),1);yB();Pf();p_=(0,wB.observer)(function({model:e}){let[t,r]=(0,de.useState)(),[n,o]=(0,de.useState)(),[i,s]=(0,de.useState)(),{error:a}=e;return de.default.createElement(yr.Container,null,de.default.createElement("div",{style:{width:"50%"}},a?de.default.createElement(ui.ErrorMessage,{error:a}):null,de.default.createElement(yr.Typography,null,"Open an MSA file (stockholm or clustal format) and/or a tree file (newick format)."),de.default.createElement(yr.Typography,{color:"error"},"Note: you can open up just an MSA or just a tree, both are not required. Some MSA files e.g. stockholm format have an embedded tree also and this is fine, and opening a separate tree file is not required.")),de.default.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:40}},de.default.createElement("div",null,de.default.createElement("div",null,de.default.createElement(yr.Typography,null,"MSA file or URL"),de.default.createElement(ui.FileSelector,{location:t,setLocation:r})),de.default.createElement("div",null,de.default.createElement(yr.Typography,null,"Tree file or URL"),de.default.createElement(ui.FileSelector,{location:n,setLocation:o})),de.default.createElement("div",null,de.default.createElement(yr.Typography,null,"InterProScan GFF file or URL (optional)"),de.default.createElement(ui.FileSelector,{location:i,setLocation:s}))),de.default.createElement("div",null,de.default.createElement(yr.Button,{onClick:()=>{(async()=>{try{await Uc(e,t,n,i)}catch(c){console.error(c),e.setError(c)}})()},variant:"contained",color:"primary",disabled:!t&&!n},"Open")),de.default.createElement("div",null,de.default.createElement(yr.Typography,null,"Examples"),de.default.createElement(xB,{model:e}))))}),BB=p_});function SB(){return ct.default.createElement("div",{style:{display:"flex",alignItems:"center",gap:12,padding:20}},ct.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ct.default.createElement("style",null,"@keyframes spinner { to { transform: rotate(360deg); } }"),ct.default.createElement("circle",{cx:"12",cy:"12",r:"10",stroke:"#ccc",strokeWidth:"3",fill:"none"}),ct.default.createElement("path",{d:"M12 2a10 10 0 0 1 10 10",stroke:"#1976d2",strokeWidth:"3",fill:"none",strokeLinecap:"round",style:{animation:"spinner 1s linear infinite",transformOrigin:"center"}})),ct.default.createElement(qc.Typography,{variant:"h6"},"Loading..."))}var ct,QB,qc,Gf,h_,C_,Of,MB=p(()=>{ct=d(b(),1),QB=d(he(),1);RA();qc=d(N(),1),Gf=d(G(),1);gB();bB();h_=(0,Gf.observer)(function({model:e,error:t}){return ct.default.createElement("div",null,ct.default.createElement(QB.ErrorMessage,{error:t}),ct.default.createElement(qc.Button,{variant:"contained",color:"primary",onClick:()=>{e.reset()}},"Return to import form"))}),C_=(0,Gf.observer)(function({model:e}){let{isLoading:t,dataInitialized:r,msaFilehandle:n,treeFilehandle:o}=e,i=!!(n||o);return ct.default.createElement("div",null,ct.default.createElement(No,{FallbackComponent:s=>ct.default.createElement(h_,{model:e,error:s.error})},r?t?ct.default.createElement(SB,null):ct.default.createElement(mB,{model:e}):i||t?ct.default.createElement(SB,null):ct.default.createElement(BB,{model:e})))}),Of=C_});var TB=H((kH,vB)=>{vB.exports=JBrowseExports["@jbrowse/core/util/io"]});var _B=H((NH,DB)=>{DB.exports=JBrowseExports["@jbrowse/core/util/types/mst"]});function E_(e,t){return e.parent===t.parent?1:2}function I_(e){return e.reduce(x_,0)/e.length}function x_(e,t){return e+t.x}function y_(e){return 1+e.reduce(w_,0)}function w_(e,t){return Math.max(e,t.y)}function B_(e){for(var t;t=e.children;)e=t[0];return e}function b_(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Hf(){var e=E_,t=1,r=1,n=!1;function o(i){var s,a=0;i.eachAfter(function(f){var m=f.children;m?(f.x=I_(m),f.y=y_(m)):(f.x=s?a+=e(f,s):0,f.y=0,s=f)});var c=B_(i),l=b_(i),A=c.x-e(c,l)/2,u=l.x+e(l,c)/2;return i.eachAfter(n?function(f){f.x=(f.x-i.x)*t,f.y=(i.y-f.y)*r}:function(f){f.x=(f.x-A)/(u-A)*t,f.y=(1-(i.y?f.y/i.y:1))*r})}return o.separation=function(i){return arguments.length?(e=i,o):e},o.size=function(i){return arguments.length?(n=!1,t=+i[0],r=+i[1],o):n?null:[t,r]},o.nodeSize=function(i){return arguments.length?(n=!0,t=+i[0],r=+i[1],o):n?[t,r]:null},o}var kB=p(()=>{});function S_(e){var t=0,r=e.children,n=r&&r.length;if(!n)t=1;else for(;--n>=0;)t+=r[n].value;e.value=t}function NB(){return this.eachAfter(S_)}var LB=p(()=>{});function FB(e,t){let r=-1;for(let n of this)e.call(t,n,++r,this);return this}var RB=p(()=>{});function PB(e,t){for(var r=this,n=[r],o,i,s=-1;r=n.pop();)if(e.call(t,r,++s,this),o=r.children)for(i=o.length-1;i>=0;--i)n.push(o[i]);return this}var GB=p(()=>{});function OB(e,t){for(var r=this,n=[r],o=[],i,s,a,c=-1;r=n.pop();)if(o.push(r),i=r.children)for(s=0,a=i.length;s<a;++s)n.push(i[s]);for(;r=o.pop();)e.call(t,r,++c,this);return this}var HB=p(()=>{});function JB(e,t){let r=-1;for(let n of this)if(e.call(t,n,++r,this))return n}var UB=p(()=>{});function YB(e){return this.eachAfter(function(t){for(var r=+e(t.data)||0,n=t.children,o=n&&n.length;--o>=0;)r+=n[o].value;t.value=r})}var qB=p(()=>{});function jB(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}var VB=p(()=>{});function WB(e){for(var t=this,r=Q_(t,e),n=[t];t!==r;)t=t.parent,n.push(t);for(var o=n.length;e!==r;)n.splice(o,0,e),e=e.parent;return n}function Q_(e,t){if(e===t)return e;var r=e.ancestors(),n=t.ancestors(),o=null;for(e=r.pop(),t=n.pop();e===t;)o=e,e=r.pop(),t=n.pop();return o}var KB=p(()=>{});function zB(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}var $B=p(()=>{});function XB(){return Array.from(this)}var ZB=p(()=>{});function eb(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}var tb=p(()=>{});function rb(){var e=this,t=[];return e.each(function(r){r!==e&&t.push({source:r.parent,target:r})}),t}var nb=p(()=>{});function*ob(){var e=this,t,r=[e],n,o,i;do for(t=r.reverse(),r=[];e=t.pop();)if(yield e,n=e.children)for(o=0,i=n.length;o<i;++o)r.push(n[o]);while(r.length)}var ib=p(()=>{});function fi(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=T_)):t===void 0&&(t=v_);for(var r=new ms(e),n,o=[r],i,s,a,c;n=o.pop();)if((s=t(n.data))&&(c=(s=Array.from(s)).length))for(n.children=s,a=c-1;a>=0;--a)o.push(i=s[a]=new ms(s[a])),i.parent=n,i.depth=n.depth+1;return r.eachBefore(__)}function M_(){return fi(this).eachBefore(D_)}function v_(e){return e.children}function T_(e){return Array.isArray(e)?e[1]:null}function D_(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function __(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function ms(e){this.data=e,this.depth=this.height=0,this.parent=null}var sb=p(()=>{LB();RB();GB();HB();UB();qB();VB();KB();$B();ZB();tb();nb();ib();ms.prototype=fi.prototype={constructor:ms,count:NB,each:FB,eachAfter:OB,eachBefore:PB,find:JB,sum:YB,sort:jB,path:WB,ancestors:zB,descendants:XB,leaves:eb,links:rb,copy:M_,[Symbol.iterator]:ob}});var ab=p(()=>{kB();sb()});var cb=p(()=>{});function di(e,t="node",r=0){let n=`${t}-${r}`;return{...e,id:n,name:e.name||n,children:e.children?.map((o,i)=>di(o,`${n}-${i}`,r+1))||[]}}var Jf=p(()=>{});function mi(e){return e>=97&&e<=122}var nn,Uf=p(()=>{nn=class{MSA;orderedNames;constructor(t){let r=[],n=[];for(let o of t.split(">")){if(!/\S/.test(o))continue;let i=o.indexOf(`
`);if(i===-1)continue;let s=o.slice(0,i),a=s.indexOf(" "),c=a===-1?s:s.slice(0,a);c&&(r.push(o.slice(i+1).replaceAll(/\s/g,"")),n.push(c))}this.orderedNames=n,this.MSA={seqdata:this.expandA3M(r,n)}}static sniff(t){if(!t.startsWith(">"))return!1;let r=[];for(let s of t.split(">")){if(!/\S/.test(s))continue;let a=s.indexOf(`
`);if(a===-1)continue;let c=s.slice(a+1).replaceAll(/\s/g,"");c&&r.push(c)}if(r.length<2)return!1;let n=!1,o=-1,i=!0;for(let s of r){let a=0;for(let c=0;c<s.length;c++){let l=s.charCodeAt(c);mi(l)?n=!0:(l>=65&&l<=90||l===45)&&a++}o===-1?o=a:a!==o&&(i=!1)}return n&&i}expandA3M(t,r){let n=r.length;if(n===0)return{};let o=[],i=[];for(let l=0;l<n;l++){let A=t[l],u=[],f=[],m=0;for(;m<A.length;){let g=A.charCodeAt(m);if(g>=65&&g<=90||g===45){u.push(A[m]);let h="",E=m+1;for(;E<A.length;){let C=A.charCodeAt(E);if(mi(C)||C===46)h+=A[E],E++;else break}f.push(h),m=E}else if(g===46)m++;else if(mi(g)){let h="";for(;m<A.length&&mi(A.charCodeAt(m));)h+=A[m],m++;u.push(""),f.push(h)}else m++}o.push(u),i.push(f)}let s=Math.max(...o.map(l=>l.length),0),a=new Array(s).fill(0);for(let l=0;l<n;l++){let A=i[l];for(let u=0;u<A.length;u++){let f=0;for(let m of A[u])mi(m.charCodeAt(0))&&f++;f>a[u]&&(a[u]=f)}}let c={};for(let l=0;l<n;l++){let A=o[l],u=i[l],f=[];for(let m=0;m<s;m++){let g=a[m];if(m<A.length){let h=A[m],E=u[m]||"";f.push(h||"-");let C="";for(let y of E)mi(y.charCodeAt(0))&&(C+=y.toUpperCase());f.push(C);let x=g-C.length;x>0&&f.push(".".repeat(x))}else f.push("-"),g>0&&f.push(".".repeat(g))}c[r[l]]=f.join("")}return c}getMSA(){return this.MSA}getRowData(){}getNames(){return this.orderedNames}getRow(t){return this.MSA.seqdata[t]||""}getWidth(){let t=Object.keys(this.MSA.seqdata)[0];return t?this.getRow(t).length:0}getStructures(){return{}}get alignmentNames(){return[]}getHeader(){return{}}getTree(){return{id:"root",name:"root",noTree:!0,children:this.getNames().map(t=>({id:t,children:[],name:t}))}}get seqConsensus(){}get secondaryStructureConsensus(){}get tracks(){return[]}}});function k_(e){let t=/\(?(\d+(\.\d+)+)\)?/.exec(e);return t&&t.length>1?t[1]:""}function Ab(e){let t=["CLUSTAL","PROBCONS","MUSCLE","MSAPROBS","Kalign"];t.some(n=>e.startsWith(n))||console.warn(`${e} is not a known CLUSTAL header: ${t.join(",")}, proceeding but could indicate an issue`);let r=k_(e);return{info:e,version:r}}function jc(e){let t=e.next();for(;!t.done&&t.value.trim()==="";)t=e.next();return t.value}function N_(e){let t=e.split(/\s+/),r=e.slice(t[0].length),n=t[0].length+r.indexOf(t[1]),o=n+t[1].length;return[n,o]}function lb(e){let t=jc(e),r=[],n="";if(!t)return;for(;t;)t.startsWith(" ")?n=t:r.push(t),t=e.next().value;let[o,i]=N_(r[0]),a=r.map(u=>u.split(/\s+/)).map(u=>u[0]),c=r.map(u=>u.slice(o,i)),l=n.slice(o,i),A=c[0].length-l.length;return A&&(l+=" ".repeat(A)),{ids:a,seqs:c,consensus:l}}function ub(e){let t,r=lb(e);if(r!==void 0)for(;t=lb(e);){for(let n=0;n<t.seqs.length;n++)r.seqs[n]+=t.seqs[n];r.consensus+=t.consensus}return r}var Yf=p(()=>{});var fb=p(()=>{Yf()});function L_(e){let t=jc(e);if(!t)throw new Error("Empty file received");let r=Ab(t),n=ub(e);if(n===void 0)throw new Error("No blocks parsed");let o=n.seqs.map((s,a)=>({id:n.ids[a],seq:s})),{consensus:i}=n;if(i.length!=o[0].seq.length)throw new Error(`Consensus length != sequence length. Con ${i.length} seq ${o[0].seq.length}`);return{consensus:i,alns:o,header:r}}function db(e){let t=e.split(`
`)[Symbol.iterator]();return L_(t)}var mb=p(()=>{fb();Yf()});var Sn,qf=p(()=>{mb();Sn=class{MSA;constructor(t){this.MSA=db(t)}getMSA(){return this.MSA}getRow(t){return this.MSA.alns.find(r=>r.id===t)?.seq||""}getWidth(){return this.MSA.alns[0].seq.length}getRowData(){}getHeader(){return this.MSA.header}getNames(){return this.MSA.alns.map(t=>t.id)}getStructures(){return{}}get alignmentNames(){return[]}getTree(){return{id:"root",name:"root",noTree:!0,children:this.getNames().map(t=>({id:t,name:t,children:[]}))}}get seqConsensus(){return this.MSA.consensus}get secondaryStructureConsensus(){}get tracks(){return[]}}});function gb(e){let t=e.split(`
`).map(i=>i.trim()).filter(i=>!!i),r=[],n=[];for(let i of t)if(i.startsWith("SEQ"))r.push(i);else{if(i.startsWith("DATA"))continue;if(i.startsWith("//"))break;n.push(i)}let o=r.map(i=>{let[,s,a,c,l,A,u,f,m]=i.split(" ");return{species:s,protein:a,chr:c,start:+l,end:+A,strand:+u,geneId:f,unknown:m,seq:""}});for(let i of n)for(let s=0;s<r.length;s++)o[s].seq+=i[s];return o}function Vc(e){let t=e.split(`
`).map(i=>i.trim()).filter(i=>!!i),r=[],n="";for(let i of t)if(i.startsWith("SEQ"))r.push(i);else{if(i.startsWith("DATA"))continue;if(i.startsWith("//"))break;n=i}let o=r.map(i=>{let[,s,a,c,l,A,u,f,m]=i.split(" ");return{species:s,protein:a,chr:c,start:+l,end:+A,strand:+u,geneId:f,unknown:m}});return{tree:n,seqs:o}}var jf=p(()=>{});var Qn,Vf=p(()=>{jf();Qn=class{MSA;constructor(t){this.MSA=gb(t)}getMSA(){return this.MSA}getRow(t){return this.MSA.find(r=>r.protein===t)?.seq||""}getWidth(){return this.MSA[0].seq.length}getRowData(){}getHeader(){return""}getNames(){return this.MSA.map(t=>t.protein)}getStructures(){return{}}get alignmentNames(){return[]}getTree(){return{id:"root",name:"root",noTree:!0,children:this.getNames().map(t=>({id:t,name:t,children:[]}))}}get seqConsensus(){}get secondaryStructureConsensus(){}get tracks(){return[]}}});var Mn,Wf=p(()=>{Mn=class{MSA;constructor(t){let r={};for(let n of t.split(">")){if(!/\S/.test(n))continue;let o=n.indexOf(`
`);if(o===-1)continue;let i=n.slice(0,o),s=i.indexOf(" "),a=s===-1?i:i.slice(0,s);a&&(r[a]=n.slice(o+1).replaceAll(/\s/g,""))}this.MSA={seqdata:r}}getMSA(){return this.MSA}getRowData(){}getNames(){return Object.keys(this.MSA.seqdata)}getRow(t){return this.MSA.seqdata[t]||""}getWidth(){let t=Object.keys(this.MSA.seqdata)[0];return this.getRow(t).length}getStructures(){return{}}get alignmentNames(){return[]}getHeader(){return{}}getTree(){return{id:"root",name:"root",noTree:!0,children:this.getNames().map(t=>({id:t,children:[],name:t}))}}get seqConsensus(){}get secondaryStructureConsensus(){}get tracks(){return[]}}});function so(e){let t=[],r={},n=e.split(/\s*(;|\(|\)|,|:)\s*/);for(let o=0;o<n.length;o++){let i=n[o],s={};switch(i){case"(":r.children=[s],t.push(r),r=s;break;case",":t.at(-1)?.children.push(s),r=s;break;case")":r=t.pop();break;case":":break;default:{let a=n[o-1];a===")"||a==="("||a===","?r.name=i:a===":"&&(r.length=Number.parseFloat(i))}}}return r}var Kf=p(()=>{});function gi(){return{gf:{},gc:{},gs:{},gr:{},seqname:[],seqdata:{}}}function pi(e){return pb.test(e)}function hb(e,t){let r=t??{},n=[],o=null,i=e.split(`
`);for(let s of i){let a;if(pb.test(s))o=gi();else if(F_.test(s))o&&n.push(o),o=null;else if(a=R_.exec(s)){if(!o){if(r.strict)throw new Error("No format header: # STOCKHOLM 1.0");o=gi()}let c=a[1];o.gf[c]||(o.gf[c]=[]),o.gf[c].push(a[2])}else if(a=P_.exec(s)){if(!o){if(r.strict)throw new Error("No format header: # STOCKHOLM 1.0");o=gi()}let c=a[1];o.gc[c]||(o.gc[c]=""),o.gc[c]+=a[2]}else if(a=G_.exec(s)){if(!o){if(r.strict)throw new Error("No format header: # STOCKHOLM 1.0");o=gi()}let c=a[1],l=a[2],A=a[3];o.gs[l]||(o.gs[l]={}),o.gs[l][c]||(o.gs[l][c]=[]),o.gs[l][c].push(A)}else if(a=O_.exec(s)){if(!o){if(r.strict)throw new Error("No format header: # STOCKHOLM 1.0");o=gi()}let c=a[1],l=a[2],A=a[3];o.gr[l]||(o.gr[l]={}),o.gr[l][c]||(o.gr[l][c]=""),o.gr[l][c]+=A}else if(a=H_.exec(s)){if(!o){if(r.strict)throw new Error("No format header: # STOCKHOLM 1.0");o=gi()}let c=a[1],l=a[2];o.seqdata[c]||(o.seqdata[c]="",o.seqname.push(c)),o.seqdata[c]+=l}else if(J_.test(s)&&r.strict)throw new Error("Malformed line")}return o&&n.push(o),n}var pb,F_,R_,P_,G_,O_,H_,J_,zf=p(()=>{pb=/^# STOCKHOLM 1.0/,F_=/^\/\/\s*$/,R_=/^#=GF\s+(\S+)\s+(.*?)\s*$/,P_=/^#=GC\s+(\S+)\s+(.*?)\s*$/,G_=/^#=GS\s+(\S+)\s+(\S+)\s+(.*?)\s*$/,O_=/^#=GR\s+(\S+)\s+(\S+)\s+(.*?)\s*$/,H_=/^\s*(\S+)\s+(\S+)\s*$/,J_=/\S/});var vn,$f=p(()=>{Kf();zf();Jf();zf();vn=class{data;MSA;constructor(t,r){let n=hb(t);this.data=n,this.MSA=n[r]}getMSA(){return this.MSA}getRow(t){return this.MSA.seqdata[t]||""}getWidth(){let t=Object.keys(this.MSA.seqdata)[0];return this.getRow(t).length}get alignmentNames(){return this.data.map((t,r)=>t.gf.DE?.[0]??`Alignment ${r+1}`)}getHeader(){let t=this.MSA.gs.AC??{},r=this.MSA.gs.DR??{};return{General:this.MSA.gf,Accessions:Object.fromEntries(Object.entries(t).map(([n,o])=>[n,o[0]])),Dbxref:Object.fromEntries(Object.entries(r).map(([n,o])=>[n,o.join("; ")]))}}getRowData(t){return{name:t,accession:this.MSA.gs.AC?.[t]?.[0],dbxref:this.MSA.gs.DR?.[t]?.join("; ")}}getNames(){return Object.keys(this.MSA.seqdata)}getSeqCoords(){}getStructures(){let t=/PDB; +(\S+) +(\S); ([0-9]+)-([0-9]+)/,r=this.MSA.gs.DR??{},n=Object.entries(r).flatMap(([i,s])=>s.map(a=>{let c=t.exec(a);return c?{id:i,match:c}:null})).filter(i=>!!i).map(({id:i,match:s})=>({id:i,pdb:s[1].toLowerCase(),chain:s[2],startPos:+s[3],endPos:+s[4]})),o={};for(let i of n){let{id:s,...a}=i;o[s]||(o[s]=[]),o[s].push(a)}return o}getTree(){let t=this.MSA.gf.NH?.[0];return t?di(so(t)):{id:"root",name:"root",noTree:!0,children:this.getNames().map(r=>({id:r,children:[],name:r}))}}get seqConsensus(){return this.MSA.gc.seq_cons}get secondaryStructureConsensus(){return this.MSA.gc.SS_cons}get tracks(){return[{id:"seqConsensus",name:"Sequence consensus",data:this.seqConsensus,customColorScheme:{}},{id:"secondaryStruct",name:"Secondary-structure",data:this.secondaryStructureConsensus,customColorScheme:{">":"pink","<":"lightblue"}}]}}});var Cb=p(()=>{Uf();qf();Vf();Wf();$f();jf();Kf();Uf();qf();Vf();Wf();$f()});function U_(e){return e?Object.fromEntries(e.split(";").map(t=>t.trim()).filter(t=>!!t).map(t=>t.split("=")).map(([t,r])=>[t?.trim()??"",r?decodeURIComponent(r).trim().split(",").join(" "):void 0]).filter(([t])=>t!=="")):{}}function Wc(e){return e?e.split(`
`).map(t=>t.trim()).filter(t=>!!t&&!t.startsWith("#")).map(t=>{let r=t.split("	"),[n,o,i,s,a,c,l,A]=r,u=r[8];return{seq_id:n??"",source:o??"",type:i??"",start:Number(s)||0,end:Number(a)||0,score:Number(c)||0,strand:l??".",phase:A??".",...U_(u)}}):[]}var Eb=p(()=>{});function Kc(e){let t=new Map;for(let n of e){let o=t.get(n.seq_id);o?o.push(n):t.set(n.seq_id,[n])}let r={};for(let[n,o]of t){let i=new Map,s=new Map;for(let c of o){let l=c.Name||c.ID||`${c.source}_${c.start}_${c.end}`,A=c.signature_desc||c.Name||l,u=c.Ontology_term||c.description||c.Note||A;s.has(l)||s.set(l,{name:A,description:u,accession:l});let f=i.get(l);f?f.push({start:c.start,end:c.end}):i.set(l,[{start:c.start,end:c.end}])}let a=[];for(let[c,l]of i){let A=s.get(c);a.push({signature:{entry:A},locations:l})}r[n]={matches:a,xref:[{id:n}]}}return r}var Ib=p(()=>{});var xb=p(()=>{});var yb=p(()=>{Eb();Ib();xb()});var wb=p(()=>{cb();Jf();Cb();yb()});function Bb({mapHeight:e,blockSize:t,viewportY:r,viewportHeight:n}){let o=Math.max(0,Math.min(r,e*t-n)),i=Math.floor(o/t),s=Math.floor((o+n-1)/t),a=[];for(let c=i;c<=s;c++)a.push(c*t);return a}function bb({mapWidth:e,blockSize:t,viewportX:r,viewportWidth:n}){let o=Math.max(0,Math.min(r,e-n)),i=Math.floor(o/t),s=Math.floor((o+n-1)/t),a=[];for(let c=i;c<=s;c++)a.push(c*t);return a}var Sb=p(()=>{});function Xf({ctx:e,conservation:t,colWidth:r,trackHeight:n,offsetX:o,blockSize:i}){let s=Math.max(0,Math.floor(o/r)),a=Math.max(0,Math.ceil((o+i)/r));e.fillStyle="gray";for(let c=s;c<a&&c<t.length;c++){let A=t[c]*n,u=c*r;e.fillRect(u,n-A,r,A)}}function Zf({ctx:e,data:t,colorScheme:r,contrastScheme:n,bgColor:o,colWidth:i,rowHeight:s,offsetX:a,blockSize:c}){let l=Math.max(0,Math.floor(a/i)),A=Math.max(0,Math.ceil((a+c)/i)),u=t?.slice(l,A);for(let f=0;u&&f<u.length;f++){let m=u[f],g=r[m.toUpperCase()];if(o){let h=f*i+a-a%i;e.fillStyle=g||"white",e.fillRect(h,0,i,s),s>=10&&i>=s/2&&(e.fillStyle=n[m.toUpperCase()]||"black",e.fillText(m,h+i/2,s/2+1))}}}function V_({model:e,ctx:t,offsetX:r,offsetY:n,trackHeight:o,blockSizeXOverride:i,highResScaleFactorOverride:s}){let{blockSize:a,colWidth:c,highResScaleFactor:l,conservation:A}=e,u=i??a,f=s??l;t.resetTransform(),t.scale(f,f),t.translate(-r,n),Xf({ctx:t,conservation:A,colWidth:c,trackHeight:o,offsetX:r,blockSize:u}),t.resetTransform()}function W_({model:e,ctx:t,track:r,offsetX:n,offsetY:o,contrastScheme:i,blockSizeXOverride:s,highResScaleFactorOverride:a}){let{blockSize:c,bgColor:l,colorScheme:A,colWidth:u,fontSize:f,rowHeight:m,highResScaleFactor:g}=e,{customColorScheme:h,data:E}=r.model,C=h??A,x=s??c,y=a??g;t.resetTransform(),t.scale(y,y),t.translate(-n,o),t.textAlign="center",t.font=t.font.replace(/\d+px/,`${f}px`),Zf({ctx:t,data:E,colorScheme:C,contrastScheme:i,bgColor:l,colWidth:u,rowHeight:m,offsetX:n,blockSize:x}),t.resetTransform()}function Qb({model:e,ctx:t,offsetX:r,contrastScheme:n,blockSizeXOverride:o,highResScaleFactorOverride:i}){let{turnedOnTracks:s}=e,a=0;for(let c of s){let l=c.model.height;c.model.id==="conservation"?V_({model:e,ctx:t,offsetX:r,offsetY:a,trackHeight:l,blockSizeXOverride:o,highResScaleFactorOverride:i}):W_({model:e,ctx:t,track:c,offsetX:r,offsetY:a,contrastScheme:n,blockSizeXOverride:o,highResScaleFactorOverride:i}),a+=l}}var zc=p(()=>{});var on,Mb,ed,K_,z_,vb,Tb=p(()=>{on=d(b(),1),Mb=d(he(),1),ed=d(G(),1);zc();K_=(0,ed.observer)(function({model:e,offsetX:t,trackHeight:r}){let{blockSize:n,scrollX:o,colWidth:i,highResScaleFactor:s,conservation:a}=e,c=(0,on.useRef)(null);return(0,on.useEffect)(()=>{if(!c.current)return;let l=c.current.getContext("2d");l&&(l.resetTransform(),l.scale(s,s),l.clearRect(0,0,n,r),l.translate(-t,0),Xf({ctx:l,conservation:a,colWidth:i,trackHeight:r,offsetX:t,blockSize:n}))},[n,i,r,t,s,a]),on.default.createElement("canvas",{ref:c,height:r*s,width:n*s,style:{position:"absolute",left:o+t,width:n,height:r}})}),z_=(0,ed.observer)(function({model:e,track:t}){let{blocksX:r,msaAreaWidth:n}=e,o=t.model.height;return on.default.createElement("div",{style:{position:"relative",height:o,width:n,overflow:"hidden"}},r.map(i=>on.default.createElement(K_,{key:i,model:e,offsetX:i,trackHeight:o})),on.default.createElement(Mb.ResizeHandle,{onDrag:i=>(e.setConservationTrackHeight(Math.max(10,e.conservationTrackHeight+i)),i),style:{position:"absolute",bottom:0,left:0,height:4,width:"100%",zIndex:1,background:"rgba(200,200,200,0.5)"}}))}),vb=z_});var Lr,Db,td,$_,X_,_b,kb=p(()=>{Lr=d(b(),1),Db=d(N(),1),td=d(G(),1);Bn();zc();$_=(0,td.observer)(function({track:e,model:t,offsetX:r}){let{blockSize:n,scrollX:o,bgColor:i,colorScheme:s,colWidth:a,fontSize:c,rowHeight:l,highResScaleFactor:A}=t,{model:{customColorScheme:u,data:f}}=e,m=u||s,g=(0,Db.useTheme)(),h=(0,Lr.useRef)(null),E=(0,Lr.useMemo)(()=>no(m,g),[m,g]);return(0,Lr.useEffect)(()=>{if(!h.current)return;let C=h.current.getContext("2d");C&&(C.resetTransform(),C.scale(A,A),C.clearRect(0,0,n,l),C.translate(-r,0),C.textAlign="center",C.font=C.font.replace(/\d+px/,`${c}px`),Zf({ctx:C,data:f,colorScheme:m,contrastScheme:E,bgColor:i,colWidth:a,rowHeight:l,offsetX:r,blockSize:n}))},[c,i,n,a,l,r,E,m,A,f]),Lr.default.createElement("canvas",{ref:h,height:l*A,width:n*A,style:{position:"absolute",left:o+r,width:n,height:l}})}),X_=(0,td.observer)(function({track:e,model:t}){let{blocksX:r,msaAreaWidth:n,rowHeight:o}=t;return e.model.data?Lr.default.createElement("div",{style:{position:"relative",height:o,width:n,overflow:"hidden"}},r.map(i=>Lr.default.createElement($_,{key:i,track:e,model:t,offsetX:i}))):null}),_b=X_});var $c,Xc=p(()=>{$c="maeditor"});function Nb(e){let t=Math.min(e.length-1,sf.length-1),r=sf[t];return Object.fromEntries(e.map((n,o)=>[n,r[o]]))}var Lb=p(()=>{af()});function Fb(e){let t=new Map;e.forEach(n=>{t.set(n.id,{...n,id:`${n.id}`,name:`${n.id}`,parent:n.parent!==void 0?`${n.parent}`:void 0,children:[]})});let r=[];return e.forEach(n=>{let o=t.get(n.id);if(n.parent!==void 0){let i=t.get(n.parent);i?i.children.push(o):r.push(o)}else r.push(o)}),r[0]}var Rb=p(()=>{});function Pb(e,t){rd||(rd=document.createElement("canvas"));let r=rd.getContext("2d");if(!r)throw new Error("no canvas context");return r.font=r.font.replace(/\d+px/,`${t}px`),r.measureText(e).width}var rd,Gb=p(()=>{});function Ob(){return Tn.types.model({tree:Tn.types.maybe(Tn.types.string),msa:Tn.types.maybe(Tn.types.string),treeMetadata:Tn.types.maybe(Tn.types.string)}).actions(e=>({setTree(t){e.tree=t},setMSA(t){e.msa=t},setTreeMetadata(t){e.treeMetadata=t}})).postProcessSnapshot(e=>{let{tree:t,msa:r,treeMetadata:n}=e,o=5e4;return{tree:t&&t.length>o?void 0:t,msa:r&&r.length>o?void 0:r,treeMetadata:n&&n.length>o?void 0:n}})}var Tn,Hb=p(()=>{Tn=d(Lt(),1)});function Ub(){return Jb.types.model("DialogQueueSessionMixin",{}).volatile(()=>({queueOfDialogs:[]})).views(e=>({get DialogComponent(){return e.queueOfDialogs[0]?.[0]},get DialogProps(){return e.queueOfDialogs[0]?.[1]}})).actions(e=>({removeActiveDialog(){e.queueOfDialogs=e.queueOfDialogs.slice(1)},queueDialog(t){let[r,n]=t(()=>{this.removeActiveDialog()});e.queueOfDialogs=[...e.queueOfDialogs,[r,n]]}}))}var Jb,Yb=p(()=>{Jb=d(Lt(),1)});function jb(){return qb.types.model({bgColor:!0,colorSchemeName:$c}).actions(e=>({setColorSchemeName(t){e.colorSchemeName=t},setBgColor(t){e.bgColor=t}}))}var qb,Vb=p(()=>{qb=d(Lt(),1);Xc()});function Wb(){return hi.types.model({drawLabels:!0,labelsAlignRight:!1,treeAreaWidth:hi.types.optional(hi.types.number,400),treeWidth:hi.types.optional(hi.types.number,300),treeWidthMatchesArea:!0,showBranchLen:!0,drawTree:!0,drawNodeBubbles:!0}).actions(e=>({setTreeWidthMatchesArea(t){e.treeWidthMatchesArea=t},setTreeAreaWidth(t){e.treeAreaWidth=Math.round(t)},setTreeWidth(t){e.treeWidth=Math.round(t)},setLabelsAlignRight(t){e.labelsAlignRight=t},setDrawTree(t){e.drawTree=t},setShowBranchLen(t){e.showBranchLen=t},setDrawNodeBubbles(t){e.drawNodeBubbles=t},setDrawLabels(t){e.drawLabels=t}}))}var hi,Kb=p(()=>{hi=d(Lt(),1);Xc()});function fd(e,t){let r=e.toUpperCase(),n=t.toUpperCase();return Z_[r]?.[n]??-4}function ek(e,t){if(e.length!==t.length)throw new Error("Sequences must have the same length (aligned)");let r=0,n=0,o=0,i=0;for(let l=0;l<e.length;l++){let A=e[l],u=t[l];if(A==="-"&&u==="-")continue;if(A==="-"||u==="-"){n++;continue}let f=fd(A,u);o+=f,i+=Math.max(fd(A,A),fd(u,u)),A.toUpperCase()===u.toUpperCase()?r++:n++}if(r+n===0||i<=0)return 1;let a=o/i,c=Math.max(.01,Math.min(1,a));return-Math.log(c)}function tk(e){let t=e.length,r=[];for(let n=0;n<t;n++){r[n]=[];for(let o=0;o<t;o++)n===o?r[n][o]=0:o<n?r[n][o]=r[o][n]:r[n][o]=ek(e[n][1],e[o][1])}return r}function rk(e,t){let r=e.length;if(r<2)return{name:t[0]};if(r===2){let a=e[0][1];return{left:{name:t[0]},right:{name:t[1]},leftLength:a/2,rightLength:a/2}}let n=[];for(let a=0;a<r;a++)n[a]=[...e[a]];let o=t.map(a=>({name:a})),i=r;for(;i>2;){let a=[];for(let y=0;y<o.length;y++)o[y]!==void 0&&a.push(y);let c=new Map;for(let y of a){let w=0;for(let B of a)y!==B&&(w+=n[y][B]);c.set(y,w)}let l=1/0,A=-1,u=-1;for(let y=0;y<a.length;y++)for(let w=y+1;w<a.length;w++){let B=a[y],S=a[w],M=(i-2)*n[B][S]-c.get(B)-c.get(S);M<l&&(l=M,A=B,u=S)}let f=n[A][u],m=c.get(A),g=c.get(u),h,E;i>2?(h=f/2+(m-g)/(2*(i-2)),E=f-h):(h=f/2,E=f/2),h=Math.max(0,h),E=Math.max(0,E);let C={left:o[A],right:o[u],leftLength:h,rightLength:E},x=A;for(let y of a)if(y!==A&&y!==u){let w=(n[A][y]+n[u][y]-f)/2;n[x][y]=Math.max(0,w),n[y][x]=Math.max(0,w)}o[u]=void 0,o[x]=C,i--}let s=[];for(let a=0;a<o.length;a++)o[a]!==void 0&&s.push(a);if(s.length===2){let a=s[0],c=s[1],l=n[a][c];return{left:o[a],right:o[c],leftLength:l/2,rightLength:l/2}}return o[s[0]]}function dd(e,t){let r;if(e.name!==void 0&&!e.left&&!e.right)r=e.name.replace(/[():,;[\]]/g,"_");else{let n=e.left?dd(e.left,e.leftLength):"",o=e.right?dd(e.right,e.rightLength):"";r=`(${n},${o})`}return t!==void 0&&(r+=`:${t.toFixed(6)}`),r}function zb(e){if(e.length<2)throw new Error("Need at least 2 sequences to build a tree");let t=e.map(o=>o[0]),r=tk(e),n=rk(r,t);return dd(n)+";"}var Z_,$b=p(()=>{Z_={A:{A:4,R:-1,N:-2,D:-2,C:0,Q:-1,E:-1,G:0,H:-2,I:-1,L:-1,K:-1,M:-1,F:-2,P:-1,S:1,T:0,W:-3,Y:-2,V:0,B:-2,Z:-1,X:0,"*":-4},R:{A:-1,R:5,N:0,D:-2,C:-3,Q:1,E:0,G:-2,H:0,I:-3,L:-2,K:2,M:-1,F:-3,P:-2,S:-1,T:-1,W:-3,Y:-2,V:-3,B:-1,Z:0,X:-1,"*":-4},N:{A:-2,R:0,N:6,D:1,C:-3,Q:0,E:0,G:0,H:1,I:-3,L:-3,K:0,M:-2,F:-3,P:-2,S:1,T:0,W:-4,Y:-2,V:-3,B:3,Z:0,X:-1,"*":-4},D:{A:-2,R:-2,N:1,D:6,C:-3,Q:0,E:2,G:-1,H:-1,I:-3,L:-4,K:-1,M:-3,F:-3,P:-1,S:0,T:-1,W:-4,Y:-3,V:-3,B:4,Z:1,X:-1,"*":-4},C:{A:0,R:-3,N:-3,D:-3,C:9,Q:-3,E:-4,G:-3,H:-3,I:-1,L:-1,K:-3,M:-1,F:-2,P:-3,S:-1,T:-1,W:-2,Y:-2,V:-1,B:-3,Z:-3,X:-2,"*":-4},Q:{A:-1,R:1,N:0,D:0,C:-3,Q:5,E:2,G:-2,H:0,I:-3,L:-2,K:1,M:0,F:-3,P:-1,S:0,T:-1,W:-2,Y:-1,V:-2,B:0,Z:3,X:-1,"*":-4},E:{A:-1,R:0,N:0,D:2,C:-4,Q:2,E:5,G:-2,H:0,I:-3,L:-3,K:1,M:-2,F:-3,P:-1,S:0,T:-1,W:-3,Y:-2,V:-2,B:1,Z:4,X:-1,"*":-4},G:{A:0,R:-2,N:0,D:-1,C:-3,Q:-2,E:-2,G:6,H:-2,I:-4,L:-4,K:-2,M:-3,F:-3,P:-2,S:0,T:-2,W:-2,Y:-3,V:-3,B:-1,Z:-2,X:-1,"*":-4},H:{A:-2,R:0,N:1,D:-1,C:-3,Q:0,E:0,G:-2,H:8,I:-3,L:-3,K:-1,M:-2,F:-1,P:-2,S:-1,T:-2,W:-2,Y:2,V:-3,B:0,Z:0,X:-1,"*":-4},I:{A:-1,R:-3,N:-3,D:-3,C:-1,Q:-3,E:-3,G:-4,H:-3,I:4,L:2,K:-3,M:1,F:0,P:-3,S:-2,T:-1,W:-3,Y:-1,V:3,B:-3,Z:-3,X:-1,"*":-4},L:{A:-1,R:-2,N:-3,D:-4,C:-1,Q:-2,E:-3,G:-4,H:-3,I:2,L:4,K:-2,M:2,F:0,P:-3,S:-2,T:-1,W:-2,Y:-1,V:1,B:-4,Z:-3,X:-1,"*":-4},K:{A:-1,R:2,N:0,D:-1,C:-3,Q:1,E:1,G:-2,H:-1,I:-3,L:-2,K:5,M:-1,F:-3,P:-1,S:0,T:-1,W:-3,Y:-2,V:-2,B:0,Z:1,X:-1,"*":-4},M:{A:-1,R:-1,N:-2,D:-3,C:-1,Q:0,E:-2,G:-3,H:-2,I:1,L:2,K:-1,M:5,F:0,P:-2,S:-1,T:-1,W:-1,Y:-1,V:1,B:-3,Z:-1,X:-1,"*":-4},F:{A:-2,R:-3,N:-3,D:-3,C:-2,Q:-3,E:-3,G:-3,H:-1,I:0,L:0,K:-3,M:0,F:6,P:-4,S:-2,T:-2,W:1,Y:3,V:-1,B:-3,Z:-3,X:-1,"*":-4},P:{A:-1,R:-2,N:-2,D:-1,C:-3,Q:-1,E:-1,G:-2,H:-2,I:-3,L:-3,K:-1,M:-2,F:-4,P:7,S:-1,T:-1,W:-4,Y:-3,V:-2,B:-2,Z:-1,X:-2,"*":-4},S:{A:1,R:-1,N:1,D:0,C:-1,Q:0,E:0,G:0,H:-1,I:-2,L:-2,K:0,M:-1,F:-2,P:-1,S:4,T:1,W:-3,Y:-2,V:-2,B:0,Z:0,X:0,"*":-4},T:{A:0,R:-1,N:0,D:-1,C:-1,Q:-1,E:-1,G:-2,H:-2,I:-1,L:-1,K:-1,M:-1,F:-2,P:-1,S:1,T:5,W:-2,Y:-2,V:0,B:-1,Z:-1,X:0,"*":-4},W:{A:-3,R:-3,N:-4,D:-4,C:-2,Q:-2,E:-3,G:-2,H:-2,I:-3,L:-2,K:-3,M:-1,F:1,P:-4,S:-3,T:-2,W:11,Y:2,V:-3,B:-4,Z:-3,X:-2,"*":-4},Y:{A:-2,R:-2,N:-2,D:-3,C:-2,Q:-1,E:-2,G:-3,H:2,I:-1,L:-1,K:-2,M:-1,F:3,P:-3,S:-2,T:-2,W:2,Y:7,V:-1,B:-3,Z:-2,X:-1,"*":-4},V:{A:0,R:-3,N:-3,D:-3,C:-1,Q:-2,E:-2,G:-3,H:-3,I:3,L:1,K:-2,M:1,F:-1,P:-2,S:-2,T:0,W:-3,Y:-1,V:4,B:-3,Z:-2,X:-1,"*":-4},B:{A:-2,R:-1,N:3,D:4,C:-3,Q:0,E:1,G:-1,H:0,I:-3,L:-4,K:0,M:-3,F:-3,P:-2,S:0,T:-1,W:-4,Y:-3,V:-3,B:4,Z:1,X:-1,"*":-4},Z:{A:-1,R:0,N:0,D:1,C:-3,Q:3,E:4,G:-2,H:0,I:-3,L:-3,K:1,M:-1,F:-3,P:-1,S:0,T:-1,W:-3,Y:-2,V:-2,B:1,Z:4,X:-1,"*":-4},X:{A:0,R:-1,N:-1,D:-1,C:-2,Q:-1,E:-1,G:-1,H:-1,I:-1,L:-1,K:-1,M:-1,F:-1,P:-2,S:0,T:0,W:-2,Y:-1,V:-1,B:-1,Z:-1,X:-1,"*":-4},"*":{A:-4,R:-4,N:-4,D:-4,C:-4,Q:-4,E:-4,G:-4,H:-4,I:-4,L:-4,K:-4,M:-4,F:-4,P:-4,S:-4,T:-4,W:-4,Y:-4,V:-4,B:-4,Z:-4,X:-4,"*":1}}});function Xb(e){let t=ok(e.replace(/\s+/g," ").replace(/\s*{\s*/g,"{").replace(/\s*}\s*/g,"}").replace(/\s*,\s*/g,",").replace(/\s*::\s*=\s*/g,"::=").replace(/^.*?::=/,"")),r=Object.fromEntries(ik(t.fdict).map(n=>[n.id,nk[n.name]||n.name]));return ak(t.nodes).map(n=>{let{features:o,...i}=n;return{...i,...Object.fromEntries(o.map(s=>[r[s.featureid],s.value]))}})}function ok(e){let t={},r=e.trim(),n=r.startsWith("{")&&r.endsWith("}")?r.slice(1,-1).trim():r,o=0;for(;o<n.length;){for(;o<n.length&&/\s/.test(n[o]);)o++;if(o>=n.length)break;let i=o;for(;o<n.length&&/\w/.test(n[o]);)o++;if(o>=n.length||n[o]!==" "&&n[o]!=="{"){for(;o<n.length&&n[o]!==",";)o++;o<n.length&&o++;continue}let s=n.slice(i,o).trim();for(;o<n.length&&/\s/.test(n[o]);)o++;if(o>=n.length||n[o]!=="{"){for(;o<n.length&&n[o]!==",";)o++;o<n.length&&o++;continue}let a=o+1,c=1;for(o++;o<n.length&&c>0;)n[o]==="{"?c++:n[o]==="}"&&c--,o++;if(c===0){let l=n.slice(a,o-1).trim();t[s]=l}for(;o<n.length&&n[o]!==",";)o++;o<n.length&&o++}return t}function ik(e){let t=[],r=0;for(;r<e.length;){for(;r<e.length&&/\s/.test(e[r]);)r++;if(r>=e.length)break;if(e[r]==="{"){let n=r+1,o=1;for(r++;r<e.length&&o>0;)e[r]==="{"?o++:e[r]==="}"&&o--,r++;if(o===0){let i=e.slice(n,r-1).trim(),s=sk(i);s&&t.push(s)}}else for(;r<e.length&&e[r]!=="{";)r++}return t}function sk(e){let t=/id\s+(\d+)/.exec(e),r=/name\s+"((?:[^"\\]|\\.)*)"/s.exec(e);if(t&&r){let n=r[1].replace(/\\"/g,'"').replace(/\\\\/g,"\\");return{id:parseInt(t[1],10),name:n}}return null}function ak(e){let t=[],r=0;for(;r<e.length;){for(;r<e.length&&/\s/.test(e[r]);)r++;if(r>=e.length)break;if(e[r]==="{"){let n=r+1,o=1;for(r++;r<e.length&&o>0;)e[r]==="{"?o++:e[r]==="}"&&o--,r++;if(o===0){let i=e.slice(n,r-1).trim(),s=ck(i);s&&t.push(s)}}else for(;r<e.length&&e[r]!=="{";)r++}return t}function ck(e){let t=/id\s+(\d+)/.exec(e),r=/parent\s+(\d+)/.exec(e);if(t){let n={id:parseInt(t[1],10)};r&&(n.parent=parseInt(r[1],10));let o=e.indexOf("features");if(o!==-1){let i=e.indexOf("{",o);if(i!==-1){let s=1,a=i+1;for(;a<e.length&&s>0;)e[a]==="{"?s++:e[a]==="}"&&s--,a++;if(s===0){let c=e.slice(i+1,a-1).trim();n.features=lk(c)}}}return n}return null}function lk(e){let t=[],r=0;for(;r<e.length;){for(;r<e.length&&/\s/.test(e[r]);)r++;if(r>=e.length)break;if(e[r]==="{"){let n=r+1,o=1;for(r++;r<e.length&&o>0;)e[r]==="{"?o++:e[r]==="}"&&o--,r++;if(o===0){let i=e.slice(n,r-1).trim(),s=Ak(i);s&&t.push(s)}}else for(;r<e.length&&e[r]!=="{";)r++}return t}function Ak(e){let t=/featureid\s+(\d+)/.exec(e),r=/value\s+"((?:[^"\\]|\\.)*)"/s.exec(e);if(t&&r){let n=r[1].replace(/\\"/g,'"').replace(/\\\\/g,"\\");return{featureid:parseInt(t[1],10),value:n}}return null}var nk,Zb=p(()=>{nk={$NODE_COLLAPSED:"collapsed",$NODE_COLOR:"color",$LABEL_BG_COLOR:"color","seq-id":"seqId","seq-title":"seqTitle","align-index":"alignIndex","accession-nbr":"accessionNbr","blast-name":"blastName","common-name":"commonName","leaf-count":"leafCount"}});function md(e){return{...e,children:e.children.map(t=>t.children.length?md(t):{children:[t],id:`${t.id}-leafnode`,name:`${t.name}-hidden`})}}var eS=p(()=>{});function gd(e,t){let r=0,n=0,o=0,i=e.length;for(;n<i&&e[n]===o;)n++,o++;for(;r<t;)for(r++,o++;n<i&&e[n]===o;)n++,o++;return o}function tS(e,t){let r=0,n=e.length-1;for(;r<=n;){let i=Math.floor((r+n)/2);if(e[i]===t)return;e[i]<t?r=i+1:n=i-1}return t-r}function uk({seq:e,blanks:t,visibleCol:r}){let n=gd(t,r),o=e.length;if(n<o&&cs(e[n]))return;let i=0;for(let s=0;s<n&&s<o;s++)cs(e[s])||i++;return n<o?i:void 0}function rS({rowName:e,visibleCol:t,rowMap:r,blanks:n}){let o=r.get(e);return o!==void 0?uk({seq:o,visibleCol:t,blanks:n}):void 0}var nS=p(()=>{Bn()});function oS({row:e,seqPos:t}){let r=0,n=0;for(;n<e.length;){if(!cs(e[n])){if(r===t)return n;r++}n++}return t===0?0:n}var iS=p(()=>{Bn()});function sS(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{let t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}function cS(e,t){if(typeof window>"u")return;let r=window.URL,n=document.createElement("a");if(t=t||(e instanceof Blob,"download"),"download"in HTMLAnchorElement.prototype&&!aS){n.download=t,n.rel="noopener",typeof e=="string"?(n.href=e,sS(n)):(n.href=r.createObjectURL(e),setTimeout(()=>{r.revokeObjectURL(n.href)},4e4),setTimeout(()=>{sS(n)},0));return}if(typeof e=="string"){window.open(e,"_blank");return}let o=/constructor/i.test(window.HTMLElement?.toString()??"")||!!window.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||o||aS)&&typeof FileReader<"u"){let s=new FileReader;s.onloadend=()=>{let a=s.result;a=i?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),window.open(a,"_blank")},s.readAsDataURL(e)}else{let s=r.createObjectURL(e);window.open(s,"_blank"),setTimeout(()=>{r.revokeObjectURL(s)},4e4)}}var aS,lS=p(()=>{aS=typeof navigator<"u"&&navigator.userAgent.includes("Macintosh")&&navigator.userAgent.includes("AppleWebKit")&&!navigator.userAgent.includes("Safari")});var ao,AS,fk,uS,fS=p(()=>{ao=d(b(),1),AS=d(G(),1),fk=(0,AS.observer)(({model:e})=>{let{scrollX:t,msaAreaWidth:r,minimapHeight:n,colWidth:o,numColumns:i}=e,s=12,a=n-12,c=r/i/o,l=-t,A=l+r,u=l*c,f=A*c,m="rgb(66, 119, 127)",g=.3;return ao.default.createElement(ao.default.Fragment,null,ao.default.createElement("rect",{x:0,y:0,width:r,height:s,stroke:"#555",fill:"none"}),ao.default.createElement("rect",{x:Math.max(0,u),y:0,width:f-u,height:s,fill:m,fillOpacity:g,stroke:"#555"}),ao.default.createElement("g",{transform:`translate(0 ${s})`},ao.default.createElement("polygon",{fill:m,fillOpacity:g,points:[[f,0],[u,0],[0,a],[r,a]].toString()})))}),uS=fk});var gS={};rt(gS,{Context:()=>Cd});function dS(e){return!e||typeof e=="string"?e:e+""}function wr(e,t){let r=Object.keys(t);for(let n of r)e=e.replace(new RegExp("\\{"+n+"\\}","gi"),t[n]);return e}function pd(e){if(!e)throw new Error("cannot create a random attribute name for an undefined object");let t="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",r="";do{r="";for(let n=0;n<12;n++)r+=t[Math.floor(Math.random()*t.length)]}while(e[r]);return r}function dk(e,t=10){let r={},n=e.split(",");for(let o=0;o<n.length;o+=2){let i="&"+n[o+1]+";",s=parseInt(n[o],t);r[i]="&#"+s+";"}return r["\\xa0"]="&#160;",r}function mk(e){let t={left:"start",right:"end",center:"middle",start:"start",end:"end"};return t[e]||t.start}function gk(e){let t={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return t[e]||t.alphabetic}var mS,gs,ps,hd,Cd,pS=p(()=>{mS=dk("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),gs={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},ps=class{__root;__ctx;constructor(t,r){this.__root=t,this.__ctx=r}addColorStop(t,r){let n=this.__ctx.__createElement("stop");if(n.setAttribute("offset",String(t)),dS(r).includes("rgba")){let i=/rgba\(\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(r);i&&(n.setAttribute("stop-color",wr("rgb({r},{g},{b})",{r:i[1],g:i[2],b:i[3]})),n.setAttribute("stop-opacity",i[4]))}else n.setAttribute("stop-color",dS(r));this.__root.appendChild(n)}},hd=class{__root;__ctx;constructor(t,r){this.__root=t,this.__ctx=r}},Cd=class{width;height;enableMirroring;canvas;__document;__ctx;__canvas;__root;__ids;__defs;__currentElement;__styleStack;__groupStack;__currentDefaultPath;__currentPosition;__transformMatrix;__transformMatrixStack;__currentElementsToStyle;__options;__id;__fontUnderline;__fontHref;strokeStyle;fillStyle;lineCap;lineJoin;miterLimit;lineWidth;globalAlpha;font;shadowColor;shadowOffsetX;shadowOffsetY;shadowBlur;textAlign;textBaseline;lineDash;constructor(t,r){let n={width:500,height:500,enableMirroring:!1},o;typeof t=="number"&&r!==void 0?o={...n,width:t,height:r}:t&&typeof t=="object"?o=t:o=n,this.width=o.width||n.width,this.height=o.height||n.height,this.enableMirroring=o.enableMirroring!==void 0?o.enableMirroring:n.enableMirroring,this.canvas=this,this.__document=o.document||document,o.ctx?this.__ctx=o.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__styleStack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version","1.1"),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",String(this.width)),this.__root.setAttribute("height",String(this.height)),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement),this.__currentDefaultPath="",this.__currentPosition={},this.__transformMatrix=new DOMMatrix,this.resetTransform(),this.__options=o,this.__id=Math.random().toString(16).substring(2,8)}__createElement(t,r={},n){let o=this.__document.createElementNS("http://www.w3.org/2000/svg",t);n&&(o.setAttribute("fill","none"),o.setAttribute("stroke","none"));for(let i of Object.keys(r))o.setAttribute(i,r[i]);return o}__setDefaultStyles(){for(let t of Object.keys(gs))this[t]=gs[t].canvas}__applyStyleState(t){for(let r of Object.keys(t))this[r]=t[r]}__getStyleState(){let t={};for(let r of Object.keys(gs))t[r]=this[r];return t}__applyTransformation(t,r){let{a:n,b:o,c:i,d:s,e:a,f:c}=r||this.getTransform();t.setAttribute("transform",`matrix(${n} ${o} ${i} ${s} ${a} ${c})`)}__applyStyleToCurrentElement(t){let r=this.__currentElement,n=this.__currentElementsToStyle;if(n){r.setAttribute(t,""),r=n.element;for(let i of n.children)i.setAttribute(t,"")}let o=Object.keys(gs);for(let i of o){let s=gs[i],a=this[i];if(s.apply){if(a instanceof hd){if(a.__ctx)for(let c of Array.from(a.__ctx.__defs.childNodes)){let l=c.getAttribute("id");l&&(this.__ids[l]=l,this.__defs.appendChild(c))}r.setAttribute(s.apply,wr("url(#{id})",{id:a.__root.getAttribute("id")}))}else if(a instanceof ps)r.setAttribute(s.apply,wr("url(#{id})",{id:a.__root.getAttribute("id")}));else if(s.apply.includes(t)&&s.svg!==a)if((s.svgAttr==="stroke"||s.svgAttr==="fill")&&a&&a.includes("rgba")){let l=/rgba\(\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(a);if(l){r.setAttribute(s.svgAttr,wr("rgb({r},{g},{b})",{r:l[1],g:l[2],b:l[3]}));let A=Number(l[4]),u=this.globalAlpha;u!=null&&(A*=u),r.setAttribute(s.svgAttr+"-opacity",String(A))}}else{let c=s.svgAttr,l=a;if(i==="globalAlpha"){if(c=t+"-"+s.svgAttr,r.getAttribute(c))continue}else if(i==="lineWidth"){let A=this.__getTransformScale();l=a*Math.max(A.x,A.y)}r.setAttribute(c,l)}}}}__closestGroupOrSvg(t){return t=t||this.__currentElement,t.nodeName==="g"||t.nodeName==="svg"?t:this.__closestGroupOrSvg(t.parentNode)}getSerializedSvg(t){let r=new XMLSerializer().serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(r)&&(r=r.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),t)for(let o of Object.keys(mS)){let i=new RegExp(o,"gi");i.test(r)&&(r=r.replace(i,mS[o]))}return r}getSvg(){return this.__root}save(){let t=this.__createElement("g"),r=this.__closestGroupOrSvg();this.__groupStack.push(r),r.appendChild(t),this.__currentElement=t;let n=this.__getStyleState();this.__styleStack.push(n),this.__transformMatrixStack||(this.__transformMatrixStack=[]),this.__transformMatrixStack.push(this.getTransform())}restore(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=void 0,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);let t=this.__styleStack.pop();this.__applyStyleState(t),this.__transformMatrixStack&&this.__transformMatrixStack.length>0&&this.setTransform(this.__transformMatrixStack.pop())}beginPath(){this.__currentDefaultPath="",this.__currentPosition={};let t=this.__createElement("path",{},!0);this.__closestGroupOrSvg().appendChild(t),this.__currentElement=t}__applyCurrentDefaultPath(){let t=this.__currentElement;t.nodeName==="path"&&t.setAttribute("d",this.__currentDefaultPath)}__addPathCommand(t){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=t}moveTo(t,r){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.__currentPosition={x:t,y:r},this.__addPathCommand(wr("M {x} {y}",{x:this.__matrixTransform(t,r).x,y:this.__matrixTransform(t,r).y}))}closePath(){this.__currentDefaultPath&&this.__addPathCommand("Z")}lineTo(t,r){this.__currentPosition={x:t,y:r},this.__currentDefaultPath.includes("M")?this.__addPathCommand(wr("L {x} {y}",{x:this.__matrixTransform(t,r).x,y:this.__matrixTransform(t,r).y})):this.__addPathCommand(wr("M {x} {y}",{x:this.__matrixTransform(t,r).x,y:this.__matrixTransform(t,r).y}))}bezierCurveTo(t,r,n,o,i,s){this.__currentPosition={x:i,y:s},this.__addPathCommand(wr("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:this.__matrixTransform(t,r).x,cp1y:this.__matrixTransform(t,r).y,cp2x:this.__matrixTransform(n,o).x,cp2y:this.__matrixTransform(n,o).y,x:this.__matrixTransform(i,s).x,y:this.__matrixTransform(i,s).y}))}quadraticCurveTo(t,r,n,o){this.__currentPosition={x:n,y:o},this.__addPathCommand(wr("Q {cpx} {cpy} {x} {y}",{cpx:this.__matrixTransform(t,r).x,cpy:this.__matrixTransform(t,r).y,x:this.__matrixTransform(n,o).x,y:this.__matrixTransform(n,o).y}))}stroke(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")}fill(){this.__currentElement.nodeName==="path"&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")}rect(t,r,n,o){this.__currentElement.nodeName!=="path"&&this.beginPath(),this.moveTo(t,r),this.lineTo(t+n,r),this.lineTo(t+n,r+o),this.lineTo(t,r+o),this.lineTo(t,r),this.closePath()}__clearCanvas(){let t=this.__root.childNodes[1];this.__root.removeChild(t),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement),this.__groupStack=[]}fillRect(t,r,n,o){let{a:i,b:s,c:a,d:c,e:l,f:A}=this.getTransform();JSON.stringify([i,s,a,c,l,A])===JSON.stringify([1,0,0,1,0,0])&&t===0&&r===0&&n===this.width&&o===this.height&&this.__clearCanvas();let u=this.__createElement("rect",{x:t,y:r,width:n,height:o},!0);this.__closestGroupOrSvg().appendChild(u),this.__currentElement=u,this.__applyTransformation(u),this.__applyStyleToCurrentElement("fill")}strokeRect(t,r,n,o){let i=this.__createElement("rect",{x:t,y:r,width:n,height:o},!0);this.__closestGroupOrSvg().appendChild(i),this.__currentElement=i,this.__applyTransformation(i),this.__applyStyleToCurrentElement("stroke")}clearRect(t,r,n,o){let{a:i,b:s,c:a,d:c,e:l,f:A}=this.getTransform();if(JSON.stringify([i,s,a,c,l,A])===JSON.stringify([1,0,0,1,0,0])&&t===0&&r===0&&n===this.width&&o===this.height){this.__clearCanvas();return}let u=this.__createElement("rect",{x:t,y:r,width:n,height:o,fill:"#FFFFFF"},!0);this.__applyTransformation(u),this.__closestGroupOrSvg().appendChild(u)}createLinearGradient(t,r,n,o){let i=this.__createElement("linearGradient",{id:pd(this.__ids),x1:t+"px",x2:n+"px",y1:r+"px",y2:o+"px",gradientUnits:"userSpaceOnUse"});return this.__defs.appendChild(i),new ps(i,this)}createRadialGradient(t,r,n,o,i,s){let a=this.__createElement("radialGradient",{id:pd(this.__ids),cx:o+"px",cy:i+"px",r:s+"px",fx:t+"px",fy:r+"px",gradientUnits:"userSpaceOnUse"});return this.__defs.appendChild(a),new ps(a,this)}__applyText(t,r,n,o){let i=document.createElement("span");i.setAttribute("style","font:"+this.font);let s=i.style,a=this.__closestGroupOrSvg(),c=this.__createElement("text",{"font-family":s.fontFamily,"font-size":s.fontSize,"font-style":s.fontStyle,"font-weight":s.fontWeight,"text-decoration":this.__fontUnderline,x:r,y:n,"text-anchor":mk(this.textAlign),"dominant-baseline":gk(this.textBaseline)},!0);c.appendChild(this.__document.createTextNode(t)),this.__currentElement=c,this.__applyTransformation(c),this.__applyStyleToCurrentElement(o);let l=c;if(this.__fontHref){let A=this.__createElement("a");A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",this.__fontHref),A.appendChild(c),l=A}a.appendChild(l)}fillText(t,r,n){this.__applyText(t,r,n,"fill")}strokeText(t,r,n){this.__applyText(t,r,n,"stroke")}measureText(t){return this.__ctx.font=this.font,this.__ctx.measureText(t)}arc(t,r,n,o,i,s){if(o===i)return;o=o%(2*Math.PI),i=i%(2*Math.PI),o===i&&(i=(i+2*Math.PI-.001*(s?-1:1))%(2*Math.PI));let a=t+n*Math.cos(i),c=r+n*Math.sin(i),l=t+n*Math.cos(o),A=r+n*Math.sin(o),u=s?0:1,f=0,m=i-o;m<0&&(m+=2*Math.PI),s?f=m>Math.PI?0:1:f=m>Math.PI?1:0;let g=Math.hypot(this.__transformMatrix.a,this.__transformMatrix.b),h=Math.hypot(this.__transformMatrix.c,this.__transformMatrix.d);this.lineTo(l,A),this.__addPathCommand(wr("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:n*g,ry:n*h,xAxisRotation:0,largeArcFlag:f,sweepFlag:u,endX:this.__matrixTransform(a,c).x,endY:this.__matrixTransform(a,c).y})),this.__currentPosition={x:a,y:c}}clip(){let t=this.__closestGroupOrSvg(),r=this.__createElement("clipPath"),n=pd(this.__ids),o=this.__createElement("g");this.__applyCurrentDefaultPath(),t.removeChild(this.__currentElement),r.setAttribute("id",n),r.appendChild(this.__currentElement),this.__defs.appendChild(r),t.setAttribute("clip-path",wr("url(#{id})",{id:n})),t.appendChild(o),this.__currentElement=o}setLineDash(t){t&&t.length>0?this.lineDash=t.join(","):this.lineDash=null}setTransform(t,r,n,o,i,s){t instanceof DOMMatrix?this.__transformMatrix=new DOMMatrix([t.a,t.b,t.c,t.d,t.e,t.f]):this.__transformMatrix=new DOMMatrix([t,r,n,o,i,s])}getTransform(){let{a:t,b:r,c:n,d:o,e:i,f:s}=this.__transformMatrix;return new DOMMatrix([t,r,n,o,i,s])}resetTransform(){this.setTransform(1,0,0,1,0,0)}scale(t,r){if(r===void 0&&(r=t),isNaN(t)||isNaN(r)||!isFinite(t)||!isFinite(r))return;let n=this.getTransform().scale(t,r);this.setTransform(n)}rotate(t){let r=this.getTransform().multiply(new DOMMatrix([Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0]));this.setTransform(r)}translate(t,r){let n=this.getTransform().translate(t,r);this.setTransform(n)}transform(t,r,n,o,i,s){let a=this.getTransform().multiply(new DOMMatrix([t,r,n,o,i,s]));this.setTransform(a)}__matrixTransform(t,r){return new DOMPoint(t,r).matrixTransform(this.__transformMatrix)}__getTransformScale(){return{x:Math.hypot(this.__transformMatrix.a,this.__transformMatrix.b),y:Math.hypot(this.__transformMatrix.c,this.__transformMatrix.d)}}__getTransformRotation(){return Math.atan2(this.__transformMatrix.b,this.__transformMatrix.a)}drawFocusRing(){}createImageData(){}putImageData(){}globalCompositeOperation(){}drawImage(){}createPattern(){return null}}});var IS={};rt(IS,{renderToSvg:()=>pk});async function pk(e,t){await(0,ES.when)(()=>!!e.dataInitialized);let{width:r,height:n,scrollX:o,scrollY:i,totalTrackAreaHeight:s}=e,{exportType:a,theme:c,includeMinimap:l,includeTracks:A}=t,u=A?s:0;if(a==="entire")return hS({width:e.totalWidth+e.treeAreaWidth,height:e.totalHeight+u,contentHeight:e.totalHeight,trackHeight:u,theme:c,model:e,offsetY:0,offsetX:0,includeMinimap:l,includeTracks:A});if(a==="viewport")return hS({width:r,height:n+(l?e.minimapHeight:0)+u,contentHeight:n,trackHeight:u,theme:c,model:e,offsetY:-i,offsetX:-o,includeMinimap:l,includeTracks:A});throw new Error("unknown export type")}async function hS({width:e,height:t,contentHeight:r,trackHeight:n,offsetX:o,offsetY:i,theme:s,model:a,includeMinimap:c,includeTracks:l}){let{Context:A}=await Promise.resolve().then(()=>(pS(),gS)),u=c?Ek:xk;return(0,CS.renderToStaticMarkup)(ce.default.createElement(Ik,{width:e,height:t},ce.default.createElement(u,{model:a},l&&n>0?ce.default.createElement(Ck,{Context:A,model:a,theme:s,offsetX:o,width:e,trackHeight:n}):null,ce.default.createElement("g",{transform:n>0?`translate(0 ${n})`:void 0},ce.default.createElement(hk,{Context:A,model:a,theme:s,offsetX:o,offsetY:i,width:e,contentHeight:r})))))}function hk({model:e,theme:t,width:r,contentHeight:n,offsetX:o,offsetY:i,Context:s}){let{treeAreaWidth:a,colorScheme:c,id:l}=e,A=`tree-${l}`,u=`msa-${l}`,f=no(c,t),m=new s(r,n),g=new s(r,n);Rc({ctx:g,offsetX:o,offsetY:i,model:e,blockSizeYOverride:n,highResScaleFactorOverride:1});let h=r-a;return Hc({model:e,offsetY:i,ctx:m,theme:t,blockSizeYOverride:n,highResScaleFactorOverride:1}),Pc({model:e,theme:t,offsetY:i,offsetX:o,contrastScheme:f,ctx:g,blockSizeXOverride:h,blockSizeYOverride:n,highResScaleFactorOverride:1}),ce.default.createElement(ce.default.Fragment,null,ce.default.createElement("defs",null,ce.default.createElement("clipPath",{id:A},ce.default.createElement("rect",{x:0,y:0,width:a,height:n}))),ce.default.createElement("defs",null,ce.default.createElement("clipPath",{id:u},ce.default.createElement("rect",{x:0,y:0,width:h,height:n}))),ce.default.createElement("g",{clipPath:`url(#${A})`,dangerouslySetInnerHTML:{__html:m.getSvg().innerHTML}}),ce.default.createElement("g",{clipPath:`url(#${u})`,transform:`translate(${a} 0)`,dangerouslySetInnerHTML:{__html:g.getSvg().innerHTML}}))}function Ck({model:e,theme:t,width:r,trackHeight:n,offsetX:o,Context:i}){let{treeAreaWidth:s,colorScheme:a,id:c}=e,l=`tracks-${c}`,A=no(a,t),u=r-s,f=new i(u,n);return Qb({model:e,ctx:f,offsetX:o,contrastScheme:A,blockSizeXOverride:u,highResScaleFactorOverride:1}),ce.default.createElement("g",{transform:`translate(${s} 0)`},ce.default.createElement("defs",null,ce.default.createElement("clipPath",{id:l},ce.default.createElement("rect",{x:0,y:0,width:u,height:n}))),ce.default.createElement("g",{clipPath:`url(#${l})`,dangerouslySetInnerHTML:{__html:f.getSvg().innerHTML}}))}function Ek({model:e,children:t}){let{minimapHeight:r,treeAreaWidth:n}=e;return ce.default.createElement(ce.default.Fragment,null,ce.default.createElement("g",{transform:`translate(${n} 0)`},ce.default.createElement(uS,{model:e})),ce.default.createElement("g",{transform:`translate(0 ${r})`},t))}function Ik({width:e,height:t,children:r}){return ce.default.createElement("svg",{width:e,height:t,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:[0,0,e,t].toString()},r)}function xk({children:e}){return e}var ce,CS,ES,xS=p(()=>{ce=d(b(),1),CS=d(ie(),1),ES=d(jr(),1);fS();_f();kf();zc();Jc();Bn()});function yk(){return z.types.compose(Ub(),Wb(),jb(),z.types.model("MsaView",{id:co.ElementId,showDomains:!1,hideGaps:!0,allowedGappyness:100,contrastLettering:!0,subFeatureRows:!1,type:z.types.literal("MsaView"),drawMsaLetters:!0,height:z.types.optional(z.types.number,550),rowHeight:16,scrollY:0,scrollX:0,colWidth:12,treeFilehandle:z.types.maybe(co.FileLocation),msaFilehandle:z.types.maybe(co.FileLocation),treeMetadataFilehandle:z.types.maybe(co.FileLocation),gffFilehandle:z.types.maybe(co.FileLocation),currentAlignment:0,collapsed:z.types.array(z.types.string),collapsedLeaves:z.types.array(z.types.string),showOnly:z.types.maybe(z.types.string),turnedOffTracks:z.types.map(z.types.boolean),data:z.types.optional(Ob(),{tree:"",msa:"",treeMetadata:""}),featureFilters:z.types.map(z.types.boolean),relativeTo:z.types.maybe(z.types.string)})).volatile(()=>({headerHeight:0,status:void 0,highResScaleFactor:2,showZoomStar:(0,we.localStorageGetBoolean)(_S,!1),loadingMSA:!1,loadingTree:!1,volatileWidth:void 0,resizeHandleWidth:5,blockSize:500,mouseRow:void 0,mouseCol:void 0,mouseClickRow:void 0,mouseClickCol:void 0,hoveredTreeNode:void 0,highlightedColumns:void 0,nref:0,minimapHeight:56,conservationTrackHeight:40,marginLeft:20,error:void 0,annotPos:void 0,interProAnnotations:void 0})).actions(e=>({drawRelativeTo(t){e.relativeTo=t},setHideGaps(t){e.hideGaps=t},setAllowedGappyness(t){e.allowedGappyness=t},setContrastLettering(t){e.contrastLettering=t},setLoadingMSA(t){e.loadingMSA=t},setShowZoomStar(t){e.showZoomStar=t},setLoadingTree(t){e.loadingTree=t},setWidth(t){e.volatileWidth=t},setHeight(t){e.height=t},setError(t){e.error=t},setMousePos(t,r){e.mouseCol=t,e.mouseRow=r},setHoveredTreeNode(t){if(!t){e.hoveredTreeNode=void 0;return}let r=e.hierarchy.find(o=>o.data.id===t);if(!r){e.hoveredTreeNode=void 0;return}let n=r.leaves().map(o=>o.data.name);e.hoveredTreeNode={nodeId:t,descendantNames:n}},setHighlightedColumns(t){e.highlightedColumns=t},setShowDomains(t){e.showDomains=t},setSubFeatureRows(t){e.subFeatureRows=t},setMouseClickPos(t,r){e.mouseClickCol=t,e.mouseClickRow=r},setRowHeight(t){e.rowHeight=t},setColWidth(t){e.colWidth=t},setScrollY(t){e.scrollY=t},setCurrentAlignment(t){e.currentAlignment=t},toggleCollapsed(t){e.collapsed.includes(t)?e.collapsed.remove(t):e.collapsed.push(t)},toggleCollapsedLeaf(t){e.collapsedLeaves.includes(t)?e.collapsedLeaves.remove(t):e.collapsedLeaves.push(t)},setShowOnly(t){e.showOnly=t},setData(t){e.data=(0,z.cast)(t)},setMSAFilehandle(t){e.msaFilehandle=t},setTreeFilehandle(t){e.treeFilehandle=t},setGFFFilehandle(t){e.gffFilehandle=t},setMSA(t){e.data.setMSA(t)},setTree(t){e.data.setTree(t)},setTreeMetadata(t){e.data.setTreeMetadata(t)}})).views(e=>({get hideGapsEffective(){return e.hideGaps&&(e.collapsed.length>0||e.collapsedLeaves.length>0||e.allowedGappyness<100)},get realAllowedGappyness(){return this.hideGapsEffective?e.allowedGappyness:100},get actuallyShowDomains(){return e.showDomains&&!!e.interProAnnotations},get viewInitialized(){return e.volatileWidth!==void 0},get width(){if(e.volatileWidth===void 0)throw new Error("not initialized");return e.volatileWidth}})).views(e=>({extraViewMenuItems(){return[]},get colorScheme(){return ai[e.colorSchemeName]},get header(){return this.MSA?.getHeader()||{}},get alignmentNames(){return this.MSA?.alignmentNames||[]},get noTree(){return!!this.tree.noTree},get noDomains(){return!e.interProAnnotations},menuItems(){return[]},get treeMetadata(){return e.data.treeMetadata?JSON.parse(e.data.treeMetadata):{}},get MSA(){let t=e.data.msa;return t?pi(t)?new vn(t,e.currentAlignment):nn.sniff(t)?new nn(t):t.startsWith(">")?new Mn(t):t.startsWith("SEQ")?new Qn(t):new Sn(t):null},get numColumns(){return(this.MSA?.getWidth()||0)-this.blanks.length},get tree(){let t=e.data.tree;return md(t?di(t.startsWith("BioTreeContainer")?Fb(Xb(t)):so(t.startsWith("SEQ")?Vc(t).tree:t)):this.MSA?.getTree()||{noTree:!0,children:[],id:"empty",name:"empty"})},get rowNames(){return this.leaves.map(t=>t.data.name)},get mouseOverRowName(){let{mouseRow:t}=e;return t===void 0?void 0:this.rowNames[t]},get hoveredInsertion(){let{mouseCol:t,mouseRow:r}=e;if(t===void 0||r===void 0)return;let n=this.rowNames[r];if(!n)return;let o=this.insertionPositions.get(n);if(!o)return;let i=o.find(s=>s.pos===t);if(i)return{rowName:n,col:t,letters:i.letters}},get root(){let t=fi(this.tree,r=>r.children).sum(r=>r.children?0:1).sort((r,n)=>Qc(r.data.length||1,n.data.length||1));if(e.showOnly){let r=t.find(n=>n.data.id===e.showOnly);r&&(t=r)}return[...e.collapsed,...e.collapsedLeaves].map(r=>t.find(n=>n.data.id===r)).filter(we.notEmpty).forEach(r=>{Zx(r)}),t},get msaAreaWidth(){return e.width-e.treeAreaWidth},get treeAreaWidthMinusMargin(){return e.treeAreaWidth-e.marginLeft},get blanks(){let{hideGapsEffective:t,realAllowedGappyness:r}=e;if(!t)return[];let n=this.leaves.map(l=>this.MSA?.getRow(l.data.name)).filter(we.notEmpty);if(n.length===0)return[];let o=n[0].length,i=n.length,s=Math.ceil(r/100*i),a=new Uint16Array(o);for(let l=0;l<i;l++){let A=n[l];for(let u=0;u<o;u++)A.charCodeAt(u)-45>>>0<=1&&a[u]++}let c=[];for(let l=0;l<o;l++)a[l]>=s&&c.push(l);return c},get blanksSet(){return new Set(this.blanks)},get insertionPositions(){let{hideGapsEffective:t}=e,{blanks:r,rows:n}=this,o=r.length;if(o===0||!t)return new Map;let i=new Map;for(let[s,a]of n){let c=[],l=0,A=0,u=-1,f=[],m=a.length;for(let g=0;g<m;g++)A<o&&r[A]===g?(a.charCodeAt(g)-45>>>0<=1||(u===l?f.push(a[g]):(f.length>0&&c.push({pos:u,letters:f.join("")}),u=l,f=[a[g]])),A++):l++;f.length>0&&c.push({pos:u,letters:f.join("")}),c.length>0&&i.set(s,c)}return i},get rows(){let t=this.MSA;return this.leaves.map(r=>[r.data.name,t?.getRow(r.data.name)]).filter(r=>!!r[1])},get numRows(){return this.rows.length},get rowMap(){return new Map(this.rows)},get columns(){return Object.fromEntries(this.rows.map((t,r)=>[t[0],this.columns2d[r]]))},get columns2d(){let{hideGapsEffective:t}=e;return this.rows.map(r=>r[1]).map(r=>t?gf(this.blanks,r):r)},get fontSize(){return Math.min(Math.max(6,e.rowHeight-3),18)},get colStats(){let t=[],r=this.columns2d;for(let n of r)for(let o=0;o<n.length;o++){let i=t[o]||{},s=n[o];i[s]||(i[s]=0),i[s]++,t[o]=i}return t},get colStatsSums(){return this.colStats.map(t=>(0,we.sum)(Object.values(t)))},get sequenceType(){let t=new Set;for(let s of this.colStats)for(let a of Object.keys(s)){let c=a.toUpperCase();c!=="-"&&c!=="."&&t.add(c)}let r=new Set(["A","C","G","T","N"]),n=new Set(["A","C","G","U","N"]),o=[...t].every(s=>r.has(s)),i=[...t].every(s=>n.has(s));return o&&!t.has("U")?"dna":i&&!t.has("T")?"rna":"amino"},get colConsensus(){let{colStats:t,colStatsSums:r}=this;return t.map((n,o)=>{let i=r[o],s=0,a="";for(let l in n){let A=n[l];A>s&&l!=="-"&&l!=="."&&(s=A,a=l)}let c=s/i;return{letter:a,color:c>.4?`hsl(240, 30%, ${100*Math.max(1-c/3,.3)}%)`:void 0}})},get colClustalX(){let{colStats:t,colStatsSums:r}=this;return t.map((n,o)=>{let i=r[o],s={},a=n.W??0,c=n.L??0,l=n.V??0,A=n.I??0,u=n.M??0,f=n.A??0,m=n.F??0,g=n.C??0,h=n.H??0,E=n.P??0,C=n.R??0,x=n.K??0,y=n.Q??0,w=n.E??0,B=n.D??0,S=n.T??0,M=n.S??0,v=n.G??0,_=n.Y??0,O=n.N??0,D=a+c+l+A+u+f+m+g+h+E+_,T=x+C,V=y+w,J=w+B,Be=S+M;return D/i>.6&&(s.W="rgb(128,179,230)",s.L="rgb(128,179,230)",s.V="rgb(128,179,230)",s.A="rgb(128,179,230)",s.I="rgb(128,179,230)",s.M="rgb(128,179,230)",s.F="rgb(128,179,230)",s.C="rgb(128,179,230)"),(T/i>.6||x/i>.8||C/i>.8||y/i>.8)&&(s.K="#d88",s.R="#d88"),(T/i>.6||V/i>.5||w/i>.8||y/i>.8||B/i>.8)&&(s.E="rgb(192, 72, 192)"),(T/i>.6||J/i>.5||x/i>.8||C/i>.8||y/i>.8)&&(s.D="rgb(204, 77, 204)"),(O/i>.5||_/i>.85)&&(s.N="#8f8"),(T/i>.6||V/i>.6||y/i>.85||w/i>.85||x/i>.85||C/i>.85)&&(s.Q="#8f8"),(D/i>.6||Be/i>.5||M/i>.85||S/i>.85)&&(s.S="rgb(26,204,26)",s.T="rgb(26,204,26)"),g/i>.85&&(s.C="rgb(240, 128, 128)"),v/i>0&&(s.G="rgb(240, 144, 72)"),E/i>0&&(s.P="rgb(204, 204, 0)"),(D/i>.6||a/i>.85||_/i>.85||f/i>.85||g/i>.85||E/i>.85||y/i>.85||m/i>.85||h/i>.85||A/i>.85||c/i>.85||u/i>.85||l/i>.85)&&(s.H="rgb(26, 179, 179)",s.Y="rgb(26, 179, 179)"),s})},get conservation(){let{colStats:t,colStatsSums:r,sequenceType:n}=this,i=Math.log2(n==="amino"?20:4);return t.map((s,a)=>{let c=r[a];if(!c)return 0;let l=(s["-"]||0)+(s["."]||0),A=c-l;if(A===0)return 0;let u={};for(let h of Object.keys(s)){if(h==="-"||h===".")continue;let E=h.toUpperCase();u[E]=(u[E]||0)+s[h]}let f=0;for(let h of Object.keys(u)){let E=u[h]/A;E>0&&(f-=E*Math.log2(E))}let m=l/c;return Math.max(0,1-f/i)*(1-m)})},get hierarchy(){let t=this.root;return Hf().size([this.totalHeight,e.treeWidth]).separation(()=>1)(t),pf(t,t.data.length=0,e.treeWidth/hf(t)),t},get totalHeight(){return this.root.leaves().length*e.rowHeight},get leaves(){return this.hierarchy.leaves()},get allBranchesLength0(){return this.hierarchy.links().every(t=>!t.source.data.length)},get showBranchLenEffective(){return this.allBranchesLength0?!1:e.showBranchLen}})).views(e=>({get totalWidth(){return e.numColumns*e.colWidth}})).views(e=>({get dataInitialized(){return(e.data.msa||e.data.tree)&&!e.error},get blocksX(){return bb({viewportWidth:e.msaAreaWidth,viewportX:-e.scrollX,blockSize:e.blockSize,mapWidth:e.totalWidth})},get blocksY(){return Bb({viewportHeight:e.height,viewportY:-e.scrollY,blockSize:e.blockSize,mapHeight:e.totalHeight})}})).views(e=>({get blocks2d(){let t=[];for(let r of e.blocksY)for(let n of e.blocksX)t.push([n,r]);return t},get isLoading(){return e.loadingMSA||e.loadingTree},get maxScrollX(){return Math.min(-e.totalWidth+(e.msaAreaWidth-100),0)},get showMsaLetters(){return e.drawMsaLetters&&e.rowHeight>=5&&e.colWidth>e.rowHeight/2},get showTreeText(){return e.drawLabels&&e.rowHeight>=5}})).actions(e=>({setDrawMsaLetters(t){e.drawMsaLetters=t},calculateNeighborJoiningTreeFromMSA(){if(e.rows.length<2)throw new Error("Need at least 2 sequences to build a tree");let t=zb(e.rows);e.setTree(t)},resetZoom(){e.setColWidth(12),e.setRowHeight(16)},zoomOutHorizontal(){e.colWidth=Math.max(1,Math.floor(e.colWidth*.75)),e.scrollX=(0,we.clamp)(e.scrollX,e.maxScrollX,0)},zoomInHorizontal(){e.colWidth=Math.ceil(e.colWidth*1.5),e.scrollX=(0,we.clamp)(e.scrollX,e.maxScrollX,0)},zoomInVertical(){e.rowHeight=Math.ceil(e.rowHeight*1.5)},zoomOutVertical(){e.rowHeight=Math.max(1.5,Math.floor(e.rowHeight*.75))},zoomIn(){(0,jt.transaction)(()=>{e.colWidth=Math.ceil(e.colWidth*1.5),e.rowHeight=Math.ceil(e.rowHeight*1.5),e.scrollX=(0,we.clamp)(e.scrollX,e.maxScrollX,0)})},zoomOut(){(0,jt.transaction)(()=>{e.colWidth=Math.max(1,Math.floor(e.colWidth*.75)),e.rowHeight=Math.max(1.5,Math.floor(e.rowHeight*.75)),e.scrollX=(0,we.clamp)(e.scrollX,e.maxScrollX,0)})},setInterProAnnotations(t){e.interProAnnotations=t},doScrollY(t){e.scrollY=(0,we.clamp)(e.scrollY+t,-e.totalHeight+10,0)},doScrollX(t){this.setScrollX(e.scrollX+t)},setScrollX(t){e.scrollX=(0,we.clamp)(t,e.maxScrollX,0)},toggleTrack(t){e.turnedOffTracks.has(t)?e.turnedOffTracks.delete(t):e.turnedOffTracks.set(t,!0)},setStatus(t){e.status=t}})).views(e=>({get labelsWidth(){let t=0,{rowHeight:r,leaves:n,treeMetadata:o,fontSize:i}=e;if(r>5)for(let s of n)t=Math.max(Pb(o[s.data.name]?.genome||s.data.name,i),t);return t},get secondaryStructureConsensus(){return e.MSA?.secondaryStructureConsensus},get seqConsensus(){return e.MSA?.seqConsensus},get adapterTrackModels(){let{rowHeight:t,MSA:r,hideGapsEffective:n,blanks:o}=e;return r?.tracks.filter(i=>i.data).map(i=>({model:{...i,data:n?gf(o,i.data):i.data,height:t},ReactComponent:_b}))||[]},get tracks(){let t={model:{id:"conservation",name:"Conservation",height:e.conservationTrackHeight},ReactComponent:vb};return[...this.adapterTrackModels,t]},get turnedOnTracks(){return this.tracks.filter(t=>!e.turnedOffTracks.has(t.model.id))},get showHorizontalScrollbar(){return e.msaAreaWidth<e.totalWidth},get rowNamesSet(){return new Map(e.rowNames.map((t,r)=>[t,r]))},visibleColToRowLetter(t,r){let{rowMap:n,blanks:o}=e;return n.get(t)?.[gd(o,r)]},visibleColToSeqPos(t,r){return rS({rowName:t,visibleCol:r,rowMap:e.rowMap,blanks:e.blanks})},visibleColToSeqPosOneBased(t,r){let n=this.visibleColToSeqPos(t,r);return n!==void 0?n+1:void 0},globalColToVisibleCol(t){let{blanks:r,hideGapsEffective:n}=e;return n?tS(r,t):t},seqPosToGlobalCol(t,r){let{rows:n}=e,o=this.rowNamesSet.get(t);return o!==void 0&&n[o]?oS({row:n[o][1],seqPos:r}):0},seqPosToVisibleCol(t,r){let n=this.seqPosToGlobalCol(t,r);return this.globalColToVisibleCol(n)}})).views(e=>({get msaAreaHeight(){return e.height-(e.showHorizontalScrollbar?e.minimapHeight:0)-e.headerHeight},get totalTrackAreaHeight(){return(0,we.sum)(e.turnedOnTracks.map(t=>t.model.height))},get tidyInterProAnnotationTypes(){let t=new Map;for(let r of this.tidyInterProAnnotations)t.set(r.accession,r);return t},get tidyInterProAnnotations(){let t=[],{interProAnnotations:r}=e;if(r)for(let[n,o]of Object.entries(r))for(let{signature:i,locations:s}of o.matches){let{entry:a}=i;if(a){let{name:c,accession:l,description:A}=a;for(let{start:u,end:f}of s)t.push({id:n,name:c,accession:l,description:A,start:u,end:f})}}return t.toSorted((n,o)=>Cf(o)-Cf(n))},get tidyFilteredInterProAnnotations(){return this.tidyInterProAnnotations.filter(t=>e.featureFilters.get(t.accession))},get tidyFilteredGatheredInterProAnnotations(){return(0,we.groupBy)(this.tidyFilteredInterProAnnotations,t=>t.id)}})).views(e=>({get showVerticalScrollbar(){return e.msaAreaHeight<e.totalHeight}})).views(e=>({get verticalScrollbarWidth(){return e.showVerticalScrollbar?20:0},get fillPalette(){return Nb([...e.tidyInterProAnnotationTypes.keys()])},get strokePalette(){return Object.fromEntries(Object.entries(this.fillPalette).map(([t,r])=>[t,Mt(r).darken(.1).toHex()]))},getRowData(t){return{data:e.MSA?.getRowData(t),treeMetadata:e.treeMetadata[t]}}})).actions(e=>({setHeaderHeight(t){e.headerHeight=t},setConservationTrackHeight(t){e.conservationTrackHeight=t},reset(){e.setData({tree:"",msa:""}),e.resetZoom(),e.setError(void 0),e.setScrollY(0),e.setScrollX(0),e.setCurrentAlignment(0),e.setTreeFilehandle(void 0),e.setMSAFilehandle(void 0)},async exportSVG(t){let{renderToSvg:r}=await Promise.resolve().then(()=>(xS(),IS)),n=await r(e,t),o=new Blob([n],{type:"image/svg+xml"});cS(o,"image.svg")},incrementRef(){e.nref++},initFilter(t){e.featureFilters.get(t)===void 0&&e.featureFilters.set(t,!0)},setFilter(t,r){e.featureFilters.set(t,r)},fit(){e.rowHeight=e.msaAreaHeight/e.numRows,e.colWidth=e.msaAreaWidth/e.numColumns,e.scrollX=0,e.scrollY=0},fitVertically(){e.rowHeight=e.msaAreaHeight/e.numRows,e.scrollY=0},fitHorizontally(){e.colWidth=e.msaAreaWidth/e.numColumns,e.scrollX=0},afterCreate(){(0,z.addDisposer)(e,(0,jt.autorun)(()=>{for(let t of e.tidyInterProAnnotationTypes.keys())this.initFilter(t)})),(0,z.addDisposer)(e,(0,jt.autorun)(()=>{(0,we.localStorageSetBoolean)(_S,e.showZoomStar)})),(0,z.addDisposer)(e,(0,jt.autorun)(async()=>{let{treeFilehandle:t}=e;if(t)try{e.setLoadingTree(!0),e.setTree(await(0,we.fetchAndMaybeUnzipText)((0,hs.openLocation)(t))),t.locationType==="BlobLocation"&&e.setTreeFilehandle(void 0)}catch(r){console.error(r),e.setError(r)}finally{e.setLoadingTree(!1)}})),(0,z.addDisposer)(e,(0,jt.autorun)(async()=>{let{treeMetadataFilehandle:t}=e;if(t)try{e.setTreeMetadata(await(0,we.fetchAndMaybeUnzipText)((0,hs.openLocation)(t)))}catch(r){console.error(r),e.setError(r)}})),(0,z.addDisposer)(e,(0,jt.autorun)(async()=>{let{gffFilehandle:t}=e;if(t)try{let r=await(0,we.fetchAndMaybeUnzipText)((0,hs.openLocation)(t)),n=Wc(r),o=Kc(n);e.setInterProAnnotations(o),e.setShowDomains(!0),t.locationType==="BlobLocation"&&e.setGFFFilehandle(void 0)}catch(r){console.error(r),e.setError(r)}})),(0,z.addDisposer)(e,(0,jt.autorun)(async()=>{let{msaFilehandle:t}=e;if(t)try{e.setLoadingMSA(!0),e.setError(void 0);let r=await(0,we.fetchAndMaybeUnzipText)((0,hs.openLocation)(t));(0,jt.transaction)(()=>{e.setMSA(r),t.locationType==="BlobLocation"&&e.setMSAFilehandle(void 0)})}catch(r){console.error(r),e.setError(r)}finally{e.setLoadingMSA(!1)}})),(0,z.addDisposer)(e,(0,jt.autorun)(()=>{e.colorSchemeName.includes("dynamic")&&(e.colStats,e.colStatsSums),e.columns})),(0,z.addDisposer)(e,(0,jt.autorun)(async()=>{e.treeWidthMatchesArea&&e.setTreeWidth(Math.max(50,e.treeAreaWidth-e.labelsWidth-10-e.marginLeft))}))}})).postProcessSnapshot(e=>{let t=e,{data:{tree:r,msa:n,treeMetadata:o},showDomains:i,hideGaps:s,allowedGappyness:a,contrastLettering:c,subFeatureRows:l,drawMsaLetters:A,height:u,rowHeight:f,scrollY:m,scrollX:g,colWidth:h,currentAlignment:E,collapsed:C,collapsedLeaves:x,showOnly:y,turnedOffTracks:w,featureFilters:B,relativeTo:S,bgColor:M,colorSchemeName:v,drawLabels:_,labelsAlignRight:O,treeAreaWidth:D,treeWidth:T,treeWidthMatchesArea:V,showBranchLen:J,drawTree:Be,drawNodeBubbles:ht,...Ar}=t;return{...Ar,data:{...e.treeFilehandle?{}:{tree:r},...e.msaFilehandle?{}:{msa:n},...e.treeMetadataFilehandle?{}:{treeMetadata:o}},...i!==!1?{showDomains:i}:{},...s!==!0?{hideGaps:s}:{},...a!==100?{allowedGappyness:a}:{},...c!==!0?{contrastLettering:c}:{},...l!==!1?{subFeatureRows:l}:{},...A!==!0?{drawMsaLetters:A}:{},...u!==550?{height:u}:{},...f!==16?{rowHeight:f}:{},...m!==0?{scrollY:m}:{},...g!==0?{scrollX:g}:{},...h!==12?{colWidth:h}:{},...E!==0?{currentAlignment:E}:{},...C?.length?{collapsed:C}:{},...x?.length?{collapsedLeaves:x}:{},...y!==void 0?{showOnly:y}:{},...w&&Object.keys(w).length>0?{turnedOffTracks:w}:{},...B&&Object.keys(B).length>0?{featureFilters:B}:{},...S!==void 0?{relativeTo:S}:{},...M!==!0?{bgColor:M}:{},...v!==$c?{colorSchemeName:v}:{},..._!==!0?{drawLabels:_}:{},...O!==!1?{labelsAlignRight:O}:{},...D!==400?{treeAreaWidth:D}:{},...T!==300?{treeWidth:T}:{},...V!==!0?{treeWidthMatchesArea:V}:{},...J!==!0?{showBranchLen:J}:{},...Be!==!0?{drawTree:Be}:{},...ht!==!0?{drawNodeBubbles:ht}:{}}})}var we,hs,co,z,jt,_S,xd,kS=p(()=>{we=d(ie(),1),hs=d(TB(),1),co=d(_B(),1),z=d(Lt(),1);bc();mf();ab();jt=d(jr(),1);wb();Sb();Tc();Tb();kb();Xc();Lb();Rb();Gb();Hb();Yb();Vb();Kb();$b();Zb();eS();nS();iS();Bn();lS();_S="msa-showZoomStar";xd=yk});var yd=p(()=>{MB();kS()});var oQ={};rt(oQ,{default:()=>Hk});var le,tQ,rQ,me,nQ,Ok,Hk,iQ=p(()=>{"use strict";le=d(b()),tQ=d(he()),rQ=d(ie()),me=d(N()),nQ=d(G()),Ok=(0,nQ.observer)(function({model:t,handleClose:r}){let n=(0,rQ.getSession)(t),[o,i]=(0,le.useState)(""),[s,a]=(0,le.useState)(0),[c,l]=(0,le.useState)(t.querySeqName),[A,u]=(0,le.useState)(),f=n.views.filter(C=>C.type==="ProteinView"),g=f.find(C=>C.id===o)?.structures??[],h=t.rows.map(C=>C[0]),E=()=>{if(!o){u("Please select a protein view");return}try{t.connectToStructure(o,s,c),r()}catch(C){u(C instanceof Error?C.message:String(C))}};return le.default.createElement(tQ.Dialog,{maxWidth:"sm",title:"Connect to Protein Structure",open:!0,onClose:r},le.default.createElement(me.DialogContent,null,f.length===0?le.default.createElement(me.Typography,{color:"textSecondary"},"No protein views are currently open. Please open a protein structure view first."):le.default.createElement(le.default.Fragment,null,le.default.createElement(me.FormControl,{fullWidth:!0,sx:{mb:2}},le.default.createElement(me.InputLabel,null,"Protein View"),le.default.createElement(me.Select,{value:o,label:"Protein View",onChange:C=>{i(C.target.value),a(0)}},f.map(C=>le.default.createElement(me.MenuItem,{key:C.id,value:C.id},C.displayName??`ProteinView ${C.id}`)))),g.length>1&&le.default.createElement(me.FormControl,{fullWidth:!0,sx:{mb:2}},le.default.createElement(me.InputLabel,null,"Structure"),le.default.createElement(me.Select,{value:s,label:"Structure",onChange:C=>{a(C.target.value)}},g.map((C,x)=>le.default.createElement(me.MenuItem,{key:x,value:x},C.url??`Structure ${x+1}`)))),le.default.createElement(me.FormControl,{fullWidth:!0,sx:{mb:2}},le.default.createElement(me.InputLabel,null,"MSA Row"),le.default.createElement(me.Select,{value:c,label:"MSA Row",onChange:C=>{l(C.target.value)}},h.map(C=>le.default.createElement(me.MenuItem,{key:C,value:C},C)))),A&&le.default.createElement(me.Typography,{color:"error",sx:{mt:1}},A))),le.default.createElement(me.DialogActions,null,le.default.createElement(me.Button,{onClick:r},"Cancel"),le.default.createElement(me.Button,{onClick:E,variant:"contained",disabled:f.length===0||!o},"Connect")))}),Hk=Ok});function Yk({baseUrl:e,rid:t}){return Sd.default.createElement(cQ.Typography,null,"RID ",t," (",Sd.default.createElement(Un,{href:`${e}?CMD=Get&RID=${t}`},"see status"),")")}var Sd,cQ,Qd,lQ=p(()=>{"use strict";Sd=d(b()),cQ=d(N());la();Qd=Yk});function qk({baseUrl:e,rid:t,error:r}){return lr.default.createElement("div",null,t?lr.default.createElement(Qd,{rid:t,baseUrl:e}):null,lr.default.createElement(nl.ErrorMessage,{error:r}))}function jk({baseUrl:e,rid:t,progress:r}){let{classes:n}=fQ();return lr.default.createElement("div",{className:n.loading},t?lr.default.createElement(Qd,{baseUrl:e,rid:t}):null,lr.default.createElement(Md.Typography,null,r))}var lr,nl,Md,AQ,uQ,fQ,Vk,dQ,mQ=p(()=>{"use strict";lr=d(b()),nl=d(he()),Md=d(N()),AQ=d(G()),uQ=d(Ve());lQ();fQ=(0,uQ.makeStyles)()(e=>({margin:{padding:20},loading:{background:e.palette.background.paper}}));Vk=(0,AQ.observer)(function({model:t,baseUrl:r}){let{progress:n,rid:o,error:i,processing:s}=t,{classes:a}=fQ();return lr.default.createElement("div",{className:a.margin},lr.default.createElement(nl.LoadingEllipses,{message:"Running NCBI BLAST",variant:"h5"}),i?lr.default.createElement(qk,{baseUrl:r,rid:o,error:i}):o?lr.default.createElement(jk,{baseUrl:r,rid:o,progress:n}):null,lr.default.createElement(Md.Typography,null,s||"Initializing BLAST query"))}),dQ=Vk});var hQ={};rt(hQ,{default:()=>Kk});var Ci,gQ,pQ,Wk,Kk,CQ=p(()=>{"use strict";Ci=d(b()),gQ=d(he()),pQ=d(G());yd();mQ();Wk=(0,pQ.observer)(function({model:t}){let{blastParams:r,loadingStoredData:n}=t;return Ci.default.createElement("div",null,r?Ci.default.createElement(dQ,{model:t,baseUrl:r.baseUrl}):n?Ci.default.createElement("div",{style:{padding:20}},Ci.default.createElement(gQ.LoadingEllipses,{message:"Loading MSA data",variant:"h6"})):Ci.default.createElement(Of,{model:t}))}),Kk=Wk});var $k={};rt($k,{default:()=>ol});var yQ=d(jd()),Td=d(Fn()),wQ=d(ie()),Dd=d(Lt());$();var Zd=d(R(),1),em=(0,k.createSvgIcon)((0,Zd.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M8 20H4v-4h4zm0-6H4v-4h4zm0-6H4V4h4zm6 12h-4v-4h4zm0-6h-4v-4h4zm0-6h-4V4h4zm6 12h-4v-4h4zm0-6h-4v-4h4zm0-6h-4V4h4z"}),"GridOn");var Am=d(b()),um=d(ie());var Bi=d(b()),cm=d(G());var Al=d(b()),im=d(ie()),ul=d(G());var om=d(Ve()),Ss=(0,om.makeStyles)()({highlight:{height:"100%",background:"rgba(255,255,0,0.2)",border:"1px solid rgba(50,50,0,0.2)",position:"absolute",zIndex:99,textAlign:"center",pointerEvents:"none",overflow:"hidden"}});var RQ=(0,ul.observer)(function({model:e}){let t=(0,im.getSession)(e),{hovered:r,views:n}=t;return!n.some(i=>i.type==="MsaView")||!r||typeof r!="object"||!("hoverPosition"in r)?null:Al.default.createElement(PQ,{model:e,hovered:r})}),PQ=(0,ul.observer)(function({model:e,hovered:t}){let{classes:r}=Ss(),{offsetPx:n}=e,{coord:o,refName:i}=t.hoverPosition,s=e.bpToPx({refName:i,coord:o-1}),a=e.bpToPx({refName:i,coord:o});if(s&&a){let c=Math.max(Math.abs(a.offsetPx-s.offsetPx),4),l=Math.min(s.offsetPx,a.offsetPx)-n;return Al.default.createElement("div",{className:r.highlight,style:{left:l,width:c}})}return null}),sm=RQ;var wi=d(b()),fl=d(ie()),dl=d(G());var GQ=(0,dl.observer)(function({model:t}){let{views:r}=(0,fl.getSession)(t),o=r.find(i=>i.type==="MsaView")?.connectedHighlights;return!o||o.length===0?null:wi.default.createElement(OQ,{model:t,highlights:o})}),OQ=(0,dl.observer)(function({model:e,highlights:t}){let{classes:r}=Ss(),{assemblyManager:n}=(0,fl.getSession)(e),o=n.get(e.assemblyNames[0]),{offsetPx:i}=e;return o?wi.default.createElement(wi.default.Fragment,null,t.map((s,a)=>{let c=o.getCanonicalRefName(s.refName)??s.refName,l=e.bpToPx({refName:c,coord:s.start}),A=e.bpToPx({refName:c,coord:s.end});if(l&&A){let u=Math.max(Math.abs(A.offsetPx-l.offsetPx),4),f=Math.min(l.offsetPx,A.offsetPx)-i;return wi.default.createElement("div",{key:`${s.refName}-${s.start}-${s.end}-${a}`,className:r.highlight,style:{left:f,width:u}})}return null})):null}),am=GQ;var HQ=(0,cm.observer)(function({model:t}){return Bi.default.createElement(Bi.default.Fragment,null,Bi.default.createElement(am,{model:t}),Bi.default.createElement(sm,{model:t}))}),lm=HQ;function ml(e){e.addToExtensionPoint("LinearGenomeView-TracksContainerComponent",(t,{model:r})=>{let{views:n}=(0,um.getSession)(r);return n.some(i=>i.type==="MsaView")?[...t,Am.default.createElement(lm,{key:"highlight_protein_viewer_msaview",model:r})]:t})}var jm=d(gl());var dm=d(Fn());function pl(e){let t=e.getAdapterType("BgzipFastaAdapter");return(0,dm.ConfigurationSchema)("BgzipFastaMsaAdapter",{msaRegex:{type:"string",defaultValue:"_"}},{baseConfiguration:t?.configSchema})}function kl(e){return e.addAdapterType(()=>new jm.AdapterType({name:"BgzipFastaMsaAdapter",configSchema:pl(e),adapterMetadata:{hiddenFromGUI:!0},getAdapterClass:()=>Promise.resolve().then(()=>(qm(),Ym)).then(t=>t.default)}))}var ya=d(ie());$();var Vm=d(R(),1),Wm=(0,k.createSvgIcon)((0,Vm.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var it=d(b()),xh=d(Fn()),yh=d(he()),wh=d(ie()),jn=d(N());var Ct=d(b()),Xs=d(he()),Zs=d(ie()),Jr=d(N()),Ng=d(G()),Lg=d(Ve());function $m({session:e,newViewTitle:t,view:r,feature:n,data:o}){e.addView("MsaView",{type:"MsaView",displayName:t,colWidth:10,rowHeight:12,data:o,connectedViewId:r.id,connectedFeature:n.toJSON()})}var We=d(b(),1),Kl=d(tg(),1);var nt=d(b(),1);var dn={};rt(dn,{ERROR_REVALIDATE_EVENT:()=>o1,FOCUS_EVENT:()=>rg,MUTATE_EVENT:()=>og,RECONNECT_EVENT:()=>ng});var rg=0,ng=1,og=2,o1=3;var ig=Object.prototype.hasOwnProperty;function Ls(e,t){var r,n;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&Ls(e[n],t[n]););return n===-1}if(!r||typeof e=="object"){n=0;for(r in e)if(ig.call(e,r)&&++n&&!ig.call(t,r)||!(r in t)||!Ls(e[r],t[r]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}var fr=new WeakMap,dr=()=>{},Ue=dr(),xo=Object,W=e=>e===Ue,Ft=e=>typeof e=="function",mr=(e,t)=>({...e,...t}),Hs=e=>Ft(e.then),Ll={},Fs={},Jl="undefined",yo=typeof window!=Jl,Ps=typeof document!=Jl,ag=yo&&"Deno"in window,cg=()=>yo&&typeof window.requestAnimationFrame!=Jl,Js=(e,t)=>{let r=fr.get(e);return[()=>!W(t)&&e.get(t)||Ll,n=>{if(!W(t)){let o=e.get(t);t in Fs||(Fs[t]=o),r[5](t,mr(o,n),o||Ll)}},r[6],()=>!W(t)&&t in Fs?Fs[t]:!W(t)&&e.get(t)||Ll]},Pl=!0,i1=()=>Pl,[Gl,Ol]=yo&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[dr,dr],s1=()=>{let e=Ps&&document.visibilityState;return W(e)||e!=="hidden"},a1=e=>(Ps&&document.addEventListener("visibilitychange",e),Gl("focus",e),()=>{Ps&&document.removeEventListener("visibilitychange",e),Ol("focus",e)}),c1=e=>{let t=()=>{Pl=!0,e()},r=()=>{Pl=!1};return Gl("online",t),Gl("offline",r),()=>{Ol("online",t),Ol("offline",r)}},lg={isOnline:i1,isVisible:s1},Ag={initFocus:a1,initReconnect:c1},Us=!nt.default.useId,mn=!yo||ag,Ul=e=>cg()?window.requestAnimationFrame(e):setTimeout(e,1),wo=mn?nt.useEffect:nt.useLayoutEffect,Fl=typeof navigator<"u"&&navigator.connection,Hl=!mn&&Fl&&(["slow-2g","2g"].includes(Fl.effectiveType)||Fl.saveData),Rs=new WeakMap,l1=e=>xo.prototype.toString.call(e),Rl=(e,t)=>e===`[object ${t}]`,A1=0,Gs=e=>{let t=typeof e,r=l1(e),n=Rl(r,"Date"),o=Rl(r,"RegExp"),i=Rl(r,"Object"),s,a;if(xo(e)===e&&!n&&!o){if(s=Rs.get(e),s)return s;if(s=++A1+"~",Rs.set(e,s),Array.isArray(e)){for(s="@",a=0;a<e.length;a++)s+=Gs(e[a])+",";Rs.set(e,s)}if(i){s="#";let c=xo.keys(e).sort();for(;!W(a=c.pop());)W(e[a])||(s+=a+":"+Gs(e[a])+",");Rs.set(e,s)}}else s=n?e.toJSON():t=="symbol"?e.toString():t=="string"?JSON.stringify(e):""+e;return s},Mi=e=>{if(Ft(e))try{e=e()}catch{e=""}let t=e;return e=typeof e=="string"?e:(Array.isArray(e)?e.length:e)?Gs(e):"",[e,t]},u1=0,Qi=()=>++u1;async function Ys(...e){let[t,r,n,o]=e,i=mr({populateCache:!0,throwOnError:!0},typeof o=="boolean"?{revalidate:o}:o||{}),s=i.populateCache,a=i.rollbackOnError,c=i.optimisticData,l=f=>typeof a=="function"?a(f):a!==!1,A=i.throwOnError;if(Ft(r)){let f=r,m=[],g=t.keys();for(let h of g)!/^\$(inf|sub)\$/.test(h)&&f(t.get(h)._k)&&m.push(h);return Promise.all(m.map(u))}return u(r);async function u(f){let[m]=Mi(f);if(!m)return;let[g,h]=Js(t,m),[E,C,x,y]=fr.get(t),w=()=>{let J=E[m];return(Ft(i.revalidate)?i.revalidate(g().data,f):i.revalidate!==!1)&&(delete x[m],delete y[m],J&&J[0])?J[0](2).then(()=>g().data):g().data};if(e.length<3)return w();let B=n,S,M=!1,v=Qi();C[m]=[v,0];let _=!W(c),O=g(),D=O.data,T=O._c,V=W(T)?D:T;if(_&&(c=Ft(c)?c(V,D):c,h({data:c,_c:V})),Ft(B))try{B=B(V)}catch(J){S=J,M=!0}if(B&&Hs(B))if(B=await B.catch(J=>{S=J,M=!0}),v!==C[m][0]){if(M)throw S;return B}else M&&_&&l(S)&&(s=!0,h({data:V,_c:Ue}));if(s&&!M)if(Ft(s)){let J=s(B,V);h({data:J,error:Ue,_c:Ue})}else h({data:B,error:Ue,_c:Ue});if(C[m][1]=Qi(),Promise.resolve(w()).then(()=>{h({_c:Ue})}),M){if(A)throw S;return}return B}}var sg=(e,t)=>{for(let r in e)e[r][0]&&e[r][0](t)},Yl=(e,t)=>{if(!fr.has(e)){let r=mr(Ag,t),n=Object.create(null),o=Ys.bind(Ue,e),i=dr,s=Object.create(null),a=(A,u)=>{let f=s[A]||[];return s[A]=f,f.push(u),()=>f.splice(f.indexOf(u),1)},c=(A,u,f)=>{e.set(A,u);let m=s[A];if(m)for(let g of m)g(u,f)},l=()=>{if(!fr.has(e)&&(fr.set(e,[n,Object.create(null),Object.create(null),Object.create(null),o,c,a]),!mn)){let A=r.initFocus(setTimeout.bind(Ue,sg.bind(Ue,n,0))),u=r.initReconnect(setTimeout.bind(Ue,sg.bind(Ue,n,1)));i=()=>{A&&A(),u&&u(),fr.delete(e)}}};return l(),[e,o,l,i]}return[e,fr.get(e)[4]]},f1=(e,t,r,n,o)=>{let i=r.errorRetryCount,s=o.retryCount,a=~~((Math.random()+.5)*(1<<(s<8?s:8)))*r.errorRetryInterval;!W(i)&&s>i||setTimeout(n,a,o)},ug=Ls,[qs,fg]=Yl(new Map),js=mr({onLoadingSlow:dr,onSuccess:dr,onError:dr,onErrorRetry:f1,onDiscarded:dr,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:Hl?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:Hl?5e3:3e3,compare:ug,isPaused:()=>!1,cache:qs,mutate:fg,fallback:{}},lg),ql=(e,t)=>{let r=mr(e,t);if(t){let{use:n,fallback:o}=e,{use:i,fallback:s}=t;n&&i&&(r.use=n.concat(i)),o&&s&&(r.fallback=mr(o,s))}return r},Os=(0,nt.createContext)({}),jl=e=>{let{value:t}=e,r=(0,nt.useContext)(Os),n=Ft(t),o=(0,nt.useMemo)(()=>n?t(r):t,[n,r,t]),i=(0,nt.useMemo)(()=>n?o:ql(r,o),[n,r,o]),s=o&&o.provider,a=(0,nt.useRef)(Ue);s&&!a.current&&(a.current=Yl(s(i.cache||qs),o));let c=a.current;return c&&(i.cache=c[0],i.mutate=c[1]),wo(()=>{if(c)return c[2]&&c[2](),c[3]},[]),(0,nt.createElement)(Os.Provider,mr(e,{value:i}))};var dg="$inf$";var Bo=d(b(),1);var mg=yo&&window.__SWR_DEVTOOLS_USE__,d1=mg?window.__SWR_DEVTOOLS_USE__:[],m1=()=>{mg&&(window.__SWR_DEVTOOLS_REACT__=Bo.default)},g1=e=>Ft(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(e[1]===null?e[2]:e[1])||{}],p1=()=>{let e=(0,Bo.useContext)(Os);return(0,Bo.useMemo)(()=>mr(js,e),[e])};var h1=e=>(t,r,n)=>e(t,r&&((...i)=>{let[s]=Mi(t),[,,,a]=fr.get(qs);if(s.startsWith(dg))return r(...i);let c=a[s];return W(c)?r(...i):(delete a[s],c)}),n),C1=d1.concat(h1),gg=e=>function(...r){let n=p1(),[o,i,s]=g1(r),a=ql(n,s),c=e,{use:l}=a,A=(l||[]).concat(C1);for(let u=A.length;u--;)c=A[u](c);return c(o,i||a.fetcher||null,a)},pg=(e,t,r)=>{let n=t[e]||(t[e]=[]);return n.push(r),()=>{let o=n.indexOf(r);o>=0&&(n[o]=n[n.length-1],n.pop())}};m1();var E1=()=>{},qL=E1();var Vl=We.default.use||(e=>{switch(e.status){case"pending":throw e;case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e}}),Wl={dedupe:!0},hg=Promise.resolve(Ue),I1=(e,t,r)=>{let{cache:n,compare:o,suspense:i,fallbackData:s,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:l,refreshWhenHidden:A,refreshWhenOffline:u,keepPreviousData:f,strictServerPrefetchWarning:m}=r,[g,h,E,C]=fr.get(n),[x,y]=Mi(e),w=(0,We.useRef)(!1),B=(0,We.useRef)(!1),S=(0,We.useRef)(x),M=(0,We.useRef)(t),v=(0,We.useRef)(r),_=()=>v.current,O=()=>_().isVisible()&&_().isOnline(),[D,T,V,J]=Js(n,x),Be=(0,We.useRef)({}).current,ht=W(s)?W(r.fallback)?Ue:r.fallback[x]:s,Ar=(ne,Ae)=>{for(let se in Be){let ue=se;if(ue==="data"){if(!o(ne[ue],Ae[ue])&&(!W(ne[ue])||!o(Br,Ae[ue])))return!1}else if(Ae[ue]!==ne[ue])return!1}return!0},an=(0,We.useMemo)(()=>{let ne=!x||!t?!1:W(a)?_().isPaused()||i?!1:c!==!1:a,Ae=et=>{let kt=mr(et);return delete kt._k,ne?{isValidating:!0,isLoading:!0,...kt}:kt},se=D(),ue=J(),lt=Ae(se),Rr=se===ue?lt:Ae(ue),ke=lt;return[()=>{let et=Ae(D());return Ar(et,ke)?(ke.data=et.data,ke.isLoading=et.isLoading,ke.isValidating=et.isValidating,ke.error=et.error,ke):(ke=et,et)},()=>Rr]},[n,x]),cn=(0,Kl.useSyncExternalStore)((0,We.useCallback)(ne=>V(x,(Ae,se)=>{Ar(se,Ae)||ne()}),[n,x]),an[0],an[1]),Ei=!w.current,_e=g[x]&&g[x].length>0,Fr=cn.data,ge=W(Fr)?ht&&Hs(ht)?Vl(ht):ht:Fr,kn=cn.error,pe=(0,We.useRef)(ge),Br=f?W(Fr)?W(pe.current)?ge:pe.current:Fr:ge,ur=x&&W(ge),ln=!mn&&(0,Kl.useSyncExternalStore)(()=>dr,()=>!1,()=>!0);m&&ln&&!i&&ur&&console.warn(`Missing pre-initiated data for serialized key "${x}" during server-side rendering. Data fethcing should be initiated on the server and provided to SWR via fallback data. You can set "strictServerPrefetchWarning: false" to disable this warning.`);let Ii=_e&&!W(kn)?!1:Ei&&!W(a)?a:_().isPaused()?!1:i?W(ge)?!1:c:W(ge)||c,Ao=!!(x&&t&&Ei&&Ii),Es=W(cn.isValidating)?Ao:cn.isValidating,Is=W(cn.isLoading)?Ao:cn.isLoading,Wt=(0,We.useCallback)(async ne=>{let Ae=M.current;if(!x||!Ae||B.current||_().isPaused())return!1;let se,ue,lt=!0,Rr=ne||{},ke=!E[x]||!Rr.dedupe,et=()=>Us?!B.current&&x===S.current&&w.current:x===S.current,kt={isValidating:!1,isLoading:!1},un=()=>{T(kt)},Pr=()=>{let At=E[x];At&&At[1]===ue&&delete E[x]},Nt={isValidating:!0};W(D().data)&&(Nt.isLoading=!0);try{if(ke&&(T(Nt),r.loadingTimeout&&W(D().data)&&setTimeout(()=>{lt&&et()&&_().onLoadingSlow(x,r)},r.loadingTimeout),E[x]=[Ae(y),Qi()]),[se,ue]=E[x],se=await se,ke&&setTimeout(Pr,r.dedupingInterval),!E[x]||E[x][1]!==ue)return ke&&et()&&_().onDiscarded(x),!1;kt.error=Ue;let At=h[x];if(!W(At)&&(ue<=At[0]||ue<=At[1]||At[1]===0))return un(),ke&&et()&&_().onDiscarded(x),!1;let Kt=D().data;kt.data=o(Kt,se)?Kt:se,ke&&et()&&_().onSuccess(se,x,r)}catch(At){Pr();let Kt=_(),{shouldRetryOnError:uo}=Kt;Kt.isPaused()||(kt.error=At,ke&&et()&&(Kt.onError(At,x,Kt),(uo===!0||Ft(uo)&&uo(At))&&(!_().revalidateOnFocus||!_().revalidateOnReconnect||O())&&Kt.onErrorRetry(At,x,Kt,xi=>{let fo=g[x];fo&&fo[0]&&fo[0](dn.ERROR_REVALIDATE_EVENT,xi)},{retryCount:(Rr.retryCount||0)+1,dedupe:!0})))}return lt=!1,un(),!0},[x,n]),Nn=(0,We.useCallback)((...ne)=>Ys(n,S.current,...ne),[]);if(wo(()=>{M.current=t,v.current=r,W(Fr)||(pe.current=Fr)}),wo(()=>{if(!x)return;let ne=Wt.bind(Ue,Wl),Ae=0;_().revalidateOnFocus&&(Ae=Date.now()+_().focusThrottleInterval);let ue=pg(x,g,(lt,Rr={})=>{if(lt==dn.FOCUS_EVENT){let ke=Date.now();_().revalidateOnFocus&&ke>Ae&&O()&&(Ae=ke+_().focusThrottleInterval,ne())}else if(lt==dn.RECONNECT_EVENT)_().revalidateOnReconnect&&O()&&ne();else{if(lt==dn.MUTATE_EVENT)return Wt();if(lt==dn.ERROR_REVALIDATE_EVENT)return Wt(Rr)}});return B.current=!1,S.current=x,w.current=!0,T({_k:y}),Ii&&(E[x]||(W(ge)||mn?ne():Ul(ne))),()=>{B.current=!0,ue()}},[x]),wo(()=>{let ne;function Ae(){let ue=Ft(l)?l(D().data):l;ue&&ne!==-1&&(ne=setTimeout(se,ue))}function se(){!D().error&&(A||_().isVisible())&&(u||_().isOnline())?Wt(Wl).then(Ae):Ae()}return Ae(),()=>{ne&&(clearTimeout(ne),ne=-1)}},[l,A,u,x]),(0,We.useDebugValue)(Br),i){if(!Us&&mn&&ur)throw new Error("Fallback data is required when using Suspense in SSR.");ur&&(M.current=t,v.current=r,B.current=!1);let ne=C[x],Ae=!W(ne)&&ur?Nn(ne):hg;if(Vl(Ae),!W(kn)&&ur)throw kn;let se=ur?Wt(Wl):hg;!W(Br)&&ur&&(se.status="fulfilled",se.value=!0),Vl(se)}return{mutate:Nn,get data(){return Be.data=!0,Br},get error(){return Be.error=!0,kn},get isValidating(){return Be.isValidating=!0,Es},get isLoading(){return Be.isLoading=!0,Is}}},jL=xo.defineProperty(jl,"defaultValue",{value:js}),Rn=gg(I1);function zl(e,t=[]){if(e.children)for(let r of e.children){if(r.sequence){let n=r.sequence.id[0]?.accession;n&&t.push({id:n,seq:r.sequence.mol_seq.seq,species:r.taxonomy.common_name||r.taxonomy.scientific_name,genomicLocString:r.sequence.mol_seq.location})}zl(r,t)}return t}async function Cg(e,t){let r=await fetch(e,t);if(!r.ok)throw new Error(`HTTP ${r.status} fetching ${e} ${await r.text()}`);return r}async function Le(e,t){return(await Cg(e,t)).text()}async function Pn(e,t){return(await Cg(e,t)).json()}function Vs(e){return new Promise(t=>setTimeout(t,e))}async function vi(e,t){let r=localStorage.getItem(e);if(r)try{return JSON.parse(r)}catch(o){console.error(`Error parsing cached data for ${e}:`,o),localStorage.removeItem(e)}let n=await t();return localStorage.setItem(e,JSON.stringify(n)),n}var Eg="https://rest.ensembl.org";async function Ig(e){let t=e.replace(/\..*/,""),{species:r}=await vi(`${t}-ensembl`,()=>Pn(`${Eg}/lookup/id/${t}?content-type=application/json`)),n=`${Eg}/genetree/member/id/${r}/${t}`,o=await vi(`${t}-msa`,()=>Pn(`${n}?content-type=application/json;aligned=1;sequence=pep`)),i=await vi(`${t}-tree`,()=>Le(`${n}?nh_format=simple;content-type=text/x-nh`)),s=zl(o.tree);return{geneTreeId:o.id,tree:i,msa:s.map(a=>`>${a.id}
${a.seq}`).join(`
`),treeMetadata:JSON.stringify(Object.fromEntries(s.map(a=>[a.id,{genome:a.species}])))}}function xg(e){let{data:t,error:r,isLoading:n}=Rn(()=>e?["geneTree",e]:null,([,o])=>Ig(o),{revalidateOnFocus:!1,revalidateOnReconnect:!1,revalidateIfStale:!1});return{treeData:t,isTreeLoading:n,treeError:r}}var yg=d(ie());function x1(e){let r=(e.get("subfeatures")??[]).filter(n=>(n.get("type")==="mRNA"||n.get("type")==="transcript")&&n.get("subfeatures")?.some(o=>o.get("type")==="CDS"));return r.length>0?r:[e]}function Ws(e){let t=(0,yg.sum)(e.get("subfeatures")?.filter(r=>r.get("type")?.toLowerCase()==="cds").map(r=>r.get("end")-r.get("start"))??[]);return{len:Math.floor(t/3),mod:t%3}}function Gn(e){return e?.id()??""}function y1(e){if(!e)return[];let t=[e.id(),e.get("name"),e.get("id"),e.get("transcript_id")].filter(r=>!!r);return[...new Set(t)]}function Ks(e,t){return y1(e).includes(t)}function On(e){return e===void 0?"":[e.get("name"),e.get("id")].filter(t=>!!t).join(" ")}function zt(e){return e===void 0?"":[e.get("gene_name")??e.get("name"),e.get("id")?`(${e.get("id")})`:""].filter(t=>!!t).join(" ")}function wg(e){return x1(e).toSorted((r,n)=>Ws(n).len-Ws(r).len)}function zs(e){return e.replaceAll("*","").replaceAll("&","")}var gr=d(b()),bo=d(N()),Qg=d(Ve());var bg=d(b()),Sg=d(Ve());var $l=d(b()),Bg=d(N());function w1({children:e,...t}){return $l.default.createElement("div",null,$l.default.createElement(Bg.TextField,{...t},e))}var ot=w1;var B1=(0,Sg.makeStyles)()({textAreaFont:{fontFamily:"Courier New"}});function Xl({value:e}){let{classes:t}=B1();return bg.default.createElement(ot,{variant:"outlined",multiline:!0,minRows:5,maxRows:10,fullWidth:!0,value:e,slotProps:{input:{readOnly:!0,classes:{input:t.textAreaFont}}}})}var b1=(0,Qg.makeStyles)()({flex:{display:"flex"},minWidth:{minWidth:300}});function Rt({feature:e,options:t,selectedId:r,selectedTranscript:n,onTranscriptChange:o,proteinSequence:i,validSet:s}){let{classes:a}=b1(),[c,l]=(0,gr.useState)(!1);return gr.default.createElement(gr.default.Fragment,null,gr.default.createElement("div",{className:a.flex},gr.default.createElement(bo.TextField,{variant:"outlined",label:`Choose isoform of ${zt(e)}`,select:!0,className:a.minWidth,value:r,onChange:A=>{o(A.target.value)}},t.map(A=>{let u=s?[...s].some(g=>Ks(A,g)):!0,{len:f,mod:m}=Ws(A);return gr.default.createElement(bo.MenuItem,{value:Gn(A),key:A.id(),disabled:!u},On(A)," (",f," aa)"," ",m?" (possible fragment)":"",s?u?" (has data)":" (no data)":"")})),gr.default.createElement("div",{style:{alignContent:"center",marginLeft:20}},gr.default.createElement(bo.Button,{variant:"contained",color:"primary",onClick:()=>{l(!c)}},c?"Hide sequence":"Show sequence"))),c&&gr.default.createElement(Xl,{value:i?`>${On(n)}
${i}`:"Loading..."}))}var Hn=d(b());var gn=d(ie());function S1(e,t){return e.map(r=>t.slice(r.start,r.end)).join("")}function Q1({cds:e,sequence:t,codonTable:r}){let n=S1(e,t),o="";for(let i=0;i<n.length;i+=3)o+=r[n.slice(i,i+3)]??"&";return o}function M1(e,t){return e.map(r=>({...r,start:t-r.end,end:t-r.start})).toSorted((r,n)=>r.start-n.start)}function Mg({feature:e,seq:t}){let{subfeatures:r,start:n,strand:o}=e.toJSON(),i=(0,gn.dedupe)(r?.toSorted((s,a)=>s.start-a.start).map(s=>({...s,start:s.start-n,end:s.end-n})).filter(s=>s.type==="CDS")??[],s=>`${s.start}-${s.end}`);return Q1({cds:o===-1?M1(i,t.length):i,sequence:o===-1?(0,gn.revcom)(t):t,codonTable:(0,gn.generateCodonTable)(gn.defaultCodonTable)})}var Tg=d(ie());var vg=d(Fn());async function $s({start:e,end:t,refName:r,session:n,assemblyName:o}){let{assemblyManager:i,rpcManager:s}=n,a=await i.waitForAssembly(o);if(!a)throw new Error("assembly not found");let c="getSequence";return(await s.call(c,"CoreGetFeatures",{adapterConfig:(0,vg.getConf)(a,["sequence","adapter"]),sessionId:c,regions:[{start:e,end:t,refName:a.getCanonicalRefName(r),assemblyName:o}]}))[0]?.get("seq")??""}async function v1({feature:e,assemblyName:t,upDownBp:r,view:n}){let o=(0,Tg.getSession)(n),{start:i,end:s,refName:a}=e.toJSON(),c=i-r,l=s+r,[A,u,f]=await Promise.all([$s({start:i,end:s,refName:a,assemblyName:t,session:o}),$s({start:Math.max(0,c),end:i,refName:a,assemblyName:t,session:o}),$s({start:s,end:l,refName:a,assemblyName:t,session:o})]);return{seq:A,upstream:u,downstream:f}}function Dg({view:e,feature:t,upDownBp:r=0,forceLoad:n=!0}){let o=e?.assemblyNames?.[0],{data:i,error:s}=Rn(t&&o&&e?[t.id(),o,r,n,"feature-sequence"]:null,()=>v1({feature:t,assemblyName:o,upDownBp:r,view:e}),{revalidateOnFocus:!1,revalidateOnReconnect:!1,revalidateIfStale:!1});return{sequence:i,error:s}}function _g({view:e,feature:t,upDownBp:r=0,forceLoad:n=!0}){let{sequence:o,error:i}=Dg({view:e,feature:t,upDownBp:r,forceLoad:n});return{proteinSequence:o&&!("error"in o)&&t?Mg({seq:o.seq,feature:t}):"",sequence:o,error:i}}function kg(e,t){return t.some(r=>Ks(e,r))}function $t({feature:e,view:t,validIds:r}){let n=(0,Hn.useMemo)(()=>wg(e),[e]),[o,i]=(0,Hn.useState)(()=>Gn(n[0])),s=n.find(A=>Gn(A)===o),{proteinSequence:a,error:c}=_g({view:t,feature:s}),l=(0,Hn.useMemo)(()=>r?new Set(r):void 0,[r]);return(0,Hn.useEffect)(()=>{if(r&&r.length>0){let A=n.find(u=>Gn(u)===o);if(A&&!kg(A,r)){let u=n.find(f=>kg(f,r));u&&i(Gn(u))}}},[r,n,o]),{options:n,selectedId:o,setSelectedId:i,selectedTranscript:s,proteinSequence:a,error:c,validSet:l}}var T1=(0,Lg.makeStyles)()({dialogContent:{width:"80em",display:"flex",flexDirection:"column",gap:16}}),D1=(0,Ng.observer)(function({model:e,feature:t,handleClose:r}){let n=(0,Zs.getSession)(e),o=(0,Zs.getContainingView)(e),{classes:i}=T1(),[s,a]=(0,Ct.useState)(),{options:c,selectedId:l,setSelectedId:A,selectedTranscript:u,proteinSequence:f,error:m}=$t({feature:t,view:o}),{treeData:g,isTreeLoading:h,treeError:E}=xg(l),C=h?"Loading tree data from Ensembl GeneTree":void 0,x=E??s??m;return Ct.default.createElement(Ct.default.Fragment,null,Ct.default.createElement(Jr.DialogContent,{className:i.dialogContent},x?Ct.default.createElement(Xs.ErrorMessage,{error:x}):null,C?Ct.default.createElement(Xs.LoadingEllipses,{message:C}):null,g?Ct.default.createElement("div",null,Ct.default.createElement("div",null,"Found Ensembl Compara GeneTree: ",g.geneTreeId),Ct.default.createElement(Jr.Link,{target:"_blank",href:`https://useast.ensembl.org/Multi/GeneTree/Image?gt=${g.geneTreeId}`},"See ",g.geneTreeId," at Ensembl")):null,Ct.default.createElement(Rt,{feature:t,options:c,selectedId:l,selectedTranscript:u,onTranscriptChange:A,proteinSequence:f})),Ct.default.createElement(Jr.DialogActions,null,Ct.default.createElement(Jr.Button,{color:"primary",variant:"contained",onClick:()=>{try{if(!g)return;a(void 0),$m({feature:t,view:o,session:n,newViewTitle:zt(t),data:g}),r()}catch(y){console.error(y),a(y)}}},"Submit"),Ct.default.createElement(Jr.Button,{color:"secondary",variant:"contained",onClick:()=>{r()}},"Cancel")))}),Fg=D1;var X=d(b()),Ti=d(he()),ea=d(ie()),Ye=d(N()),Pg=d(G()),Gg=d(Ve());function Rg({session:e,newViewTitle:t,view:r,feature:n,msaFilehandle:o,treeFilehandle:i,querySeqName:s,data:a}){e.addView("MsaView",{type:"MsaView",displayName:t,connectedViewId:r.id,connectedFeature:n.toJSON(),msaFilehandle:o,treeFilehandle:i,querySeqName:s,data:a})}var _1=(0,Gg.makeStyles)()({dialogContent:{width:"80em"},textAreaFont:{fontFamily:"Courier New"}}),k1=(0,Pg.observer)(function({model:t,feature:r,handleClose:n}){let o=(0,ea.getSession)(t),i=(0,ea.getContainingView)(t),{classes:s}=_1(),[a,c]=(0,X.useState)(),[l,A]=(0,X.useState)("file"),[u,f]=(0,X.useState)(""),[m,g]=(0,X.useState)(""),[h,E]=(0,X.useState)(),[C,x]=(0,X.useState)(),[y,w]=(0,X.useState)(""),{options:B,selectedId:S,setSelectedId:M,selectedTranscript:v,proteinSequence:_,error:O}=$t({feature:r,view:i}),D=a??O;return X.default.createElement(X.default.Fragment,null,X.default.createElement(Ye.DialogContent,{className:s.dialogContent},D?X.default.createElement(Ti.ErrorMessage,{error:D}):null,X.default.createElement(Ye.FormControl,{component:"fieldset"},X.default.createElement(Ye.RadioGroup,{row:!0,value:l,onChange:T=>{A(T.target.value)}},X.default.createElement(Ye.FormControlLabel,{value:"file",control:X.default.createElement(Ye.Radio,null),label:"Open files"}),X.default.createElement(Ye.FormControlLabel,{value:"text",control:X.default.createElement(Ye.Radio,null),label:"Paste text"}))),X.default.createElement("div",{style:{marginBottom:30}},l==="file"?X.default.createElement("div",{style:{maxWidth:500}},X.default.createElement(Ti.FileSelector,{name:"MSA File .aln (Clustal), .fa/.mfa (aligned FASTA), .stock (Stockholm), etc)",inline:!0,location:h,setLocation:E}),X.default.createElement(Ti.FileSelector,{name:"Tree file .nh (Newick) or .asn (NCBI COBALT ASN.1)",inline:!0,location:C,setLocation:x})):X.default.createElement(X.default.Fragment,null,X.default.createElement(ot,{variant:"outlined",name:"MSA",multiline:!0,minRows:5,style:{marginBottom:"20px"},maxRows:10,fullWidth:!0,placeholder:"Paste MSA here",value:u,onChange:T=>{f(T.target.value)}}),X.default.createElement(ot,{variant:"outlined",name:"Tree",multiline:!0,minRows:5,maxRows:10,fullWidth:!0,placeholder:"Paste newick tree (optional)",value:m,onChange:T=>{g(T.target.value)}}))),X.default.createElement(Rt,{feature:r,options:B,selectedId:S,selectedTranscript:v,onTranscriptChange:M,proteinSequence:_}),X.default.createElement(ot,{variant:"outlined",name:"MSA row name",fullWidth:!0,required:!0,style:{marginTop:20},placeholder:"Row name in MSA that corresponds to the selected transcript",helperText:"Required: Specify the name of the row in your MSA that should be aligned with the selected transcript",value:y,onChange:T=>{w(T.target.value)}}),!y.trim()&&X.default.createElement(Ye.Alert,{severity:"warning",style:{marginTop:10}},"Without specifying the MSA row name, clicking on the MSA will not navigate to the corresponding genome position, and hovering highlights will not work.")),X.default.createElement(Ye.DialogActions,null,X.default.createElement(Ye.Button,{color:"primary",variant:"contained",disabled:!v||l==="file"&&!h||l==="text"&&!u.trim(),onClick:()=>{try{if(!v)return;c(void 0),Rg({session:o,newViewTitle:zt(v),view:i,feature:v,querySeqName:y.trim()||void 0,...l==="file"?{msaFilehandle:h,treeFilehandle:C}:{data:{msa:u,tree:m||void 0}}}),n()}catch(T){console.error(T),c(T)}}},"Submit"),X.default.createElement(Ye.Button,{color:"secondary",variant:"contained",onClick:()=>{n()}},"Cancel")))}),Og=k1;var hr=d(b()),yp=d(ie());Zl();var wp=d(N());var j=d(b()),sp=d(he()),ap=d(ie());eA();var ve=d(N()),cp=d(G()),lp=d(Ve());var Fe=d(b()),np=d(ie());$();var Ug=d(R(),1),Yg=(0,k.createSvgIcon)((0,Ug.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");var ft=d(N()),op=d(G());var tA=d(ie());function na({newViewTitle:e,view:t,feature:r,blastParams:n}){return(0,tA.getSession)(t).addView("MsaView",{type:"MsaView",displayName:e,connectedViewId:t.id,connectedFeature:r.toJSON(),drawNodeBubbles:!0,colWidth:10,rowHeight:12,blastParams:n})}function qg({newViewTitle:e,view:t,cached:r}){return(0,tA.getSession)(t).addView("MsaView",{type:"MsaView",displayName:e,connectedViewId:t.id,drawNodeBubbles:!0,colWidth:10,rowHeight:12,data:{msa:r.msa,tree:r.tree,treeMetadata:r.treeMetadata}})}ia();var q1="jbrowse-msaview-blast-cache",pn="blast-results",j1=2;async function sa(){return Di(q1,j1,{upgrade(e,t){t<2&&e.objectStoreNames.contains(pn)&&e.deleteObjectStore(pn),e.objectStoreNames.contains(pn)||e.createObjectStore(pn,{keyPath:"id"})}})}function V1(e,t,r,n){let o=e.slice(0,100);return n?`${t}:${r}:${n}:${o}`:`${t}:${r}:${o}`}async function Zg({proteinSequence:e,blastDatabase:t,blastProgram:r,msaAlgorithm:n,msa:o,tree:i,treeMetadata:s,rid:a,geneId:c,transcriptId:l,transcriptName:A,geneName:u}){let f=await sa(),g={id:V1(e,t,r,l),proteinSequence:e,blastDatabase:t,blastProgram:r,msaAlgorithm:n,msa:o,tree:i,treeMetadata:s,rid:a,timestamp:Date.now(),geneId:c,transcriptId:l,transcriptName:A,geneName:u};return await f.put(pn,g),g}async function aa(){return(await(await sa()).getAll(pn)).toSorted((r,n)=>n.timestamp-r.timestamp)}async function ep(e){await(await sa()).delete(pn,e)}async function tp(){await(await sa()).clear(pn)}function W1(e){let t=[e.id(),e.get("id"),e.get("name"),e.get("gene_id"),e.get("gene_name")].filter(r=>!!r);return[...new Set(t)]}function rp(e){let t=[];return e.geneName&&t.push(e.geneName),e.transcriptName&&e.transcriptName!==e.geneName&&t.push(e.transcriptName),t.length===0&&t.push(e.geneId??e.transcriptId??"Unknown"),t.join(" - ")}var K1=(0,op.observer)(function({model:e,handleClose:t,feature:r}){let[n,o]=(0,Fe.useState)([]),[i,s]=(0,Fe.useState)(!0),a=(0,np.getContainingView)(e),c=(0,Fe.useMemo)(()=>W1(r),[r]);(0,Fe.useEffect)(()=>{(async()=>{try{let f=await aa();o(f.filter(m=>m.geneId&&c.includes(m.geneId))),s(!1)}catch(f){console.error(f)}})()},[c]);let l=async f=>{await ep(f),o(m=>m.filter(g=>g.id!==f))},A=async()=>{await tp(),o([])},u=f=>{qg({view:a,cached:f,newViewTitle:`BLAST - ${rp(f)}`}),t()};return i?Fe.default.createElement(ft.Typography,null,"Loading cached results..."):n.length===0?Fe.default.createElement(ft.Typography,{color:"textSecondary"},"No cached BLAST results found for this gene. Run a BLAST query to cache results."):Fe.default.createElement("div",null,Fe.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8}},Fe.default.createElement(ft.Typography,{variant:"subtitle1"},"Cached BLAST Results (",n.length,")"),Fe.default.createElement(ft.Button,{size:"small",color:"error",onClick:()=>{A()}},"Clear All")),Fe.default.createElement(ft.List,{dense:!0,style:{maxHeight:300,overflow:"auto"}},n.map(f=>Fe.default.createElement(ft.ListItem,{key:f.id,disablePadding:!0,secondaryAction:Fe.default.createElement(ft.IconButton,{edge:"end",size:"small",onClick:m=>{m.stopPropagation(),l(f.id)}},Fe.default.createElement(Yg,{fontSize:"small"}))},Fe.default.createElement(ft.ListItemButton,{onClick:()=>{u(f)}},Fe.default.createElement(ft.ListItemText,{primary:`${rp(f)} - ${f.blastDatabase}/${f.blastProgram} (${f.msaAlgorithm})`,secondary:`${new Date(f.timestamp).toLocaleString()} - Seq: ${f.proteinSequence.slice(0,30)}...`}))))))}),ip=K1;function z1(e){let t=[e.id(),e.get("id"),e.get("name"),e.get("gene_id"),e.get("gene_name")].filter(r=>!!r);return[...new Set(t)]}var $1=(0,lp.makeStyles)()({dialogContent:{width:"80em"},textAreaFont:{fontFamily:"Courier New"}}),X1=["nr","nr_cluster_seq"],Z1=["clustalo","muscle","kalign","mafft"],eM=["blastp","quick-blastp"],tM=(0,cp.observer)(function({handleClose:e,feature:t,model:r,children:n,baseUrl:o}){let{classes:i}=$1(),s=(0,ap.getContainingView)(r),[a,c]=(0,j.useState)(),[l,A]=(0,j.useState)("nr"),[u,f]=(0,j.useState)("clustalo"),[m,g]=(0,j.useState)("quick-blastp"),[h,E]=(0,j.useState)(!1),[C,x]=(0,j.useState)(),y=(0,j.useMemo)(()=>z1(t),[t]);(0,j.useEffect)(()=>{(async()=>{try{let T=await aa();E(T.some(V=>V.geneId&&y.includes(V.geneId)))}catch(T){console.error(T),x(T)}})()},[y]);let{options:w,selectedId:B,setSelectedId:S,selectedTranscript:M,proteinSequence:v,error:_}=$t({feature:t,view:s});(0,j.useEffect)(()=>{l==="nr_cluster_seq"&&g("blastp")},[l]);let O=_??a??C,D={width:150};return j.default.createElement(j.default.Fragment,null,j.default.createElement(ve.DialogContent,{className:i.dialogContent},n,O?j.default.createElement(sp.ErrorMessage,{error:O}):null,j.default.createElement(ot,{variant:"outlined",label:"BLAST database",style:D,select:!0,value:l,onChange:T=>{A(T.target.value)}},X1.map(T=>j.default.createElement(ve.MenuItem,{value:T,key:T},T))),j.default.createElement(ot,{variant:"outlined",label:"MSA Algorithm",style:D,select:!0,value:u,onChange:T=>{f(T.target.value)}},Z1.map(T=>j.default.createElement(ve.MenuItem,{value:T,key:T},T))),j.default.createElement("div",{style:{display:"flex"}},j.default.createElement(ot,{variant:"outlined",label:"BLAST program",disabled:l==="nr_cluster_seq",style:D,select:!0,value:m,onChange:T=>{g(T.target.value)}},eM.map(T=>j.default.createElement(ve.MenuItem,{value:T,key:T},T))),l==="nr_cluster_seq"?j.default.createElement(ve.Typography,{variant:"subtitle2",style:{marginLeft:4,alignContent:"center"}},"Can only use blastp on nr_cluster_seq"):null),j.default.createElement(Rt,{feature:t,options:w,selectedId:B,selectedTranscript:M,onTranscriptChange:S,proteinSequence:v}),j.default.createElement(ve.Typography,{style:{marginTop:20}},"This panel will automatically submit a query to NCBI. Using blastp can take 10+ minutes to run, quick-blastp is generally a lot faster but is not available for the clustered database. After completion, all the hits will be run through a multiple sequence alignment. Note: we are not able to currently run NCBI COBALT automatically on the BLAST results, even though that is the method NCBI uses on their website. If you need a COBALT alignment, please use the manual approach of submitting BLAST yourself and downloading the resulting files"),h?j.default.createElement(ve.Accordion,{style:{marginTop:20}},j.default.createElement(ve.AccordionSummary,{expandIcon:j.default.createElement(ra,null)},j.default.createElement(ve.Typography,null,"Previous BLAST Results")),j.default.createElement(ve.AccordionDetails,null,j.default.createElement(ip,{model:r,handleClose:e,feature:t}))):null),j.default.createElement(ve.DialogActions,null,j.default.createElement(ve.Button,{color:"primary",variant:"contained",onClick:()=>{try{if(!M)return;c(void 0),na({feature:M,view:s,newViewTitle:`BLAST - ${zt(t)} - ${On(M)}`,blastParams:{baseUrl:o,blastProgram:m,blastDatabase:l,msaAlgorithm:u,selectedTranscript:M,proteinSequence:v}})}catch(T){console.error(T),c(T)}e()},disabled:!v},"Submit"),j.default.createElement(ve.Button,{color:"secondary",variant:"contained",onClick:()=>{e()}},"Cancel")))}),Ap=tM;var Xt=d(b()),dp=d(he()),Aa=d(ie()),Ur=d(N()),mp=d(G()),gp=d(Ve());la();var rM=(0,gp.makeStyles)()({dialogContent:{width:"80em"},textAreaFont:{fontFamily:"Courier New"},ncbiLink:{wordBreak:"break-all",margin:30,maxWidth:600}}),nM=(0,mp.observer)(function({handleClose:e,feature:t,model:r,children:n,baseUrl:o}){let{classes:i}=rM(),s=(0,Aa.getContainingView)(r),{options:a,selectedId:c,setSelectedId:l,selectedTranscript:A,proteinSequence:u,error:f}=$t({feature:t,view:s}),m=zs(u),g=`${o}?PAGE_TYPE=BlastSearch&PAGE=Proteins&PROGRAM=blastp&QUERY=${m}`,h=`${o}?PAGE_TYPE=BlastSearch&PAGE=Proteins&PROGRAM=blastp&QUERY=${(0,Aa.shorten2)(m,10)}`;return Xt.default.createElement(Xt.default.Fragment,null,Xt.default.createElement(Ur.DialogContent,{className:i.dialogContent},n,f?Xt.default.createElement(dp.ErrorMessage,{error:f}):null,Xt.default.createElement(Rt,{feature:t,options:a,selectedId:c,selectedTranscript:A,onTranscriptChange:l,proteinSequence:u}),u?Xt.default.createElement("div",{className:i.ncbiLink},"Link to NCBI BLAST: ",Xt.default.createElement(Un,{href:g},h)):null,Xt.default.createElement(Ur.Typography,{style:{marginTop:20}},`Click the link above and run your BLAST query, and once you have results, click "Multiple Alignment" at the top of the results page to be redirected to COBALT, NCBI's multiple sequence aligner. Once COBALT completes, you can download an MSA (.aln file) and optionally a Newick tree (.nh) and paste the results into JBrowse`)),Xt.default.createElement(Ur.DialogActions,null,Xt.default.createElement(Ur.Button,{color:"primary",variant:"contained",onClick:()=>{e()}},"Submit"),Xt.default.createElement(Ur.Button,{color:"secondary",variant:"contained",onClick:()=>{e()}},"Close")))}),pp=nM;var Yr=d(b()),Zt=d(N());function uA({lookupMethod:e,setLookupMethod:t}){return Yr.default.createElement(Zt.FormControl,{component:"fieldset"},Yr.default.createElement(Zt.RadioGroup,{row:!0,value:e,onChange:r=>{t(r.target.value)}},Yr.default.createElement(Zt.FormControlLabel,{value:"automatic",control:Yr.default.createElement(Zt.Radio,null),label:"Automatic"}),Yr.default.createElement(Zt.FormControlLabel,{value:"rid",control:Yr.default.createElement(Zt.Radio,null),label:"Load from RID"}),Yr.default.createElement(Zt.FormControlLabel,{value:"manual",control:Yr.default.createElement(Zt.Radio,null),label:"Manual"})))}var Re=d(b()),hp=d(he()),Cp=d(ie()),Pt=d(N()),Ep=d(G()),Ip=d(Ve());la();var oM=(0,Ip.makeStyles)()({dialogContent:{width:"80em"}}),iM=["clustalo","muscle","kalign","mafft"],sM=(0,Ep.observer)(function({handleClose:e,feature:t,model:r,children:n,baseUrl:o}){let{classes:i}=oM(),s=(0,Cp.getContainingView)(r),[a,c]=(0,Re.useState)(),[l,A]=(0,Re.useState)(""),[u,f]=(0,Re.useState)("clustalo"),{options:m,selectedId:g,setSelectedId:h,selectedTranscript:E,proteinSequence:C,error:x}=$t({feature:t,view:s}),y=x??a,w={width:150},B=l.trim();return Re.default.createElement(Re.default.Fragment,null,Re.default.createElement(Pt.DialogContent,{className:i.dialogContent},n,y?Re.default.createElement(hp.ErrorMessage,{error:y}):null,Re.default.createElement(Pt.Typography,{variant:"body2",style:{marginBottom:16}},"Enter the RID (Request ID) from a previously submitted NCBI BLAST query. You can find the RID in the BLAST results page URL or at the top of the results page. RIDs are typically valid for 24-36 hours after submission."),Re.default.createElement(ot,{variant:"outlined",label:"BLAST RID",placeholder:"e.g., ABC12345",fullWidth:!0,style:{marginBottom:16},value:l,onChange:S=>{A(S.target.value)}}),B?Re.default.createElement(Pt.Typography,{variant:"body2",style:{marginBottom:16}},Re.default.createElement(Un,{href:`${o}?CMD=Get&RID=${B}`},"View BLAST results on NCBI")):null,Re.default.createElement(ot,{variant:"outlined",label:"MSA Algorithm",style:w,select:!0,value:u,onChange:S=>{f(S.target.value)}},iM.map(S=>Re.default.createElement(Pt.MenuItem,{value:S,key:S},S))),Re.default.createElement(Rt,{feature:t,options:m,selectedId:g,selectedTranscript:E,onTranscriptChange:h,proteinSequence:C}),Re.default.createElement(Pt.Typography,{style:{marginTop:20}},"This will fetch the BLAST results for the provided RID and run them through a multiple sequence alignment. The protein sequence from the selected transcript will be added as the query sequence in the MSA.")),Re.default.createElement(Pt.DialogActions,null,Re.default.createElement(Pt.Button,{color:"primary",variant:"contained",onClick:()=>{try{if(!E||!B)return;c(void 0),na({feature:E,view:s,newViewTitle:`BLAST - ${zt(t)} - ${On(E)}`,blastParams:{baseUrl:o,blastProgram:"blastp",blastDatabase:"nr",msaAlgorithm:u,selectedTranscript:E,proteinSequence:C,rid:B}})}catch(S){console.error(S),c(S)}e()},disabled:!C||!B},"Submit"),Re.default.createElement(Pt.Button,{color:"secondary",variant:"contained",onClick:()=>{e()}},"Cancel")))}),xp=sM;var pr=d(b()),er=d(N());var ua="https://blast.ncbi.nlm.nih.gov/Blast.cgi";function fA({handleClose:e,baseUrl:t}){let[r,n]=(0,pr.useState)(t);return pr.default.createElement(er.Dialog,{open:!0,maxWidth:"lg",onClose:()=>{e()}},pr.default.createElement(er.DialogTitle,null,"BLAST Settings"),pr.default.createElement(er.DialogContent,null,pr.default.createElement(ot,{autoFocus:!0,margin:"dense",label:"BLAST Base URL",fullWidth:!0,variant:"outlined",value:r,style:{minWidth:"300px"},onChange:o=>{n(o.target.value)}}),pr.default.createElement(er.Button,{variant:"contained",onClick:()=>{n(ua)}},"Reset")),pr.default.createElement(er.DialogActions,null,pr.default.createElement(er.Button,{variant:"contained",color:"secondary",onClick:()=>{e()}},"Cancel"),pr.default.createElement(er.Button,{color:"primary",variant:"contained",onClick:()=>{e(r)}},"Save")))}var aM={automatic:Ap,rid:xp,manual:pp};function dA({handleClose:e,model:t,feature:r}){let[n,o]=(0,hr.useState)("automatic"),[i,s]=(0,yp.useLocalStorage)("msa-blastRootUrl",ua),[a,c]=(0,hr.useState)(!1),l=aM[n];return hr.default.createElement(hr.default.Fragment,null,hr.default.createElement(wp.IconButton,{style:{float:"right"},size:"small",onClick:()=>{c(!0)}},hr.default.createElement(ta,null)),hr.default.createElement(l,{model:t,feature:r,handleClose:e,baseUrl:i},hr.default.createElement(uA,{lookupMethod:n,setLookupMethod:o})),a?hr.default.createElement(fA,{baseUrl:i,handleClose:A=>{A&&s(A),c(!1)}}):null)}var qe=d(b()),hh=d(Fn()),qn=d(he()),_o=d(ie()),Vr=d(N()),Ch=d(G());var Eh=d(Ve());var mA={revalidateOnFocus:!1,revalidateOnReconnect:!1,revalidateIfStale:!1,refreshWhenHidden:!1,refreshWhenOffline:!1,shouldRetryOnError:!1};hn();function _A(e,t="",r=5e3){let n=[e];for(;n.length;){let o=n.pop();for(let[i,s]of Object.entries(o)){if(t.length>r)return vA(t);typeof s=="object"&&s!==null?n.push(s):i==="locationType"&&s==="FileHandleLocation"?t+=`${i}-BlobLocation`:i==="handleId"?t+=`blobId-fh-blob-${s}`:t+=`${i}-${s}`}}return`adp-${vA(t)}`}function fh(e={}){return e.type&&e.adapterId?`${e.type}-${e.adapterId}`:`${_A(e)}`}var dh={};async function DM(e,t,r){let n=r?.type;if(!n)throw new Error(`could not determine adapter type from adapter config snapshot ${JSON.stringify(r)}`);let o=e.getAdapterType(n);if(!o)throw new Error(`unknown data adapter type ${n}`);let i=o.configSchema.create(r,{pluginManager:e}),s=xa.bind(null,e,t),a=await o.getAdapterClass();return{dataAdapter:new a(i,s,e),sessionIds:new Set([t])}}async function xa(e,t,r){let n=fh(r);dh[n]??=DM(e,t,r);let o=await dh[n];return o.sessionIds.add(t),o}async function mh({config:e,pluginManager:t}){return(await xa(t,"msa",e)).dataAdapter.getMSAList()}async function gh({config:e,pluginManager:t,msaId:r}){return(await xa(t,"msa",e)).dataAdapter.getMSA(r)}function ph({session:e,newViewTitle:t,view:r,feature:n,data:o,querySeqName:i}){e.addView("MsaView",{type:"MsaView",displayName:t,treeAreaWidth:200,querySeqName:i,treeWidth:100,drawNodeBubbles:!1,labelsAlignRight:!0,showBranchLen:!1,colWidth:10,rowHeight:12,colorSchemeName:"percent_identity_dynamic",data:o,connectedViewId:r.id,connectedFeature:n.toJSON()})}var _M=(0,Eh.makeStyles)()({dialogContent:{width:"80em"}}),kM=(0,Ch.observer)(function({model:t,feature:r,handleClose:n}){let o=(0,_o.getSession)(t),i=(0,_o.getContainingView)(t),{classes:s}=_M(),{pluginManager:a}=(0,_o.getEnv)(t),{assemblyNames:c}=i,[l,A]=(0,qe.useState)(),{jbrowse:u}=o,f=(0,hh.readConfObject)(u,["msa","datasets"]),[m,g]=(0,qe.useState)(f?.[0]?.datasetId),h=f?.find(J=>J.datasetId===m),{data:E,isLoading:C,error:x}=Rn(m?`${m}-msa-list`:"none-msa-list",()=>h?mh({config:h.adapter,pluginManager:a}):void 0,mA),{options:y,selectedId:w,setSelectedId:B,selectedTranscript:S,proteinSequence:M,error:v,validSet:_}=$t({feature:r,view:i,validIds:E}),{data:O,isLoading:D,error:T}=Rn(w&&m?`${w}-${w}-${E?.length}-msa`:"none-msa",()=>w&&h&&E?gh({msaId:w,config:h.adapter,pluginManager:a}):void 0,mA),V=x??T??v??l;return V&&console.error(V),qe.default.createElement(qe.default.Fragment,null,qe.default.createElement(Vr.DialogContent,{className:s.dialogContent},V?qe.default.createElement(qn.ErrorMessage,{error:V}):null,qe.default.createElement(ot,{select:!0,label:"Select MSA dataset",value:m,onChange:J=>{g(J.target.value)}},f?.map(J=>qe.default.createElement(Vr.MenuItem,{key:J.datasetId,value:J.datasetId},J.name))),h?qe.default.createElement("div",{style:{marginTop:50}},!C&&D?qe.default.createElement(qn.LoadingEllipses,{variant:"h6",message:`Loading MSA for (${w})`}):null,C?qe.default.createElement(qn.LoadingEllipses,{variant:"h6",message:`Loading available MSAs for (${h.name})`}):null,E?qe.default.createElement("div",null,qe.default.createElement(qn.SanitizedHTML,{html:h.description}),qe.default.createElement(Rt,{feature:r,options:y,selectedId:w,selectedTranscript:S,onTranscriptChange:B,proteinSequence:M,validSet:_})):null):null),qe.default.createElement(Vr.DialogActions,null,qe.default.createElement(Vr.Button,{color:"primary",variant:"contained",disabled:!S||!O?.length,onClick:()=>{try{if(!S||!O)return;let J=`${w}_${c[0]}`;ph({session:o,newViewTitle:zt(S),view:i,querySeqName:J,feature:S,data:{msa:O.map(Be=>`>${Be.get("refName")}
${Be.get("seq")}`).join(`
`)}}),n()}catch(J){A(J)}}},"Submit"),qe.default.createElement(Vr.Button,{color:"secondary",variant:"contained",onClick:()=>{n()}},"Cancel")))}),Ih=kM;var kA=d(b());function ko({children:e,value:t,index:r,...n}){return kA.default.createElement("div",{role:"tabpanel",hidden:t!==r,...n},t===r&&kA.default.createElement("div",null,e))}function NA({handleClose:e,feature:t,model:r}){let n=(0,wh.getSession)(r),{jbrowse:o}=n,i=(0,xh.readConfObject)(o,["msa","datasets"]),s=i&&i.length>0,[a,c]=(0,it.useState)("ncbi_blast");return it.default.createElement(yh.Dialog,{maxWidth:"xl",title:"Launch MSA view",open:!0,onClose:e},it.default.createElement(jn.Tabs,{value:a,onChange:(A,u)=>{c(u)}},it.default.createElement(jn.Tab,{label:"NCBI BLAST query",value:"ncbi_blast"}),s?it.default.createElement(jn.Tab,{label:"Pre-loaded MSA datasets",value:"preloaded_msa"}):null,it.default.createElement(jn.Tab,{label:"Ensembl GeneTree",value:"ensembl_genetree"}),it.default.createElement(jn.Tab,{label:"Manual upload",value:"manual_msa"})),it.default.createElement(ko,{value:a,index:"ncbi_blast"},it.default.createElement(dA,{handleClose:e,feature:t,model:r})),s?it.default.createElement(ko,{value:a,index:"preloaded_msa"},it.default.createElement(Ih,{model:r,feature:t,handleClose:e})):null,it.default.createElement(ko,{value:a,index:"ensembl_genetree"},it.default.createElement(Fg,{model:r,feature:t,handleClose:e})),it.default.createElement(ko,{value:a,index:"manual_msa"},it.default.createElement(Og,{model:r,feature:t,handleClose:e})))}function NM(e){return e.name==="LinearBasicDisplay"}function LM(e){return e.views(t=>{let r=t.contextMenuItems;return{contextMenuItems(){let n=t.contextMenuFeature,o=(0,ya.getContainingTrack)(t),i=n?.get("type"),s=n&&["gene","mRNA","transcript"].includes(i);return[...r(),...s?[{label:"Launch MSA view",icon:Wm,onClick:()=>{(0,ya.getSession)(o).queueDialog(a=>[NA,{model:o,handleClose:a,feature:n}])}}]:[]]}}})}function LA(e){e.addToExtensionPoint("Core-extendPluggableElement",t=>(NM(t)&&(t.stateModel=LM(t.stateModel)),t))}function FA(e){e.addToExtensionPoint("LaunchView-MsaView",({session:t,data:r,msaFileLocation:n,treeFileLocation:o,connectedViewId:i,connectedFeature:s,displayName:a,colorSchemeName:c,colWidth:l,rowHeight:A,treeAreaWidth:u,treeWidth:f,drawNodeBubbles:m,labelsAlignRight:g,showBranchLen:h,querySeqName:E})=>{if(!r&&!n)throw new Error("No MSA data or file location provided when launching MSA view");t.addView("MsaView",{type:"MsaView",displayName:a,connectedViewId:i,connectedFeature:s,colorSchemeName:c,colWidth:l,rowHeight:A,treeAreaWidth:u,treeWidth:f,drawNodeBubbles:m,labelsAlignRight:g,showBranchLen:h,init:{msaData:r?.msa,treeData:r?.tree,msaUrl:n?.uri,treeUrl:o?.uri,querySeqName:E}})})}var EQ=d(b()),IQ=d(bh());var sQ=d(b()),aQ=d(gl()),_n=d(ie()),ee=d(Lt());function*FM(e,t){if(t!==-1)for(let r=e.start;r<e.end;r++)yield r;else for(let r=e.end-1;r>=e.start;r--)yield r}function Sh(e){let t=e.strand,r=e.refName;if(t!==-1&&t!==1)throw new Error(`Invalid strand value: ${t}. Expected 1 or -1.`);if(!r)throw new Error("refName is required");let n=e.subfeatures?.filter(u=>u.type==="CDS")??[],o=new Set,i=n.filter(u=>{if(u.start>=u.end)return!1;let f=`${u.start}-${u.end}`;return o.has(f)?!1:(o.add(f),!0)}).sort((u,f)=>t*(u.start-f.start)),s={},a={};if(i.length===0)return{g2p:s,p2g:a,refName:r,strand:t};let l=(3-(i[0]?.phase??0))%3,A=-1;for(let u of i)for(let f of FM(u,t)){let m=Math.floor(l++/3);s[f]=m,m!==A&&(a[m]=f,A=m)}return{g2p:s,p2g:a,refName:r,strand:t}}var sn=d(jr());yd();function NS(e,t){let r=e.sciname.replaceAll(" ","_");if(e.taxid&&t?.has(e.taxid)){let n=t.get(e.taxid);n.commonName&&(r=n.commonName.split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join("_"))}return`${e.accession}-${r}`}function LS(e){return e.replace("-","")}var Vt="https://www.ebi.ac.uk/Tools/services/rest";async function wk({sequence:e,onProgress:t}){let r=await Le(`${Vt}/clustalo/run`,{method:"POST",body:new URLSearchParams({email:"colin.diesh@gmail.com",sequence:e})});return await Zc({jobId:r,algorithm:"clustalo",onProgress:t}),{msa:await Le(`${Vt}/clustalo/result/${r}/aln-clustal_num`),tree:await Le(`${Vt}/clustalo/result/${r}/phylotree`)}}async function Bk({sequence:e,onProgress:t}){let r=await Le(`${Vt}/muscle/run`,{method:"POST",body:new URLSearchParams({email:"colin.diesh@gmail.com",format:"clw",tree:"tree1",sequence:e})});return await Zc({jobId:r,algorithm:"muscle",onProgress:t}),{msa:await Le(`${Vt}/muscle/result/${r}/fa`),tree:await Le(`${Vt}/muscle/result/${r}/phylotree`)}}async function bk({sequence:e,onProgress:t}){let r=await Le(`${Vt}/kalign/run`,{method:"POST",body:new URLSearchParams({email:"colin.diesh@gmail.com",stype:"protein",sequence:e})});return await Zc({jobId:r,algorithm:"kalign",onProgress:t}),{msa:await Le(`${Vt}/kalign/result/${r}/fa`),tree:await Le(`${Vt}/kalign/result/${r}/phylotree`)}}async function Sk({sequence:e,onProgress:t}){let r=await Le(`${Vt}/mafft/run`,{method:"POST",body:new URLSearchParams({email:"colin.diesh@gmail.com",stype:"protein",sequence:e})});return await Zc({jobId:r,algorithm:"mafft",onProgress:t}),{msa:await Le(`${Vt}/mafft/result/${r}/fa`),tree:await Le(`${Vt}/mafft/result/${r}/phylotree`)}}async function Zc({onProgress:e,jobId:t,algorithm:r}){for(;;){for(let o=0;o<10;o++)await Vs(1e3),e(`Re-checking MSA status in... ${10-o}`);let n=await Le(`${Vt}/${r}/status/${t}`);if(n==="FINISHED")break;if(n.includes("FAILURE"))throw new Error(`Failed to run: jobId ${t}`)}}async function FS({algorithm:e,sequence:t,onProgress:r}){switch(r(`Launching ${e} MSA...`),e){case"clustalo":return wk({sequence:t,onProgress:r});case"muscle":return Bk({sequence:t,onProgress:r});case"kalign":return bk({sequence:t,onProgress:r});case"mafft":return Sk({sequence:t,onProgress:r});default:throw new Error("unknown algorithm")}}async function RS({rid:e,baseUrl:t,onProgress:r}){r(`Checking BLAST status for RID: ${e}...`),await GS({rid:e,onProgress:r,baseUrl:t});let n=await Pn(`${t}?CMD=Get&RID=${e}&FORMAT_TYPE=JSON2_S&FORMAT_OBJECT=Alignment`);return{rid:e,hits:n.BlastOutput2[0]?.report.results.search.hits??[]}}async function PS({query:e,blastDatabase:t,blastProgram:r,baseUrl:n,onProgress:o,onRid:i}){o("Submitting to NCBI BLAST...");let{rid:s}=await Qk({query:e,blastDatabase:t,blastProgram:r,baseUrl:n});i(s),await GS({rid:s,onProgress:o,baseUrl:n});let a=await Pn(`${n}?CMD=Get&RID=${s}&FORMAT_TYPE=JSON2_S&FORMAT_OBJECT=Alignment`);return{rid:s,hits:a.BlastOutput2[0]?.report.results.search.hits??[]}}async function Qk({query:e,blastProgram:t,blastDatabase:r,baseUrl:n}){let o=await Le(n,{method:"POST",body:new URLSearchParams({CMD:"Put",PROGRAM:t==="quick-blastp"?"blastp":t,DATABASE:r,QUERY:e,...r==="nr_clustered_seq"?{CLUSTERED_DB:"on",DB_TYPE:"Experimental Databases"}:{},...t==="quick-blastp"?{BLAST_PROGRAMS:"kmerBlastp"}:{}})}),i=/^ {4}RID = (.*$)/m.exec(o)?.[1],s=/^ {4}RTOE = (.*$)/m.exec(o)?.[1];if(!i)throw new Error("Failed to get RID from BLAST request");return{rid:i,rtoe:s}}async function GS({rid:e,onProgress:t,baseUrl:r}){for(;;){for(let l=0;l<20;l++)await Vs(1e3),t(`Re-checking BLAST status in... ${20-l}`);let o=await Le(`${r}?CMD=Get&FORMAT_OBJECT=SearchInfo&RID=${e}`),i=/\s+Status=WAITING/m.test(o),s=/\s+Status=FAILED/m.test(o),a=/\s+Status=READY/m.test(o),c=/\s+ThereAreHits=yes/m.test(o);if(!i){if(s)throw new Error(`BLAST ${e} failed`);if(a){if(c)return!0;throw new Error("No hits found")}}}}ia();var Mk="jbrowse-msaview-taxonomy-cache",Cs="common-names",vk=2;async function OS(){return Di(Mk,vk,{upgrade(e){e.objectStoreNames.contains(Cs)&&e.deleteObjectStore(Cs),e.createObjectStore(Cs,{keyPath:"taxid"})}})}async function Tk(e){return(await OS()).get(Cs,e)}async function Dk(e){let r=(await OS()).transaction(Cs,"readwrite");for(let n of e)await r.store.put(n);await r.done}async function HS(e){let t=new Map,r=[];for(let i of e){let s=await Tk(i);s?t.set(i,{sciname:s.sciname,commonName:s.commonName}):r.push(i)}if(r.length===0)return t;let n=100,o=[];for(let i=0;i<r.length;i+=n){let s=r.slice(i,i+n),a=s.join(",");try{let l=await(await fetch(`https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=taxonomy&id=${a}&retmode=xml`)).text(),A=new Map,u=/<Taxon>\s*<TaxId>(\d+)<\/TaxId>/g,f;for(;(f=u.exec(l))!==null;){let m=Number(f[1]),g=f.index,h=1,E=g+f[0].length;for(;h>0&&E<l.length;){let B=l.indexOf("<Taxon>",E),S=l.indexOf("</Taxon>",E);if(S===-1)break;B!==-1&&B<S?(h++,E=B+7):(h--,E=S+8)}let C=l.slice(g,E),x=A.get(m),y=C.includes("<LineageEx>"),w=x?.includes("<LineageEx>");(!x||y&&!w)&&A.set(m,C)}for(let m of s){let g=A.get(m);if(g){let h=/<GenbankCommonName>(.*?)<\/GenbankCommonName>/.exec(g),E=/<CommonName>(.*?)<\/CommonName>/.exec(g),C=/<ScientificName>(.*?)<\/ScientificName>/.exec(g),x=h?.[1]??E?.[1],y=C?.[1]??"";t.set(m,{sciname:y,commonName:x}),o.push({taxid:m,sciname:y,commonName:x})}else o.push({taxid:m,sciname:"",commonName:void 0})}}catch(c){console.error("Failed to fetch taxonomy data:",c)}}return o.length>0&&await Dk(o),t}async function JS({self:e}){let{baseUrl:t,blastDatabase:r,blastProgram:n,msaAlgorithm:o,proteinSequence:i,selectedTranscript:s,rid:a}=e.blastParams,c=zs(i),l,A;if(a){e.setRid(a);let C=await RS({rid:a,baseUrl:t,onProgress:x=>{e.setProgress(x)}});l=C.hits,A=C.rid}else{let C=await PS({query:c,blastDatabase:r,blastProgram:n,baseUrl:t,onProgress:x=>{e.setProgress(x)},onRid:x=>{e.setRid(x)}});l=C.hits,A=C.rid}e.setProgress("Fetching species taxonomy info...");let u=l.map(C=>C.description[0]?.taxid).filter(C=>C!==void 0),f=await HS(u),m={},g=l.map(C=>{let x=C.description[0]??{accession:"unknown",id:"unknown",sciname:"unknown"},y=NS(x,f),w=LS(C.hsps[0]?.hseq??"");return m[y]=_k(x,f),`>${y}
${w}`}),h=await FS({algorithm:o,sequence:[`>QUERY
${c}`,...g].join(`
`),onProgress:C=>{e.setProgress(C)}}),E=JSON.stringify(m);return await Zg({proteinSequence:c,blastDatabase:r,blastProgram:n,msaAlgorithm:o,msa:h.msa,tree:h.tree,treeMetadata:E,rid:A,geneId:s?.get("parentId"),transcriptId:s?.id(),transcriptName:s?.get("name")??s?.get("id"),geneName:s?.get("gene_name")??s?.get("parentId")}),{...h,treeMetadata:E}}function _k(e,t){let r={},n=e.taxid?t.get(e.taxid):void 0;return n?.sciname&&(r["Scientific name"]=n.sciname),n?.commonName&&(r["Common name"]=n.commonName),e.accession&&(r.Accession=e.accession),e.id&&(r.ID=e.id),e.title&&(r.Description=e.title),r}var qS=d(ie());function US(e){return typeof e=="object"&&e!==null&&"hoverFeature"in e&&"hoverPosition"in e}function YS(e){return/AF-([A-Z0-9]+)-F\d+/.exec(e)?.[1]}function jS({model:e}){let{hovered:t}=(0,qS.getSession)(e),{querySeqName:r,transcriptToMsaMap:n,connectedView:o,mafRegion:i}=e;if(!o?.initialized||!US(t))return;let{coord:s,refName:a}=t.hoverPosition;if(i){if(a!==i.refName||!o.assemblyNames.includes(i.assemblyName)||s<i.start||s>=i.end)return;let l=s-i.start;return e.seqPosToVisibleCol(r,l)}if(n){let{g2p:c}=n,l=c[s];if(l!==void 0)return e.seqPosToVisibleCol(r,l)}}function el(e,t){if(t<0||t>=e.length)return;let r=0;for(let n=0;n<t;n++)e[n]!=="-"&&r++;if(e[t]!=="-")return r}function VS(e,t){let r=0;for(let n=0;n<e.length;n++)if(e[n]!=="-"){if(r===t)return n;r++}}function wd(e){let t={};for(let[r,n]of e)t[r]=n;return t}function tl({model:e,coord:t}){let{querySeqName:r,transcriptToMsaMap:n,mafRegion:o}=e,s=e.rows.find(c=>c[0]===r)?.[1];if(!s)return;let a=el(s,t);if(a!==void 0){if(o){let c=o.start+a;return c>=o.end?void 0:{refName:o.refName,start:c,end:c+1}}if(n){let{refName:c,p2g:l}=n,A=l[a],u=l[a+1];return A!==void 0&&u!==void 0?{refName:c,start:Math.min(A,u),end:Math.max(A,u)}:void 0}}}var kk="jbrowse-msaview-data";var Dn="msa-data",rl,lo;function Nk(){if(lo!==void 0)return lo;try{return typeof indexedDB>"u"?(lo=!1,!1):(lo=!0,!0)}catch{return lo=!1,!1}}async function Bd(){if(Nk())return rl||(rl=new Promise(e=>{try{let t=indexedDB.open(kk,1);t.addEventListener("error",()=>{console.warn("IndexedDB unavailable - MSA data will not persist across page refreshes"),lo=!1,e(void 0)}),t.onsuccess=()=>{e(t.result)},t.onupgradeneeded=r=>{let n=r.target.result;n.objectStoreNames.contains(Dn)||n.createObjectStore(Dn,{keyPath:"id"}).createIndex("timestamp","timestamp",{unique:!1})}}catch(t){console.warn("Failed to open IndexedDB:",t),lo=!1,e(void 0)}}),rl)}function WS(){return`msa-${Date.now()}-${Math.random().toString(36).slice(2,11)}`}async function KS(e,t){let r=await Bd();return r?new Promise(n=>{try{let i=r.transaction(Dn,"readwrite").objectStore(Dn),s={id:e,msa:t.msa,tree:t.tree,treeMetadata:t.treeMetadata,timestamp:Date.now()},a=i.put(s);a.addEventListener("error",()=>{console.warn("Failed to store MSA data:",a.error),n(!1)}),a.onsuccess=()=>{n(!0)}}catch(o){console.warn("Failed to store MSA data:",o),n(!1)}}):!1}async function zS(e){let t=await Bd();if(t)return new Promise(r=>{try{let i=t.transaction(Dn,"readonly").objectStore(Dn).get(e);i.addEventListener("error",()=>{console.warn("Failed to retrieve MSA data:",i.error),r(void 0)}),i.onsuccess=()=>{let s=i.result;r(s?{msa:s.msa,tree:s.tree,treeMetadata:s.treeMetadata}:void 0)}}catch(n){console.warn("Failed to retrieve MSA data:",n),r(void 0)}})}async function $S(e=10080*60*1e3){let t=await Bd();if(!t)return 0;let r=Date.now()-e;return new Promise(n=>{try{let s=t.transaction(Dn,"readwrite").objectStore(Dn).index("timestamp"),a=IDBKeyRange.upperBound(r),c=s.openCursor(a),l=0;c.addEventListener("error",()=>{console.warn("Failed to cleanup old MSA data:",c.error),n(l)}),c.onsuccess=A=>{let u=A.target.result;u?(u.delete(),l++,u.continue()):n(l)}}catch(o){console.warn("Failed to cleanup old MSA data:",o),n(0)}})}var Lk={A:{A:4,R:-1,N:-2,D:-2,C:0,Q:-1,E:-1,G:0,H:-2,I:-1,L:-1,K:-1,M:-1,F:-2,P:-1,S:1,T:0,W:-3,Y:-2,V:0,B:-2,Z:-1,X:0,"*":-4},R:{A:-1,R:5,N:0,D:-2,C:-3,Q:1,E:0,G:-2,H:0,I:-3,L:-2,K:2,M:-1,F:-3,P:-2,S:-1,T:-1,W:-3,Y:-2,V:-3,B:-1,Z:0,X:-1,"*":-4},N:{A:-2,R:0,N:6,D:1,C:-3,Q:0,E:0,G:0,H:1,I:-3,L:-3,K:0,M:-2,F:-3,P:-2,S:1,T:0,W:-4,Y:-2,V:-3,B:3,Z:0,X:-1,"*":-4},D:{A:-2,R:-2,N:1,D:6,C:-3,Q:0,E:2,G:-1,H:-1,I:-3,L:-4,K:-1,M:-3,F:-3,P:-1,S:0,T:-1,W:-4,Y:-3,V:-3,B:4,Z:1,X:-1,"*":-4},C:{A:0,R:-3,N:-3,D:-3,C:9,Q:-3,E:-4,G:-3,H:-3,I:-1,L:-1,K:-3,M:-1,F:-2,P:-3,S:-1,T:-1,W:-2,Y:-2,V:-1,B:-3,Z:-3,X:-2,"*":-4},Q:{A:-1,R:1,N:0,D:0,C:-3,Q:5,E:2,G:-2,H:0,I:-3,L:-2,K:1,M:0,F:-3,P:-1,S:0,T:-1,W:-2,Y:-1,V:-2,B:0,Z:3,X:-1,"*":-4},E:{A:-1,R:0,N:0,D:2,C:-4,Q:2,E:5,G:-2,H:0,I:-3,L:-3,K:1,M:-2,F:-3,P:-1,S:0,T:-1,W:-3,Y:-2,V:-2,B:1,Z:4,X:-1,"*":-4},G:{A:0,R:-2,N:0,D:-1,C:-3,Q:-2,E:-2,G:6,H:-2,I:-4,L:-4,K:-2,M:-3,F:-3,P:-2,S:0,T:-2,W:-2,Y:-3,V:-3,B:-1,Z:-2,X:-1,"*":-4},H:{A:-2,R:0,N:1,D:-1,C:-3,Q:0,E:0,G:-2,H:8,I:-3,L:-3,K:-1,M:-2,F:-1,P:-2,S:-1,T:-2,W:-2,Y:2,V:-3,B:0,Z:0,X:-1,"*":-4},I:{A:-1,R:-3,N:-3,D:-3,C:-1,Q:-3,E:-3,G:-4,H:-3,I:4,L:2,K:-3,M:1,F:0,P:-3,S:-2,T:-1,W:-3,Y:-1,V:3,B:-3,Z:-3,X:-1,"*":-4},L:{A:-1,R:-2,N:-3,D:-4,C:-1,Q:-2,E:-3,G:-4,H:-3,I:2,L:4,K:-2,M:2,F:0,P:-3,S:-2,T:-1,W:-2,Y:-1,V:1,B:-4,Z:-3,X:-1,"*":-4},K:{A:-1,R:2,N:0,D:-1,C:-3,Q:1,E:1,G:-2,H:-1,I:-3,L:-2,K:5,M:-1,F:-3,P:-1,S:0,T:-1,W:-3,Y:-2,V:-2,B:0,Z:1,X:-1,"*":-4},M:{A:-1,R:-1,N:-2,D:-3,C:-1,Q:0,E:-2,G:-3,H:-2,I:1,L:2,K:-1,M:5,F:0,P:-2,S:-1,T:-1,W:-1,Y:-1,V:1,B:-3,Z:-1,X:-1,"*":-4},F:{A:-2,R:-3,N:-3,D:-3,C:-2,Q:-3,E:-3,G:-3,H:-1,I:0,L:0,K:-3,M:0,F:6,P:-4,S:-2,T:-2,W:1,Y:3,V:-1,B:-3,Z:-3,X:-1,"*":-4},P:{A:-1,R:-2,N:-2,D:-1,C:-3,Q:-1,E:-1,G:-2,H:-2,I:-3,L:-3,K:-1,M:-2,F:-4,P:7,S:-1,T:-1,W:-4,Y:-3,V:-2,B:-2,Z:-1,X:-2,"*":-4},S:{A:1,R:-1,N:1,D:0,C:-1,Q:0,E:0,G:0,H:-1,I:-2,L:-2,K:0,M:-1,F:-2,P:-1,S:4,T:1,W:-3,Y:-2,V:-2,B:0,Z:0,X:0,"*":-4},T:{A:0,R:-1,N:0,D:-1,C:-1,Q:-1,E:-1,G:-2,H:-2,I:-1,L:-1,K:-1,M:-1,F:-2,P:-1,S:1,T:5,W:-2,Y:-2,V:0,B:-1,Z:-1,X:0,"*":-4},W:{A:-3,R:-3,N:-4,D:-4,C:-2,Q:-2,E:-3,G:-2,H:-2,I:-3,L:-2,K:-3,M:-1,F:1,P:-4,S:-3,T:-2,W:11,Y:2,V:-3,B:-4,Z:-3,X:-2,"*":-4},Y:{A:-2,R:-2,N:-2,D:-3,C:-2,Q:-1,E:-2,G:-3,H:2,I:-1,L:-1,K:-2,M:-1,F:3,P:-3,S:-2,T:-2,W:2,Y:7,V:-1,B:-3,Z:-2,X:-1,"*":-4},V:{A:0,R:-3,N:-3,D:-3,C:-1,Q:-2,E:-2,G:-3,H:-3,I:3,L:1,K:-2,M:1,F:-1,P:-2,S:-2,T:0,W:-3,Y:-1,V:4,B:-3,Z:-2,X:-1,"*":-4},B:{A:-2,R:-1,N:3,D:4,C:-3,Q:0,E:1,G:-1,H:0,I:-3,L:-4,K:0,M:-3,F:-3,P:-2,S:0,T:-1,W:-4,Y:-3,V:-3,B:4,Z:1,X:-1,"*":-4},Z:{A:-1,R:0,N:0,D:1,C:-3,Q:3,E:4,G:-2,H:0,I:-3,L:-3,K:1,M:-1,F:-3,P:-1,S:0,T:-1,W:-3,Y:-2,V:-2,B:1,Z:4,X:-1,"*":-4},X:{A:0,R:-1,N:-1,D:-1,C:-2,Q:-1,E:-1,G:-1,H:-1,I:-1,L:-1,K:-1,M:-1,F:-1,P:-2,S:0,T:0,W:-2,Y:-1,V:-1,B:-1,Z:-1,X:-1,"*":-4},"*":{A:-4,R:-4,N:-4,D:-4,C:-4,Q:-4,E:-4,G:-4,H:-4,I:-4,L:-4,K:-4,M:-4,F:-4,P:-4,S:-4,T:-4,W:-4,Y:-4,V:-4,B:-4,Z:-4,X:-4,"*":1}};function XS(e,t){let r=e.toUpperCase(),n=t.toUpperCase();return Lk[r]?.[n]??-4}var Fk=-10,Rk=-.5;function Pk(e,t,r=Fk,n=Rk){let o=e.length,i=t.length,s=[],a=[],c=[];for(let E=0;E<=o;E++){s[E]=[],a[E]=[],c[E]=[];for(let C=0;C<=i;C++)s[E][C]=-1/0,a[E][C]=-1/0,c[E][C]=-1/0}s[0][0]=0;for(let E=1;E<=o;E++)a[E][0]=r+(E-1)*n;for(let E=1;E<=i;E++)c[0][E]=r+(E-1)*n;for(let E=1;E<=o;E++)for(let C=1;C<=i;C++){let x=XS(e[E-1],t[C-1]);s[E][C]=Math.max(s[E-1][C-1],a[E-1][C-1],c[E-1][C-1])+x,a[E][C]=Math.max(s[E-1][C]+r,a[E-1][C]+n),c[E][C]=Math.max(s[E][C-1]+r,c[E][C-1]+n)}let l="",A="",u=o,f=i,m=[s[o][i],a[o][i],c[o][i]],g=Math.max(...m),h=g===s[o][i]?"M":g===a[o][i]?"Ix":"Iy";for(;u>0||f>0;)if(h==="M"&&u>0&&f>0){l=e[u-1]+l,A=t[f-1]+A;let E=XS(e[u-1],t[f-1]),C=s[u-1][f-1],x=a[u-1][f-1];s[u][f]===C+E?h="M":s[u][f]===x+E?h="Ix":h="Iy",u--,f--}else if(h==="Ix"&&u>0)l=e[u-1]+l,A="-"+A,h=a[u][f]===s[u-1][f]+r?"M":"Ix",u--;else if(f>0)l="-"+l,A=t[f-1]+A,h=c[u][f]===s[u][f-1]+r?"M":"Iy",f--;else break;return{alignedSeq1:l,alignedSeq2:A,score:g}}function Gk(e,t){let r="";for(let n=0;n<e.length;n++){let o=e[n],i=t[n];o==="-"||i==="-"?r+=" ":o.toUpperCase()===i.toUpperCase()?r+="|":r+=" "}return r}function ZS(e,t){let{alignedSeq1:r,alignedSeq2:n}=Pk(e,t);return{consensus:Gk(r,n),alns:[{id:"msa",seq:r},{id:"structure",seq:n}]}}function eQ(e){let t=e.alns[0].seq,r=e.alns[1].seq;if(t.length!==r.length)throw new Error("Aligned sequences must have same length");let n=0,o=0,i=new Map,s=new Map;for(let a=0;a<t.length;a++){let c=t[a],l=r[a];c!=="-"&&l!=="-"?(i.set(n,o),s.set(o,n),n++,o++):c==="-"?o++:n++}return{seq1ToSeq2:i,seq2ToSeq1:s}}var Jk=(0,sQ.lazy)(()=>Promise.resolve().then(()=>(iQ(),oQ)));function Uk(e){let{mouseCol:t,connectedProteinViews:r}=e;if(r.length!==0)for(let n of r){let o=n.proteinView?.structures?.[n.structureIdx];if(!o)continue;if(t===void 0){o.clearHighlightFromExternal?.();continue}let i=e.getSequenceByRowName(n.msaRowName);if(!i)continue;let s=el(i,t);if(s===void 0){o.clearHighlightFromExternal?.();continue}let a=n.msaToStructure[s];a===void 0?o.clearHighlightFromExternal?.():o.highlightFromExternal?.(a)}}function bd(){return ee.types.compose(aQ.BaseViewModel,xd(),ee.types.model("MsaView",{connectedViewId:ee.types.maybe(ee.types.string),connectedFeature:ee.types.frozen(),connectedHighlights:ee.types.array(ee.types.model({refName:ee.types.string,start:ee.types.number,end:ee.types.number})),blastParams:ee.types.frozen(),querySeqName:"QUERY",uniprotId:ee.types.maybe(ee.types.string),zoomToBaseLevel:!1,init:ee.types.frozen(),connectedStructures:ee.types.array(ee.types.frozen()),dataStoreId:ee.types.maybe(ee.types.string),mafRegion:ee.types.frozen()})).volatile(()=>({rid:void 0,progress:"",error:void 0,loadingStoredData:!1})).views(e=>({getRowByName(t){return e.rows.find(r=>r[0]===t)},getSequenceByRowName(t){return e.rows.find(r=>r[0]===t)?.[1]}})).views(e=>({get transcriptToMsaMap(){return e.connectedFeature?Sh(e.connectedFeature):void 0},get processing(){return!!e.progress},get connectedView(){let{views:t}=(0,_n.getSession)(e);return t.find(r=>r.id===e.connectedViewId)},get connectedProteinViews(){let{views:t}=(0,_n.getSession)(e);return e.connectedStructures.map(r=>{let n=t.find(o=>o.id===r.proteinViewId);return n?{...r,proteinView:n}:void 0}).filter(r=>!!r)}})).views(e=>({get structureHoverCol(){for(let t of e.connectedProteinViews){let n=t.proteinView?.structures?.[t.structureIdx]?.hoverPosition?.structureSeqPos;if(n!==void 0){let o=t.structureToMsa[n];if(o!==void 0){let i=e.getSequenceByRowName(t.msaRowName);if(i){let s=VS(i,o);if(s!==void 0)return e.globalColToVisibleCol(s)}}}}}})).views(e=>({get mouseCol2(){let t=e.structureHoverCol;return t!==void 0?t:jS({model:e})},get clickCol2(){}})).actions(e=>({setZoomToBaseLevel(t){e.zoomToBaseLevel=t},setError(t){e.error=t},setProgress(t){e.progress=t},setRid(t){e.rid=t},setConnectedHighlights(t){e.connectedHighlights=(0,ee.cast)(t)},addToConnectedHighlights(t){e.connectedHighlights.push(t)},clearConnectedHighlights(){e.connectedHighlights=(0,ee.cast)([])},setBlastParams(t){e.blastParams=t},setInit(t){e.init=t},setQuerySeqName(t){e.querySeqName=t},setUniprotId(t){e.uniprotId=t},setDataStoreId(t){e.dataStoreId=t},setMafRegion(t){e.mafRegion=t},setLoadingStoredData(t){e.loadingStoredData=t},handleMsaClick(t){let{connectedView:r,zoomToBaseLevel:n}=e,{assemblyManager:o}=(0,_n.getSession)(e),i=tl({model:e,coord:t});if(!(!i||!r))if(n)r.navTo(i);else{let s=o.get(r.assemblyNames[0])?.getCanonicalRefName(i.refName)??i.refName;r.centerAt(i.start,s)}},connectToStructure(t,r,n){let o=n??e.querySeqName,i=e.getSequenceByRowName(o);if(!i)throw new Error(`MSA row "${o}" not found`);let s=i.replaceAll("-",""),{views:a}=(0,_n.getSession)(e),c=a.find(h=>h.id===t);if(!c)throw new Error(`ProteinView "${t}" not found`);let l=c.structures?.[r];if(!l)throw new Error(`Structure at index ${r} not found`);let A=l.structureSequences?.[0];if(!A)throw new Error("Structure sequence not available");let u=ZS(s,A),{seq1ToSeq2:f,seq2ToSeq1:m}=eQ(u),g={proteinViewId:t,structureIdx:r,msaRowName:o,msaToStructure:wd(f),structureToMsa:wd(m)};e.connectedStructures.push(g)},disconnectFromStructure(t,r){let n=e.connectedStructures.findIndex(o=>o.proteinViewId===t&&o.structureIdx===r);n!==-1&&e.connectedStructures.splice(n,1)},disconnectAllStructures(){e.connectedStructures.clear()}})).actions(e=>{let t=e.setMouseClickPos.bind(e);return{setMouseClickPos(r,n){t(r,n),r!==void 0&&e.handleMsaClick(r)}}}).views(e=>({extraViewMenuItems(){return[{label:"Zoom to base level on click?",checked:e.zoomToBaseLevel,type:"checkbox",onClick:()=>{e.setZoomToBaseLevel(!e.zoomToBaseLevel)}},{label:"Connect to protein structure...",onClick:()=>{(0,_n.getSession)(e).queueDialog(t=>[Jk,{model:e,handleClose:t}])}},...e.connectedStructures.length>0?[{label:"Disconnect from protein structures",onClick:()=>{e.disconnectAllStructures()}}]:[]]}})).actions(e=>({afterCreate(){$S().catch(t=>{console.error("Failed to cleanup old MSA data:",t)}),(0,ee.addDisposer)(e,(0,sn.autorun)(async()=>{let{dataStoreId:t,rows:r}=e;if(t&&r.length===0)try{e.setLoadingStoredData(!0);let n=await zS(t);n&&(n.msa&&e.setMSA(n.msa),n.tree&&e.setTree(n.tree))}catch(n){console.error("Failed to load MSA data from IndexedDB:",n)}finally{e.setLoadingStoredData(!1)}})),(0,ee.addDisposer)(e,(0,sn.autorun)(async()=>{let{rows:t,dataStoreId:r}=e;if(t.length>0&&!r){if(!!(e.msaFilehandle??e.treeFilehandle))return;let o=e.data.msa,i=e.data.tree;if(o||i)try{let s=WS();await KS(s,{msa:o,tree:i,treeMetadata:e.data.treeMetadata})&&e.setDataStoreId(s)}catch(s){console.error("Failed to store MSA data to IndexedDB:",s)}}})),(0,ee.addDisposer)(e,(0,sn.autorun)(async()=>{if(e.blastParams)try{e.setProgress("Submitting query"),e.setError(void 0);let t=await JS({self:e});e.setData(t),e.setBlastParams(void 0)}catch(t){e.setError(t),console.error(t)}finally{e.setProgress("")}})),(0,ee.addDisposer)(e,(0,sn.autorun)(async()=>{let{init:t}=e;if(t)try{e.setError(void 0);let{msaData:r,msaUrl:n,treeData:o,treeUrl:i,querySeqName:s}=t;if(n){let a=YS(n);a&&(e.setUniprotId(a),e.setQuerySeqName("query"))}if(s&&e.setQuerySeqName(s),r)e.setMSA(r);else if(n){let a=await fetch(n);if(!a.ok)throw new Error(`Failed to fetch MSA: ${a.status}`);let c=await a.text();e.setMSA(c)}if(o)e.setTree(o);else if(i){let a=await fetch(i);if(!a.ok)throw new Error(`Failed to fetch tree: ${a.status}`);let c=await a.text();e.setTree(c)}e.setInit(void 0)}catch(r){e.setError(r),console.error(r)}})),(0,ee.addDisposer)(e,(0,sn.autorun)(()=>{let{mouseCol:t,mouseClickCol:r}=e,n=t===void 0?void 0:tl({model:e,coord:t}),o=r===void 0?void 0:tl({model:e,coord:r});e.setConnectedHighlights([n,o].filter(i=>!!i))})),(0,ee.addDisposer)(e,(0,sn.autorun)(()=>{Uk(e)})),(0,ee.addDisposer)(e,(0,sn.autorun)(()=>{let{views:t}=(0,_n.getSession)(e),{connectedViewId:r,uniprotId:n,rows:o,connectedStructures:i}=e;if(!(!n||o.length===0))for(let s of t){let a=s;if(!(a.type!=="ProteinView"||!a.structures))for(let c=0;c<a.structures.length;c++){let l=a.structures[c];if(!(l.connectedViewId!==r||l.uniprotId!==n||i.some(u=>u.proteinViewId===a.id&&u.structureIdx===c))&&l.structureSequences?.[0])try{e.connectToStructure(a.id,c)}catch(u){console.error("Failed to auto-connect to ProteinView:",u)}}}})),(0,ee.addDisposer)(e,(0,sn.autorun)(()=>{let{views:t}=(0,_n.getSession)(e),{connectedViewId:r,transcriptToMsaMap:n,querySeqName:o}=e;if(!r||!n)return;let i=[];for(let a of t){let c=a;if(!(c.type!=="ProteinView"||!c.structures))for(let l of c.structures){if(l.connectedViewId!==r)continue;let A=l.hoverGenomeHighlights;if(!A||A.length===0)continue;let{g2p:u}=n;for(let f of A)for(let m=f.start;m<f.end;m++){let g=u[m];if(g!==void 0){let h=e.seqPosToGlobalCol(o,g);i.includes(h)||i.push(h)}}}}let s=i.map(a=>e.globalColToVisibleCol(a)).filter(a=>a!==void 0);e.setHighlightedColumns(s.length>0?s:void 0)}))}}))}var zk=(0,EQ.lazy)(()=>Promise.resolve().then(()=>(CQ(),hQ)));function vd(e){e.addViewType(()=>new IQ.default({name:"MsaView",stateModel:bd(),ReactComponent:zk}))}var xQ="2.2.8";var ol=class extends yQ.default{constructor(){super(...arguments);this.name="MsaViewPlugin";this.version=xQ}install(r){vd(r),LA(r),FA(r),ml(r),kl(r)}configure(r){(0,wQ.isAbstractMenuManager)(r.rootModel)&&r.rootModel.appendToSubMenu(["Add"],{label:"Multiple sequence alignment view",icon:em,onClick:n=>{n.addView("MsaView",{})}})}rootConfigurationSchema(r){return{msa:(0,Td.ConfigurationSchema)("MSA",{datasets:Dd.types.maybe(Dd.types.array((0,Td.ConfigurationSchema)("MSAEntry",{datasetId:{type:"string",defaultValue:""},description:{type:"string",defaultValue:""},name:{type:"string",defaultValue:""},adapter:r.pluggableConfigSchemaType("adapter")})))})}}};return FQ($k);})();
/*! Bundled license information:

use-sync-external-store/cjs/use-sync-external-store-shim.production.js:
  (**
   * @license React
   * use-sync-external-store-shim.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

dompurify/dist/purify.es.mjs:
  (*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE *)

escape-html/index.js:
  (*!
   * escape-html
   * Copyright(c) 2012-2013 TJ Holowaychuk
   * Copyright(c) 2015 Andreas Lubbe
   * Copyright(c) 2015 Tiancheng "Timothy" Gu
   * MIT Licensed
   *)
*/
//# sourceMappingURL=jbrowse-plugin-msaview.umd.production.min.js.map

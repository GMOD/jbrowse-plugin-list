!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@jbrowse/core/configuration"),require("@jbrowse/core/Plugin"),require("@jbrowse/core/pluggableElementTypes/DisplayType"),require("mobx-state-tree"),require("@jbrowse/core/pluggableElementTypes/models"),require("@jbrowse/core/util"),require("@jbrowse/core/util/tracks"),require("@mui/material/SvgIcon"),require("react"),require("@jbrowse/core/util/types/mst"),require("@mui/material/utils"),require("react/jsx-runtime"),require("mobx-react"),require("@mui/material"),require("tss-react/mui"),require("@jbrowse/core/BaseFeatureWidget/BaseFeatureDetail"),require("prop-types"),require("@jbrowse/core/ui"),require("@jbrowse/core/data_adapters/BaseAdapter"),require("@jbrowse/core/util/rxjs"),require("@jbrowse/core/util/io"),require("@jbrowse/core/pluggableElementTypes/AdapterType"),require("@jbrowse/core/pluggableElementTypes/TrackType"),require("@jbrowse/core/pluggableElementTypes/WidgetType")):"function"==typeof define&&define.amd?define(["exports","@jbrowse/core/configuration","@jbrowse/core/Plugin","@jbrowse/core/pluggableElementTypes/DisplayType","mobx-state-tree","@jbrowse/core/pluggableElementTypes/models","@jbrowse/core/util","@jbrowse/core/util/tracks","@mui/material/SvgIcon","react","@jbrowse/core/util/types/mst","@mui/material/utils","react/jsx-runtime","mobx-react","@mui/material","tss-react/mui","@jbrowse/core/BaseFeatureWidget/BaseFeatureDetail","prop-types","@jbrowse/core/ui","@jbrowse/core/data_adapters/BaseAdapter","@jbrowse/core/util/rxjs","@jbrowse/core/util/io","@jbrowse/core/pluggableElementTypes/AdapterType","@jbrowse/core/pluggableElementTypes/TrackType","@jbrowse/core/pluggableElementTypes/WidgetType"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).JBrowsePluginGDC={},e.JBrowseExports["@jbrowse/core/configuration"],e.JBrowseExports["@jbrowse/core/Plugin"],e.JBrowseExports["@jbrowse/core/pluggableElementTypes/DisplayType"],e.JBrowseExports["mobx-state-tree"],e.JBrowseExports["@jbrowse/core/pluggableElementTypes/models"],e.JBrowseExports["@jbrowse/core/util"],e.JBrowseExports["@jbrowse/core/util/tracks"],e.JBrowseExports["@mui/material/SvgIcon"],e.JBrowseExports.react,e.JBrowseExports["@jbrowse/core/util/types/mst"],e.JBrowseExports["@mui/material/utils"],e.JBrowseExports["react/jsx-runtime"],e.JBrowseExports["mobx-react"],e.JBrowseExports["@mui/material"],e.JBrowseExports["tss-react/mui"],e.JBrowseExports["@jbrowse/core/BaseFeatureWidget/BaseFeatureDetail"],e.JBrowseExports["prop-types"],e.JBrowseExports["@jbrowse/core/ui"],e.JBrowseExports["@jbrowse/core/data_adapters/BaseAdapter"],e.JBrowseExports["@jbrowse/core/util/rxjs"],e.JBrowseExports["@jbrowse/core/util/io"],e.JBrowseExports["@jbrowse/core/pluggableElementTypes/AdapterType"],e.JBrowseExports["@jbrowse/core/pluggableElementTypes/TrackType"],e.JBrowseExports["@jbrowse/core/pluggableElementTypes/WidgetType"])}(this,(function(e,t,n,a,r,i,o,s,l,c,u,d,p,f,h,m,g,y,b,_,v,w,E,C,T){"use strict";var k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},x={},A={};Object.defineProperty(A,"__esModule",{value:!0}),A.default=class{constructor(e){this.name=e.name||"UNKNOWN",this.maybeDisplayName=e.displayName}get displayName(){return this.maybeDisplayName||this.name}};var S={};Object.defineProperty(S,"__esModule",{value:!0}),S.resolveLateType=S.getEnumerationValues=S.getDefaultValue=S.getPropertyType=S.getUnionSubTypes=S.getSubType=void 0;const D=r;function j(e){let t;if((0,D.isOptionalType)(e))t=e._subtype||e.type;else{if(!(0,D.isArrayType)(e)&&!(0,D.isMapType)(e)){if("function"==typeof e.getSubType)return e.getSubType();throw new TypeError("unsupported mst type")}t=e._subtype||e._subType||e.subType}if(!t)throw new Error("failed to get subtype");return t}function I(e){if(!(0,D.isUnionType)(e))throw new TypeError("not an MST union type");const t=e._types||e.types||j(e)._types||j(e).types;if(!t)throw new Error("failed to extract subtypes from mst union");return t}S.getSubType=j,S.getUnionSubTypes=I,S.getPropertyType=function(e,t){return e.properties[t]},S.getDefaultValue=function(e){if(!(0,D.isOptionalType)(e))throw new TypeError("type must be an optional type");return e._defaultValue||e.defaultValue},S.getEnumerationValues=function(e){return I(e).map((e=>e.value))},S.resolveLateType=function(e){return(0,D.isUnionType)(e)||(0,D.isArrayType)(e)||!(0,D.isLateType)(e)?e:e.getSubType()};var O=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(x,"__esModule",{value:!0});const F=O(A),L=S;var R=x.default=class extends F.default{constructor(e){if(super(e),this.stateModel=e.stateModel,this.configSchema=e.configSchema,!this.stateModel)throw new Error(`no stateModel defined for internet account type ${this.name}`);if(!this.configSchema)throw new Error(`no configSchema provided for internet account type ${this.name}`);if(!(0,L.getDefaultValue)(this.configSchema).type)throw new Error(`${this.configSchema?this.configSchema.name:"UNKNOWN"} is not explicitlyTyped`)}};function N(e){return c.createElement(l,{...e},c.createElement("path",{d:"M12,2C6.48,2,2,6.48,2,12c0,1.33,0.26,2.61,0.74,3.77L8,10.5l3.3,2.78L14.58,10H13V8h5v5h-2v-1.58L11.41,16l-3.29-2.79 l-4.4,4.4C5.52,20.26,8.56,22,12,22h8c1.1,0,2-0.9,2-2v-8C22,6.48,17.52,2,12,2z M19.5,20.5c-0.55,0-1-0.45-1-1s0.45-1,1-1 s1,0.45,1,1S20.05,20.5,19.5,20.5z"}))}var z=function(e){var t=r.types.model({id:r.types.identifier,category:r.types.string,type:r.types.string,filter:r.types.string}).actions((function(e){return{setCategory:function(t){e.category=t,e.filter=""},setFilter:function(t){e.filter=t}}})),n=r.types.model({id:r.types.identifier,value:r.types.string});return r.types.model("GDCFilterWidget",{id:u.ElementId,type:r.types.literal("GDCFilterWidget"),target:r.types.safeReference(e.pluggableConfigSchemaType("track")),filters:r.types.array(t),colourBy:r.types.map(n)}).actions((function(e){return{setTarget:function(t){e.target=t},addFilter:function(n,a,r,i){e.filters.push(t.create({id:n,category:a,type:r,filter:i}))},deleteFilter:function(t){var n=e.filters.findIndex((function(e){return e.id===t}));e.filters.remove(e.filters[n])},getFiltersByType:function(t){return e.filters.filter((function(e){return e.type===t}))},clearFilters:function(){e.filters=e.filters.filter((function(e){return 0===e.filter.length}))},setColourBy:function(t){e.colourBy[0]=t},getColourBy:function(){return e.colourBy[0]?e.colourBy[0]:{}}}}))};let P;const M=new Uint8Array(16);function G(){if(!P&&(P="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!P))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return P(M)}const B=[];for(let e=0;e<256;++e)B.push((e+256).toString(16).slice(1));var $={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function q(e,t,n){if($.randomUUID&&!t&&!e)return $.randomUUID();const a=(e=e||{}).random||(e.rng||G)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=a[e];return t}return function(e,t=0){return B[e[t+0]]+B[e[t+1]]+B[e[t+2]]+B[e[t+3]]+"-"+B[e[t+4]]+B[e[t+5]]+"-"+B[e[t+6]]+B[e[t+7]]+"-"+B[e[t+8]]+B[e[t+9]]+"-"+B[e[t+10]]+B[e[t+11]]+B[e[t+12]]+B[e[t+13]]+B[e[t+14]]+B[e[t+15]]}(a)}var U={},H={exports:{}};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}(H);var V={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=d}(V);var W=H.exports;Object.defineProperty(U,"__esModule",{value:!0});var Z=U.default=void 0,J=(0,W(V).default)((0,p.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");Z=U.default=J;var K={},Q=H.exports;Object.defineProperty(K,"__esModule",{value:!0});var Y=K.default=void 0,X=(0,Q(V).default)((0,p.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");Y=K.default=X;const ee=f.observer((e=>{const{schema:t,filterModel:n,facets:a}=e,[r,i]=c.useState(n.category?a.find((e=>e.name===n.category)):a[0]),[o,s]=c.useState(n.filter?n.filter.split(","):[]);function l(e,t){let n={op:"and",content:[]};if(e.length>0)for(const t of e)""!==t.filter&&n.content?.push({op:"in",content:{field:`${t.type}s.${t.category}`,value:t.filter.split(",")}});else n={};t.adapter.filters.set(JSON.stringify(n))}return c.createElement(c.Fragment,null,c.createElement(h.List,null,c.createElement(h.ListItem,{style:{gap:"4px"}},c.createElement(h.FormControl,{fullWidth:!0,size:"small"},c.createElement(h.Select,{labelId:"category-select-label",id:"category-select",value:r,onChange:e=>{i(e.target.value),s([]),n.setCategory(e.target.value.name)},label:"Category"},a.map((e=>c.createElement(h.MenuItem,{value:e,key:e.name},e.prettyName))))),c.createElement(h.FormControl,{fullWidth:!0,size:"small"},c.createElement(h.Select,{labelId:"demo-mutiple-checkbox-label",id:"demo-mutiple-checkbox",multiple:!0,value:o,onChange:e=>{s(e.target.value),n.setFilter(e.target.value.join(",")),l(t.filters,t.target)},input:c.createElement(h.Input,null),displayEmpty:!0,renderValue:e=>0===e.length?c.createElement("em",null,"Filters"):e.join(", ")},c.createElement(h.MenuItem,{disabled:!0,value:""},c.createElement("em",null,"Filters")),r.values.map((e=>c.createElement(h.MenuItem,{key:e,value:e},c.createElement(h.Checkbox,{checked:o.indexOf(e)>-1}),c.createElement(h.ListItemText,{primary:e})))))),c.createElement(h.Tooltip,{title:"Remove filter","aria-label":"remove",placement:"bottom"},c.createElement(h.IconButton,{"aria-label":"remove filter",onClick:()=>{t.deleteFilter(n.id),l(t.filters,t.target)}},c.createElement(Y,null))))))})),te=f.observer((({schema:e,type:t,facets:n})=>{const a=n[0].name;return c.createElement(c.Fragment,null,e.filters.map((a=>a.type===t?c.createElement(ee,{schema:e,filterModel:a,key:a.id,facets:n}):null)),c.createElement(h.Button,{variant:"outlined",onClick:()=>{e.addFilter(q(),a,t,"")},startIcon:c.createElement(Z,null)},"Add Filter"))})),ne=[{name:"consequence.transcript.annotation.polyphen_impact",prettyName:"polyphen impact",values:["benign","probably_damaging","possibly_damaging","unknown"]},{name:"consequence.transcript.annotation.sift_impact",prettyName:"sift impact",values:["deleterious","tolerated","deleterious_low_confidence","tolerated_low_confidence"]},{name:"consequence.transcript.annotation.vep_impact",prettyName:"vep impact",values:["modifier","moderate","low","high"]},{name:"consequence.transcript.consequence_type",prettyName:"consequence type",values:["missense_variant","downstream_gene_variant","non_coding_transcript_exon_variant","synonymous_variant","intron_variant","upstream_gene_variant","3_prime_UTR_variant","stop_gained","frameshift_variant","5_prime_UTR_variant","splice_region_variant","splice_acceptor_variant","splice_donor_variant","inframe_deletion","inframe_insertion","start_lost","protein_altering_variant","stop_lost","stop_retained_variant","coding_sequence_variant","incomplete_terminal_codon_variant","mature_miRNA_variant"]},{name:"mutation_subtype",prettyName:"mutation subtype",values:["single base substitution","small deletion","small insertion"]},{name:"occurrence.case.observation.variant_calling.variant_caller",prettyName:"variant caller",values:["mutect2","varscan","muse","somaticsniper"]}],ae=[{name:"biotype",prettyName:"biotype",values:["protein_coding","lincRNA","miRNA","transcribed_unprocessed_pseudogene","processed_pseudogene","antisense","unprocessed_pseudogene","snoRNA","IG_V_gene","processed_transcript","transcribed_processed_pseudogene","TR_V_gene","TR_J_gene","unitary_pseudogene","misc_RNA","snRNA","IG_V_pseudogene","polymorphic_pseudogene","IG_D_gene","sense_overlapping","sense_intronic","IG_C_gene","TEC","IG_J_gene","rRNA","TR_C_gene","TR_D_gene","TR_V_pseudogene","macro_lncRNA","transcribed_unitary_pseudogene","translated_unprocessed_pseudogene","vaultRNA"]},{name:"is_cancer_gene_census",prettyName:"is cancer gene census",values:["true"]}],re=[{name:"demographic.ethnicity",prettyName:"ethnicity",values:["not hispanic or latino","not reported","hispanic or latino","unknown"]},{name:"demographic.gender",prettyName:"gender",values:["female","male","unknown","not reported","unspecified"]},{name:"demographic.race",prettyName:"race",values:["white","not reported","unknown","black or african american","asian","other","american indian or alaska native","native hawaiian or other pacific islander","not allowed to collect"]},{name:"disease_type",prettyName:"disease type",values:["adenomas and adenocarcinomas","ductal and lobular neoplasms","epithelial neoplasms, nos","gliomas","squamous cell neoplasms","myeloid leukemias","cystic, mucinous and serous neoplasms","nevi and melanomas","lymphoid leukemias","transitional cell papillomas and carcinomas","complex mixed and stromal neoplasms","neuroepitheliomatous neoplasms","neoplasms, nos","plasma cell tumors","germ cell neoplasms","mesothelial neoplasms","myomatous neoplasms","osseous and chondromatous neoplasms","mature b-cell lymphomas","chronic myeloproliferative disorders","lymphoid neoplasm diffuse large b-cell lymphoma","myelodysplastic syndromes","lipomatous neoplasms","fibromatous neoplasms","acinar cell neoplasms","meningiomas","soft tissue tumors and sarcomas, nos","not reported","thymic epithelial neoplasms","complex epithelial neoplasms","paragangliomas and glomus tumors","leukemias, nos","blood vessel tumors","miscellaneous bone tumors","specialized gonadal neoplasms","nerve sheath tumors","synovial-like neoplasms","mature t- and nk-cell lymphomas","not applicable","miscellaneous tumors","other leukemias","neoplasms of histiocytes and accessory lymphoid cells","mucoepidermoid neoplasms","adnexal and skin appendage neoplasms","basal cell neoplasms","unknown","malignant lymphomas, nos or diffuse","fibroepithelial neoplasms","granular cell tumors and alveolar soft part sarcomas","hodgkin lymphoma","trophoblastic neoplasms","myxomatous neoplasms","precursor cell lymphoblastic lymphoma","mast cell tumors","mesonephromas","immunoproliferative diseases","giant cell tumors","odontogenic tumors","lymphatic vessel tumors","other hematologic disorders"]},{name:"primary_site",prettyName:"primary site",values:["bronchus and lung","hematopoietic and reticuloendothelial systems","breast","colon","spinal cord, cranial nerves, and other parts of central nervous system","ovary","kidney","unknown","skin","pancreas","prostate gland","uterus, nos","bladder","liver and intrahepatic bile ducts","connective, subcutaneous and other soft tissues","thyroid gland","brain","esophagus","stomach","rectum","other and ill-defined sites","adrenal gland","corpus uteri","other and ill-defined digestive organs","heart, mediastinum, and pleura","cervix uteri","other and unspecified major salivary glands","lymph nodes","testis","bones, joints and articular cartilage of other and unspecified sites","retroperitoneum and peritoneum","other and ill-defined sites in lip, oral cavity and pharynx","not reported","thymus","peripheral nerves and autonomic nervous system","bones, joints and articular cartilage of limbs","small intestine","gallbladder","meninges","anus and anal canal","eye and adnexa","other and unspecified parts of biliary tract","other and unspecified urinary organs","oropharynx","other endocrine glands and related structures","larynx","other and unspecified female genital organs","other and unspecified parts of tongue","nasopharynx","rectosigmoid junction","vagina","floor of mouth","tonsil","other and unspecified parts of mouth","nasal cavity and middle ear","penis","hypopharynx","base of tongue","ureter","gum","vulva","lip","trachea","palate","blood","other and unspecified male genital organs","renal pelvis"]},{name:"project.program.name",prettyName:"program name",values:["GENIE","FM","TCGA","TARGET","MMRF","CPTAC","BEATAML1.0","NCICCR","OHSU","CGCI","WCDT","ORGANOID","CTSP","HCMI","VAREPOP"]},{name:"project.project_id",prettyName:"project id",values:["FM-AD","GENIE-MSK","GENIE-DFCI","GENIE-MDA","GENIE-JHU","GENIE-UHN","TARGET-AML","GENIE-VICC","TARGET-ALL-P2","TARGET-NBL","TCGA-BRCA","GENIE-GRCC","MMRF-COMMPASS","GENIE-NKI","TARGET-WT","TCGA-GBM","TCGA-OV","TCGA-LUAD","BEATAML1.0-COHORT","TCGA-UCEC","TCGA-KIRC","TCGA-HNSC","TCGA-LGG","TCGA-THCA","TCGA-LUSC","TCGA-PRAD","NCICCR-DLBCL","TCGA-SKCM","TCGA-COAD","TCGA-STAD","CPTAC-3","TCGA-BLCA","TARGET-OS","TCGA-LIHC","CPTAC-2","TCGA-CESC","TCGA-KIRP","TCGA-SARC","TCGA-LAML","TARGET-ALL-P3","TCGA-ESCA","TCGA-PAAD","TCGA-PCPG","OHSU-CNL","TCGA-READ","TCGA-TGCT","TCGA-THYM","CGCI-BLGSP","TCGA-KICH","WCDT-MCRPC","TCGA-ACC","TCGA-MESO","TCGA-UVM","ORGANOID-PANCREATIC","TARGET-RT","TCGA-DLBC","TCGA-UCS","BEATAML1.0-CRENOLANIB","TCGA-CHOL","CTSP-DLBCL1","TARGET-ALL-P1","HCMI-CMDC","TARGET-CCSK","VAREPOP-APOLLO"]},{name:"samples.sample_type",prettyName:"sample type",values:["primary tumor","metastatic","blood derived normal","primary blood derived cancer - bone marrow","solid tissue normal","tumor","not reported","bone marrow normal","primary blood derived cancer - peripheral blood","recurrent blood derived cancer - bone marrow","recurrent blood derived cancer - peripheral blood","blood derived cancer - peripheral blood","recurrent tumor","next generation cancer model","blood derived cancer - bone marrow, post-treatment","granulocytes","fibroblasts from bone marrow normal","primary xenograft tissue","buccal cell normal","blood derived cancer - bone marrow","unknown","additional - new primary","mononuclear cells from bone marrow normal","blood derived cancer - peripheral blood, post-treatment","cell lines","ffpe scrolls","expanded next generation cancer model","additional metastatic","lymphoid normal","post neo-adjuvant therapy","control analyte","slides"]},{name:"summary.experimental_strategies.experimental_strategy",prettyName:"experimental strategy",values:["Targeted Sequencing","WXS","RNA-Seq","miRNA-Seq","Genotyping Array","Methylation Array","Tissue Slide","Diagnostic Slide","WGS","ATAC-Seq"]}],ie=[{name:"VEP",attributeName:"vep_impact",type:"category",description:"Colour by VEP impact (canonical transcript).",values:[{name:"LOW",colour:"blue"},{name:"MODIFIER",colour:"goldenrod"},{name:"MODERATE",colour:"green"},{name:"HIGH",colour:"red"},{name:"",colour:"lightgrey"}]},{name:"PolyPhen",type:"category",attributeName:"polyphen_impact",description:"Colour by PolyPhen impact (canonical transcript).",values:[{name:"benign",colour:"green"},{name:"possibly_damaging",colour:"orange"},{name:"probably_damaging",colour:"red"},{name:"unknown",colour:"grey"},{name:"",colour:"lightgrey"}]},{name:"SIFT",type:"category",attributeName:"sift_impact",description:"Colour by SIFT impact (canonical transcript).",values:[{name:"deleterious",colour:"red"},{name:"tolerated",colour:"green"},{name:"deleterious_low_confidence",colour:"lightcoral"},{name:"tolerated_low_confidence",colour:"lightgreen"},{name:"",colour:"lightgrey"}]},{name:"Mutation Subtype",type:"category",attributeName:"mutationSubtype",description:"Colour by the type of mutation.",values:[{name:"Single base substitution",colour:"green"},{name:"Small deletion",colour:"red"},{name:"Small insertion",colour:"blue"},{name:"",colour:"lightgrey"}]},{name:"Mutation Count",type:"threshold",description:"Colour by mutation occurrence count across the current cohort.",attributeName:"score",values:[{name:"Count",colour1:"red",colour2:"blue",threshold:2}]},{name:"Mutation Frequency",type:"percentage",description:"Frequency of mutation occurrence across the current cohort.",attributeName:"percentage",values:[{name:"Percentage",colour1:"darkgreen",colour2:"lightgreen"}]}],oe=[{name:"Is Cancer Gene Census",attributeName:"isCancerGeneCensus",type:"boolean",description:"Colour by cancer gene census status.",values:[{name:"Is Cancer Gene Census",colour1:"red",colour2:"blue"}]}],se=m.makeStyles()((e=>({root:{padding:e.spacing(1,3,1,1),background:e.palette.background.default,overflowX:"hidden"},formControl:{margin:e.spacing(1),minWidth:150},text:{display:"flex",alignItems:"center"},paper:{padding:e.spacing(2)}}))),le=f.observer((({schema:e,type:t})=>{const{classes:n}=se(),[a,r]=c.useState(0!==Object.keys(e.getColourBy()).length?JSON.parse(e.getColourBy()):""),i="mutation"===t?ie:oe;return c.createElement(c.Fragment,null,c.createElement(h.Paper,{className:n.paper},c.createElement(h.Typography,{variant:"h6"},"Colour Features"),c.createElement(h.FormControl,{size:"small"},c.createElement(h.InputLabel,null,"Attribute"),c.createElement(h.Select,{labelId:"track-type-select-label",id:"track-type-select",value:a,onChange:t=>{const n=t.target.value;r(n);let a="";a="threshold"===n.type?`jexl:get(feature,'${n.attributeName}') >= ${n.values[0].threshold} ? '${n.values[0].colour1}' : '${n.values[0].colour2}'`:"category"===n.type?`jexl:switch(feature,'${JSON.stringify(n)}')`:"boolean"===n.type?`jexl:cancer(feature,'${n.attributeName}')`:"percentage"===n.type?`jexl:rgb(feature,'${n.attributeName}')`:"jexl:cast('goldenrod')",e.target.displays[0].renderer.color1.set(a),e.setColourBy(JSON.stringify(n)),e.target.adapter.colourBy.set(JSON.stringify(n))},renderValue:e=>e.name},i.map((e=>c.createElement(h.MenuItem,{value:e.name,key:e.name},e.name)))),c.createElement(h.FormHelperText,null,"Select how to colour features on the track based on feature attributes.")),a?.values&&c.createElement("div",null,c.createElement(h.Typography,{variant:"subtitle2",className:n.text},a.symbol),a.values&&"category"===a.type&&c.createElement(h.Table,null,c.createElement(h.TableHead,null,c.createElement(h.TableRow,null,c.createElement(h.TableCell,null,"Value"),c.createElement(h.TableCell,null,"Corresponding colour"))),c.createElement(h.TableBody,null,a.values?.map((e=>c.createElement(h.TableRow,{key:e.name},c.createElement(h.TableCell,null,""!==e.name?e.name:"n/a"),c.createElement(h.TableCell,null,c.createElement(h.Chip,{label:e.colour,style:{backgroundColor:e.colour,color:"white"}}))))))),a.values&&"threshold"===a.type&&c.createElement(h.Table,null,c.createElement(h.TableHead,null,c.createElement(h.TableRow,null,c.createElement(h.TableCell,null,"Value"),c.createElement(h.TableCell,null,"Threshold"),c.createElement(h.TableCell,null,"Below"),c.createElement(h.TableCell,null,"Equal or Above"))),c.createElement(h.TableBody,null,a.values?.map((e=>c.createElement(h.TableRow,{key:e.name},c.createElement(h.TableCell,null,""!==e.name?e.name:"n/a"),c.createElement(h.TableCell,null,e.threshold),c.createElement(h.TableCell,null,c.createElement(h.Chip,{label:e.colour2,style:{backgroundColor:e.colour2,color:"white"}})),c.createElement(h.TableCell,null,c.createElement(h.Chip,{label:e.colour1,style:{backgroundColor:e.colour1,color:"white"}}))))))),a.values&&"boolean"===a.type&&c.createElement(h.Table,null,c.createElement(h.TableHead,null,c.createElement(h.TableRow,null,c.createElement(h.TableCell,null,"Value"),c.createElement(h.TableCell,null,"True"),c.createElement(h.TableCell,null,"False"))),c.createElement(h.TableBody,null,a.values?.map((e=>c.createElement(h.TableRow,{key:e.name},c.createElement(h.TableCell,null,""!==e.name?e.name:"n/a"),c.createElement(h.TableCell,null,c.createElement(h.Chip,{label:e.colour1,style:{backgroundColor:e.colour1,color:"white"}})),c.createElement(h.TableCell,null,c.createElement(h.Chip,{label:e.colour2,style:{backgroundColor:e.colour2,color:"white"}}))))))),a.values&&"percentage"===a.type&&c.createElement(h.Table,null,c.createElement(h.TableHead,null,c.createElement(h.TableRow,null,c.createElement(h.TableCell,null,"Value"),c.createElement(h.TableCell,null,"Low"),c.createElement(h.TableCell,null,"High"))),c.createElement(h.TableBody,null,a.values?.map((e=>c.createElement(h.TableRow,{key:e.name},c.createElement(h.TableCell,null,""!==e.name?e.name:"n/a"),c.createElement(h.TableCell,null,c.createElement(h.Chip,{label:e.colour1,style:{backgroundColor:e.colour1,color:"white"}})),c.createElement(h.TableCell,null,c.createElement(h.Chip,{label:e.colour2,style:{backgroundColor:e.colour2,color:"white"}}))))))))))})),ce=m.makeStyles()((e=>({root:{display:"flex",flexDirection:"column",gap:e.spacing(2)},paper:{padding:e.spacing(2)}})));var ue=f.observer((e=>{const{classes:t}=ce(),[n,a]=c.useState(e.schema.target.adapter.featureType.value);return c.createElement("div",{className:t.root},c.createElement(h.Paper,{className:t.paper},c.createElement(h.Typography,{variant:"h6"},"Track Type"),c.createElement(h.FormControl,{size:"small"},c.createElement(h.Select,{labelId:"track-type-select-label",id:"track-type-select",value:n,onChange:t=>{a(t.target.value),e.schema.target.adapter.featureType.set(t.target.value),e.schema.target.displays[0].renderer.color1.set("jexl:cast('goldenrod')"),e.schema.setColourBy("{}"),e.schema.target.adapter.colourBy.set("{}")}},c.createElement(h.MenuItem,{value:"mutation"},"Mutation"),c.createElement(h.MenuItem,{value:"gene"},"Gene")),c.createElement(h.FormHelperText,null,"Select what to retrieve from the GDC with your selected filters."))))})),de={},pe=H.exports;Object.defineProperty(de,"__esModule",{value:!0});var fe=de.default=void 0,he=(0,pe(V).default)((0,p.jsx)("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"}),"Undo");fe=de.default=he;const me=m.makeStyles()((e=>({root:{margin:e.spacing(1)},paper:{padding:e.spacing(2)},tabRoot:{width:"33%",minWidth:"100px"},formControl:{margin:e.spacing(1),minWidth:150},filterCard:{margin:e.spacing(1)},text:{display:"flex",alignItems:"center"}})));function ge(e){const{children:t,value:n,index:a,...r}=e;return c.createElement("div",{role:"tabpanel",hidden:n!==a,id:`simple-tabpanel-${a}`,"aria-labelledby":`simple-tab-${a}`,...r},n===a&&c.createElement(h.Box,{style:{padding:3}},t))}const ye=f.observer((({schema:e})=>{const[t,n]=c.useState(!0),[a,r]=c.useState(!0),[i,o]=c.useState(""),[s,l]=c.useState(""),[u,d]=c.useState(0);e.clearFilters(),c.useEffect((()=>{try{const t=JSON.parse(e.target.adapter.filters.value);if(t.content&&t.content.length>0)for(const a of t.content){let t;if(a.content.field.startsWith("cases.")?t="case":a.content.field.startsWith("ssms.")?t="ssm":a.content.field.startsWith("genes.")?t="gene":(n(!1),o(`The filter ${a.content.field} is missing a type prefix and is invalid. Any changes on this panel will overwrite invalid filters.`)),t){const n=a.content.field.replace(`${t}s.`,"");e.addFilter(q(),n,t,a.content.value.join(","))}}}catch(e){n(!1),o("The current filters are not in the expected format. Any changes on this panel will overwrite invalid filters.")}}),[e,u,e.target.adapter.featureType.value]),c.useEffect((()=>{try{const t=JSON.parse(e.target.adapter.colourBy.value);let n=!0;["name","type","attributeName","values","description"].forEach((e=>{e in t||(n=!1)})),n||0===Object.keys(t).length?e.setColourBy(t):(r(!1),l("The current colour by option is not in the expected format. Any changes on this panel will overwrite the invalid selection."))}catch(e){r(!1),l("The current colour by option is not in the expected format. Any changes on this panel will overwrite the invalid selection.")}}),[e]);const{classes:p}=me();return c.createElement("div",{style:{display:"flex",flexDirection:"column",gap:"8px"}},!t&&c.createElement(h.Alert,{severity:"info"},i),c.createElement(ue,{schema:e}),c.createElement(h.Paper,{className:p.paper},c.createElement(h.Grid,{container:!0,style:{gap:"4px"}},c.createElement(h.Typography,{variant:"h6"},"Filters"),c.createElement(h.Tooltip,{title:"Clear all filters","aria-label":"clear all filters",onClick:()=>{e.clearFilters(),e.target.adapter.filters.set("{}")}},c.createElement(h.IconButton,{size:"small",color:"primary","data-testid":"clear_all_filters_icon_button"},c.createElement(fe,null)))),c.createElement(h.Box,null,c.createElement(h.Tabs,{value:u,onChange:(e,t)=>d(t),"aria-label":"filtering tabs"},c.createElement(h.Tab,{classes:{root:p.tabRoot},label:"Cases"}),c.createElement(h.Tab,{classes:{root:p.tabRoot},label:"Genes"}),c.createElement(h.Tab,{classes:{root:p.tabRoot},label:"Mutations"}))),c.createElement(ge,{value:u,index:0},c.createElement(te,{schema:e,type:"case",facets:re})),c.createElement(ge,{value:u,index:1},c.createElement(te,{schema:e,type:"gene",facets:ae})),c.createElement(ge,{value:u,index:2},c.createElement(te,{schema:e,type:"ssm",facets:ne}))),!a&&c.createElement(h.Alert,{severity:"info"},s),"mutation"===e.target.adapter.featureType.value&&c.createElement(le,{schema:e,type:"mutation"}),"gene"===e.target.adapter.featureType.value&&c.createElement(le,{schema:e,type:"gene"}))})),be=f.observer((({model:e})=>{const{classes:t}=me();return c.createElement("div",{className:t.root,"data-testid":"configEditor"},e.target?c.createElement(ye,{schema:e,key:"configEditor"}):"no target set")})),_e=t.ConfigurationSchema("GDCFeatureWidget",{});var ve={},we=H.exports;Object.defineProperty(ve,"__esModule",{value:!0});var Ee=ve.default=void 0,Ce=(0,we(V).default)((0,p.jsx)("path",{d:"M19 13H5v-2h14v2z"}),"Remove");Ee=ve.default=Ce;const Te=m.makeStyles()({table:{padding:0},link:{color:"rgb(0, 0, 238)"}});function ke(e){const{classes:t}=Te(),{feature:n}=e;if(!n.consequence)return null;const a=n.consequence.hits.edges;return c.createElement(g.BaseCard,{title:"Consequence"},c.createElement("div",{style:{width:"100%",maxHeight:600,overflow:"auto"}},c.createElement(h.Table,{className:t.table},c.createElement(h.TableHead,null,c.createElement(h.TableRow,null,c.createElement(h.TableCell,null,"Gene"),c.createElement(h.TableCell,null,"AA Change"),c.createElement(h.TableCell,null,"Consequence"),c.createElement(h.TableCell,null,"Coding DNA Change"),c.createElement(h.TableCell,null,"Impact"),c.createElement(h.TableCell,null,"Gene Strand"),c.createElement(h.TableCell,null,"Transcript"))),c.createElement(h.TableBody,null,Object.entries(a).map((([e,n])=>n?c.createElement(h.TableRow,{key:e},c.createElement(h.TableCell,null,c.createElement(h.Link,{className:t.link,target:"_blank",rel:"noopener",href:`https://portal.gdc.cancer.gov/genes/${n.node.transcript.gene.gene_id}`,underline:"always"},n.node.transcript.gene.symbol)),c.createElement(h.TableCell,null,n.node.transcript.aa_change),c.createElement(h.TableCell,null,n.node.transcript.consequence_type),c.createElement(h.TableCell,null,n.node.transcript.annotation.hgvsc),c.createElement(h.TableCell,null,n.node.transcript.annotation.vep_impact?c.createElement(h.Tooltip,{title:`VEP ${n.node.transcript.annotation.vep_impact}`,"aria-label":"help",placement:"left"},c.createElement("div",null,c.createElement(h.Chip,{label:n.node.transcript.annotation.vep_impact}))):null,n.node.transcript.annotation.sift_impact?c.createElement(h.Tooltip,{title:`SIFT ${n.node.transcript.annotation.sift_impact} (${n.node.transcript.annotation.sift_score})`,"aria-label":"help",placement:"left"},c.createElement("div",null,c.createElement(h.Chip,{label:n.node.transcript.annotation.sift_impact}))):null,n.node.transcript.annotation.polyphen_impact?c.createElement(h.Tooltip,{title:`PolyPhen ${n.node.transcript.annotation.polyphen_impact} (${n.node.transcript.annotation.polyphen_score})`,"aria-label":"help",placement:"left"},c.createElement("div",null,c.createElement(h.Chip,{label:n.node.transcript.annotation.polyphen_impact}))):null),c.createElement(h.TableCell,null,c.createElement(1===n.node.transcript.gene.gene_strand?Z:Ee,null)),c.createElement(h.TableCell,null,c.createElement(h.Link,{className:t.link,target:"_blank",rel:"noopener",href:`http://may2015.archive.ensembl.org/Homo_sapiens/Gene/Summary?db=core;g=${n.node.transcript.transcript_id}`,underline:"always"},n.node.transcript.transcript_id),n.node.transcript.is_canonical?c.createElement(h.Tooltip,{title:"Canonical transcript","aria-label":"help",placement:"right"},c.createElement("div",null,c.createElement(h.Chip,{label:"C"}))):null)):null))))))}const xe=f.observer((e=>{const{classes:t}=Te(),{id:n,name:a,link:r}=e;return c.createElement(h.TableRow,{key:`${n}-${a}`},c.createElement(h.TableCell,null,a),c.createElement(h.TableCell,null,c.createElement(h.Link,{className:t.link,target:"_blank",rel:"noopener",href:`${r}${n}`,underline:"always"},n)))}));function Ae(e){const{classes:t}=Te(),{feature:n}=e;return c.createElement(g.BaseCard,{title:"External Links"},c.createElement("div",{style:{width:"100%",maxHeight:600,overflow:"auto"}},c.createElement(h.Table,{className:t.table},c.createElement(h.TableBody,null,[{id:n.geneId,name:"GDC",link:"https://portal.gdc.cancer.gov/genes/"},{id:n.geneId,name:"ENSEMBL",link:"http://www.ensembl.org/id/"},{id:n.canonicalTranscriptId,name:"Canonical Transcript ID",link:"http://www.ensembl.org/id/"},{id:n.externalDbIds.hgnc[0],name:"HGNC",link:"https://www.genenames.org/data/gene-symbol-report/#!/hgnc_id/"},{id:n.externalDbIds.uniprotkbSwissprot[0],name:"UniProtKB Swiss-Prot",link:"http://www.uniprot.org/uniprot/"},{id:n.externalDbIds.entrezGene[0],name:"NCBI",link:"http://www.ncbi.nlm.nih.gov/gene/"},{id:n.externalDbIds.omimGene[0],name:"OMIM",link:"https://www.omim.org/entry/"}].map(((e,t)=>c.createElement(xe,{...e,key:t})))))))}function Se(e){return e.replace("COSM","").replace("COSN","")}const De=f.observer((e=>{const{classes:t}=Te(),{cosmicId:n}=e;return c.createElement(h.TableRow,{key:"0"},c.createElement(h.TableCell,null,"Cosmic"),c.createElement(h.TableCell,null,n?.map((e=>c.createElement(h.Link,{className:t.link,target:"_blank",rel:"noopener",href:`https://cancer.sanger.ac.uk/cosmic/mutation/overview?id=${Se(e)}`,key:e,underline:"always"},e)))))}));function je(e){const{classes:t}=Te(),{feature:n}=e;return c.createElement(g.BaseCard,{title:"External Links"},c.createElement("div",{style:{width:"100%",maxHeight:600,overflow:"auto"}},c.createElement(h.Table,{className:t.table},c.createElement(h.TableBody,null,[{id:n.ssmId,name:"GDC",link:"https://portal.gdc.cancer.gov/ssms/"}].map(((e,t)=>c.createElement(xe,{...e,key:t}))),n.cosmicId?c.createElement(De,{cosmicId:n.cosmicId}):null))))}function Ie(e){const{classes:t}=Te(),{projectId:n,docCount:a,projectsInformation:r,gdcProjectsCounts:i}=e,o=r.find((e=>e.node.project_id===n)),s=i.find((e=>e.projectId===n));return c.createElement(h.TableRow,{key:n},c.createElement(h.TableCell,null,c.createElement(h.Link,{className:t.link,target:"_blank",rel:"noopener",href:`https://portal.gdc.cancer.gov/projects/${n}`,underline:"always"},n)),c.createElement(h.TableCell,null,o.node.disease_type.join(", ")),c.createElement(h.TableCell,null,o.node.primary_site.join(", ")),c.createElement(h.TableCell,null,a," / ",s.docCount))}function Oe(e){const{classes:t}=Te(),{featureId:n}=e,[a,r]=c.useState([]),[i,o]=c.useState([]),[s,l]=c.useState([]);return c.useEffect((()=>{(async function(e){const t={query:"query projectsTable($ssmTested: FiltersArgument, $caseAggsFilter: FiltersArgument, $projectCount: Int) { viewer { explore { cases { filtered: aggregations(filters: $caseAggsFilter) { project__project_id { buckets { docCount: doc_count projectId: key } } } total: aggregations(filters: $ssmTested) { project__project_id { buckets { docCount: doc_count projectId: key } } } } } } projects { hits(first: $projectCount) { edges { node { primary_site disease_type project_id id } } } } }",variables:{ssmTested:{op:"and",content:[{op:"in",content:{field:"cases.available_variation_data",value:["ssm"]}}]},caseAggsFilter:{op:"and",content:[{op:"in",content:{field:"ssms.ssm_id",value:[e]}},{op:"in",content:{field:"cases.available_variation_data",value:["ssm"]}}]},projectCount:100}},n=await fetch("https://api.gdc.cancer.gov/v0/graphql/mutationProjects",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error(`Failed to fetch ${n.status} ${n.statusText}`);return n.json()})(n).then((e=>{o(e.data.projects.hits.edges),l(e.data.viewer.explore.cases.total.project__project_id.buckets),r(e.data.viewer.explore.cases.filtered.project__project_id.buckets)}))}),[n]),c.createElement(g.BaseCard,{title:"Projects"},c.createElement("div",{style:{width:"100%",maxHeight:600,overflow:"auto"}},c.createElement(h.Table,{className:t.table},c.createElement(h.TableHead,null,c.createElement(h.TableRow,null,c.createElement(h.TableCell,null,"Project"),c.createElement(h.TableCell,null,"Disease Type"),c.createElement(h.TableCell,null,"Site"),c.createElement(h.TableCell,null,"# Mutation Affected Cases"))),c.createElement(h.TableBody,null,a&&i&&s&&a.map(((e,t)=>c.createElement(Ie,{projectsInformation:i,gdcProjectsCounts:s,key:`${t}-${e.projectId}`,...e})))))))}function Fe(e){const{classes:t}=Te(),{projectId:n,docCount:a,projectsInformation:r,cases:i}=e,o=r.find((e=>e.node.project_id===n)),s=i.total.project__project_id.buckets.find((e=>e.projectId===n)),l=i.gain.project__project_id.buckets.find((e=>e.projectId===n)),u=i.loss.project__project_id.buckets.find((e=>e.projectId===n)),d=i.cnvTotal.project__project_id.buckets.find((e=>e.projectId===n));return c.createElement(h.TableRow,{key:n},c.createElement(h.TableCell,null,c.createElement(h.Link,{className:t.link,target:"_blank",rel:"noopener",href:`https://portal.gdc.cancer.gov/projects/${n}`,underline:"always"},n)),c.createElement(h.TableCell,null,o.node.disease_type.join(", ")),c.createElement(h.TableCell,null,o.node.primary_site.join(", ")),c.createElement(h.TableCell,null,a," / ",s.docCount),c.createElement(h.TableCell,null,l?l.docCount:"0"," /"," ",d?d.docCount:"0"),c.createElement(h.TableCell,null,u?u.docCount:"0"," /"," ",d?d.docCount:"0"))}function Le(e){const{classes:t}=Te(),{featureId:n}=e,[a,r]=c.useState([]),[i,o]=c.useState([]),[s,l]=c.useState([]);return c.useEffect((()=>{(async function(e){const t={query:"query ProjectTable( $caseAggsFilters: FiltersArgument $ssmTested: FiltersArgument $cnvGain: FiltersArgument $cnvLoss: FiltersArgument $cnvTested: FiltersArgument $projectCount: Int ) { viewer { explore { cases { gain: aggregations(filters: $cnvGain) { project__project_id { buckets { docCount: doc_count projectId: key } } } loss: aggregations(filters: $cnvLoss) { project__project_id { buckets { docCount: doc_count projectId: key } } } cnvTotal: aggregations(filters: $cnvTested) { project__project_id { buckets { docCount: doc_count projectId: key } } } filtered: aggregations(filters: $caseAggsFilters) { project__project_id { buckets { docCount: doc_count projectId: key } } } total: aggregations(filters: $ssmTested) { project__project_id { buckets { docCount: doc_count projectId: key } } } } } } projects { hits(first: $projectCount) { edges { node { primary_site disease_type project_id id } } } } }",variables:{caseAggsFilters:{op:"and",content:[{op:"in",content:{field:"cases.available_variation_data",value:["ssm"]}},{op:"NOT",content:{field:"cases.gene.ssm.observation.observation_id",value:"MISSING"}},{op:"in",content:{field:"genes.gene_id",value:[e]}}]},ssmTested:{op:"and",content:[{op:"in",content:{field:"cases.available_variation_data",value:["ssm"]}}]},cnvGain:{op:"and",content:[{op:"in",content:{field:"cases.available_variation_data",value:["cnv"]}},{op:"in",content:{field:"cnvs.cnv_change",value:["Gain"]}},{op:"in",content:{field:"genes.gene_id",value:[e]}}]},cnvLoss:{op:"and",content:[{op:"in",content:{field:"cases.available_variation_data",value:["cnv"]}},{op:"in",content:{field:"cnvs.cnv_change",value:["Loss"]}},{op:"in",content:{field:"genes.gene_id",value:[e]}}]},cnvTested:{op:"and",content:[{op:"in",content:{field:"cases.available_variation_data",value:["cnv"]}}]},projectCount:100}},n=await fetch("https://api.gdc.cancer.gov/v0/graphql/geneProjects",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error(`Failed to fetch ${n.status} ${n.statusText}`);return n.json()})(n).then((e=>{r(e.data.projects.hits.edges),l(e.data.viewer.explore.cases),o(e.data.viewer.explore.cases.filtered.project__project_id.buckets)}))}),[n]),c.createElement(g.BaseCard,{...e,title:"Projects"},c.createElement("div",{style:{width:"100%",maxHeight:600,overflow:"auto"}},c.createElement(h.Table,{className:t.table},c.createElement(h.TableHead,null,c.createElement(h.TableRow,null,c.createElement(h.TableCell,null,"Project"),c.createElement(h.TableCell,null,"Disease Type"),c.createElement(h.TableCell,null,"Site"),c.createElement(h.TableCell,null,"# Mutation Affected Cases"),c.createElement(h.TableCell,null,"# CNV Gains"),c.createElement(h.TableCell,null,"# CNV Losses"))),c.createElement(h.TableBody,null,s&&a&&i?.map(((e,t)=>c.createElement(Fe,{cases:s,projectsInformation:a,key:`${t}-${e.projectId}`,...e})))))))}var Re=f.observer((function(e){const{model:t}=e,n=JSON.parse(JSON.stringify(t.featureData)),{consequence:a,geneId:r,ssmId:i,cosmicId:o,canonicalTranscriptId:s,externalDbIds:l,percentage:u,numOfCasesInCohort:d,...p}=n;return c.createElement(h.Paper,{"data-testid":"variant-widget"},c.createElement(g.FeatureDetails,{feature:p,model:t,...e}),c.createElement(h.Divider,null),void 0!==n.geneId?c.createElement(Ae,{feature:n}):null,void 0!==n.ssmId?c.createElement(je,{feature:n}):null,c.createElement(h.Divider,null),void 0!==n.ssmId?c.createElement(ke,{feature:n}):null,c.createElement(h.Divider,null),void 0!==n.geneId?c.createElement(Le,{featureId:n.geneId}):null,void 0!==n.ssmId?c.createElement(Oe,{featureId:n.ssmId}):null)}));function Ne(e){return r.types.model("GDCSearchWidget",{id:u.ElementId,type:r.types.literal("GDCSearchWidget")}).volatile((()=>({trackData:void 0,indexTrackData:void 0}))).actions((e=>({setTrackData(t){e.trackData=t},setIndexTrackData(t){e.indexTrackData=t},clearData(){e.indexTrackData=void 0,e.trackData=void 0}})))}function ze(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{l(a.next(e))}catch(e){i(e)}}function s(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((a=a.apply(e,t||[])).next())}))}function Pe(e,t){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(n=1,a&&(r=2&s[0]?a.return:s[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,s[1])).done)return r;switch(a=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,a=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],a=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function Me(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o}function Ge(e,t,n){if(n||2===arguments.length)for(var a,r=0,i=t.length;r<i;r++)!a&&r in t||(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var Be=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function $e(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),a=Be.get(n);a&&Object.defineProperty(e,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!=typeof n.path){var a=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"==typeof t?t:"string"==typeof a&&a.length>0?a:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var qe=[".DS_Store","Thumbs.db"];function Ue(e){return"object"==typeof e&&null!==e}function He(e){return Je(e.target.files).map((function(e){return $e(e)}))}function Ve(e){return ze(this,void 0,void 0,(function(){return Pe(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return e.getFile()})))];case 1:return[2,t.sent().map((function(e){return $e(e)}))]}}))}))}function We(e,t){return ze(this,void 0,void 0,(function(){var n;return Pe(this,(function(a){switch(a.label){case 0:return e.items?(n=Je(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map(Ke))]):[3,2];case 1:return[2,Ze(Qe(a.sent()))];case 2:return[2,Ze(Je(e.files).map((function(e){return $e(e)})))]}}))}))}function Ze(e){return e.filter((function(e){return-1===qe.indexOf(e.name)}))}function Je(e){if(null===e)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}function Ke(e){if("function"!=typeof e.webkitGetAsEntry)return Ye(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?et(t):Ye(e)}function Qe(e){return e.reduce((function(e,t){return Ge(Ge([],Me(e),!1),Me(Array.isArray(t)?Qe(t):[t]),!1)}),[])}function Ye(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var n=$e(t);return Promise.resolve(n)}function Xe(e){return ze(this,void 0,void 0,(function(){return Pe(this,(function(t){return[2,e.isDirectory?et(e):tt(e)]}))}))}function et(e){var t=e.createReader();return new Promise((function(e,n){var a=[];!function r(){var i=this;t.readEntries((function(t){return ze(i,void 0,void 0,(function(){var i,o,s;return Pe(this,(function(l){switch(l.label){case 0:if(t.length)return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Promise.all(a)];case 2:return i=l.sent(),e(i),[3,4];case 3:return o=l.sent(),n(o),[3,4];case 4:return[3,6];case 5:s=Promise.all(t.map(Xe)),a.push(s),r(),l.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function tt(e){return ze(this,void 0,void 0,(function(){return Pe(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var a=$e(n,e.fullPath);t(a)}),(function(e){n(e)}))}))]}))}))}var nt=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),a=e.name||"",r=(e.type||"").toLowerCase(),i=r.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?a.toLowerCase().endsWith(t):t.endsWith("/*")?i===t.replace(/\/.*$/,""):r===t}))}return!0};function at(e){return function(e){if(Array.isArray(e))return ct(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||lt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach((function(t){ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return i}}(e,t)||lt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e,t){if(e){if("string"==typeof e)return ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ct(e,t):void 0}}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ut=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:"file-invalid-type",message:"File type must be ".concat(t)}},dt=function(e){return{code:"file-too-large",message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},pt=function(e){return{code:"file-too-small",message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},ft={code:"too-many-files",message:"Too many files"};function ht(e,t){var n="application/x-moz-file"===e.type||nt(e,t);return[n,n?null:ut(t)]}function mt(e,t,n){if(gt(e.size))if(gt(t)&&gt(n)){if(e.size>n)return[!1,dt(n)];if(e.size<t)return[!1,pt(t)]}else{if(gt(t)&&e.size<t)return[!1,pt(t)];if(gt(n)&&e.size>n)return[!1,dt(n)]}return[!0,null]}function gt(e){return null!=e}function yt(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function bt(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function _t(e){e.preventDefault()}function vt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return t.some((function(t){return!yt(e)&&t&&t.apply(void 0,[e].concat(a)),yt(e)}))}}function wt(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||/\w+\/[-+.\w]+/g.test(e)}function Et(e){return/^.*\.[\w]+$/.test(e)}var Ct=["children"],Tt=["open"],kt=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],xt=["refKey","onChange","onClick"];function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return i}}(e,t)||St(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){if(e){if("string"==typeof e)return Dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dt(e,t):void 0}}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){Ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ft(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t.indexOf(n=i[a])>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t.indexOf(n=i[a])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Lt=c.forwardRef((function(e,t){var n=e.children,a=zt(Ft(e,Ct)),r=a.open,i=Ft(a,Tt);return c.useImperativeHandle(t,(function(){return{open:r}}),[r]),c.createElement(c.Fragment,null,n(It(It({},i),{},{open:r})))}));Lt.displayName="Dropzone";var Rt={disabled:!1,getFilesFromEvent:function(e){return ze(this,void 0,void 0,(function(){return Pe(this,(function(t){return Ue(e)&&Ue(e.dataTransfer)?[2,We(e.dataTransfer,e.type)]:Ue(n=e)&&Ue(n.target)?[2,He(e)]:Array.isArray(e)&&e.every((function(e){return"getFile"in e&&"function"==typeof e.getFile}))?[2,Ve(e)]:[2,[]];var n}))}))},maxSize:Infinity,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Lt.defaultProps=Rt,Lt.propTypes={children:y.func,accept:y.objectOf(y.arrayOf(y.string)),multiple:y.bool,preventDropOnDocument:y.bool,noClick:y.bool,noKeyboard:y.bool,noDrag:y.bool,noDragEventsBubbling:y.bool,minSize:y.number,maxSize:y.number,maxFiles:y.number,disabled:y.bool,getFilesFromEvent:y.func,onFileDialogCancel:y.func,onFileDialogOpen:y.func,useFsAccessApi:y.bool,autoFocus:y.bool,onDragEnter:y.func,onDragLeave:y.func,onDragOver:y.func,onDrop:y.func,onDropAccepted:y.func,onDropRejected:y.func,onError:y.func,validator:y.func};var Nt={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function zt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=It(It({},Rt),e),n=t.accept,a=t.disabled,r=t.getFilesFromEvent,i=t.maxSize,o=t.minSize,s=t.multiple,l=t.maxFiles,u=t.onDragEnter,d=t.onDragLeave,p=t.onDragOver,f=t.onDrop,h=t.onDropAccepted,m=t.onDropRejected,g=t.onFileDialogCancel,y=t.onFileDialogOpen,b=t.useFsAccessApi,_=t.autoFocus,v=t.preventDropOnDocument,w=t.noClick,E=t.noKeyboard,C=t.noDrag,T=t.noDragEventsBubbling,k=t.onError,x=t.validator,A=c.useMemo((function(){return function(e){if(gt(e))return Object.entries(e).reduce((function(e,t){var n=st(t,2),a=n[0],r=n[1];return[].concat(at(e),[a],at(r))}),[]).filter((function(e){return wt(e)||Et(e)})).join(",")}(n)}),[n]),S=c.useMemo((function(){return function(e){return gt(e)?[{description:"Files",accept:Object.entries(e).filter((function(e){var t=st(e,2),n=t[0],a=t[1],r=!0;return wt(n)||(console.warn('Skipped "'.concat(n,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),r=!1),Array.isArray(a)&&a.every(Et)||(console.warn('Skipped "'.concat(n,'" because an invalid file extension was provided.')),r=!1),r})).reduce((function(e,t){var n=st(t,2),a=n[0],r=n[1];return it(it({},e),{},ot({},a,r))}),{})}]:e}(n)}),[n]),D=c.useMemo((function(){return"function"==typeof y?y:Mt}),[y]),j=c.useMemo((function(){return"function"==typeof g?g:Mt}),[g]),I=c.useRef(null),O=c.useRef(null),F=At(c.useReducer(Pt,Nt),2),L=F[0],R=F[1],N=L.isFocused,z=L.isFileDialogActive,P=c.useRef("undefined"!=typeof window&&window.isSecureContext&&b&&"showOpenFilePicker"in window),M=function(){!P.current&&z&&setTimeout((function(){O.current&&(O.current.files.length||(R({type:"closeDialog"}),j()))}),300)};c.useEffect((function(){return window.addEventListener("focus",M,!1),function(){window.removeEventListener("focus",M,!1)}}),[O,z,j,P]);var G=c.useRef([]),B=function(e){I.current&&I.current.contains(e.target)||(e.preventDefault(),G.current=[])};c.useEffect((function(){return v&&(document.addEventListener("dragover",_t,!1),document.addEventListener("drop",B,!1)),function(){v&&(document.removeEventListener("dragover",_t),document.removeEventListener("drop",B))}}),[I,v]),c.useEffect((function(){return!a&&_&&I.current&&I.current.focus(),function(){}}),[I,_,a]);var $=c.useCallback((function(e){k?k(e):console.error(e)}),[k]),q=c.useCallback((function(e){var t;e.preventDefault(),e.persist(),ne(e),G.current=[].concat(function(e){if(Array.isArray(e))return Dt(e)}(t=G.current)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||St(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[e.target]),bt(e)&&Promise.resolve(r(e)).then((function(t){if(!yt(e)||T){var n=t.length,a=n>0&&function(e){var t=e.files,n=e.accept,a=e.minSize,r=e.maxSize,i=e.multiple,o=e.maxFiles,s=e.validator;return!(!i&&t.length>1||i&&o>=1&&t.length>o)&&t.every((function(e){var t=st(ht(e,n),1)[0],i=st(mt(e,a,r),1)[0],o=s?s(e):null;return t&&i&&!o}))}({files:t,accept:A,minSize:o,maxSize:i,multiple:s,maxFiles:l,validator:x});R({isDragAccept:a,isDragReject:n>0&&!a,isDragActive:!0,type:"setDraggedFiles"}),u&&u(e)}})).catch((function(e){return $(e)}))}),[r,u,$,T,A,o,i,s,l,x]),U=c.useCallback((function(e){e.preventDefault(),e.persist(),ne(e);var t=bt(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(e){}return t&&p&&p(e),!1}),[p,T]),H=c.useCallback((function(e){e.preventDefault(),e.persist(),ne(e);var t=G.current.filter((function(e){return I.current&&I.current.contains(e)})),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),G.current=t,t.length>0||(R({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),bt(e)&&d&&d(e))}),[I,d,T]),V=c.useCallback((function(e,t){var n=[],a=[];e.forEach((function(e){var t=At(ht(e,A),2),r=t[0],s=t[1],l=At(mt(e,o,i),2),c=l[0],u=l[1],d=x?x(e):null;if(r&&c&&!d)n.push(e);else{var p=[s,u];d&&(p=p.concat(d)),a.push({file:e,errors:p.filter((function(e){return e}))})}})),(!s&&n.length>1||s&&l>=1&&n.length>l)&&(n.forEach((function(e){a.push({file:e,errors:[ft]})})),n.splice(0)),R({acceptedFiles:n,fileRejections:a,type:"setFiles"}),f&&f(n,a,t),a.length>0&&m&&m(a,t),n.length>0&&h&&h(n,t)}),[R,s,A,o,i,l,f,h,m,x]),W=c.useCallback((function(e){e.preventDefault(),e.persist(),ne(e),G.current=[],bt(e)&&Promise.resolve(r(e)).then((function(t){yt(e)&&!T||V(t,e)})).catch((function(e){return $(e)})),R({type:"reset"})}),[r,V,$,T]),Z=c.useCallback((function(){if(P.current)return R({type:"openDialog"}),D(),void window.showOpenFilePicker({multiple:s,types:S}).then((function(e){return r(e)})).then((function(e){V(e,null),R({type:"closeDialog"})})).catch((function(e){var t;(t=e)instanceof DOMException&&("AbortError"===t.name||t.code===t.ABORT_ERR)?(j(e),R({type:"closeDialog"})):function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)?(P.current=!1,O.current?(O.current.value=null,O.current.click()):$(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):$(e)}));O.current&&(R({type:"openDialog"}),D(),O.current.value=null,O.current.click())}),[R,D,j,b,V,$,S,s]),J=c.useCallback((function(e){I.current&&I.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),Z()))}),[I,Z]),K=c.useCallback((function(){R({type:"focus"})}),[]),Q=c.useCallback((function(){R({type:"blur"})}),[]),Y=c.useCallback((function(){w||(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?setTimeout(Z,0):Z())}),[w,Z]),X=function(e){return a?null:e},ee=function(e){return E?null:X(e)},te=function(e){return C?null:X(e)},ne=function(e){T&&e.stopPropagation()},ae=c.useMemo((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.role,i=e.onKeyDown,o=e.onFocus,s=e.onBlur,l=e.onClick,c=e.onDragEnter,u=e.onDragOver,d=e.onDragLeave,p=e.onDrop,f=Ft(e,kt);return It(It(Ot({onKeyDown:ee(vt(i,J)),onFocus:ee(vt(o,K)),onBlur:ee(vt(s,Q)),onClick:X(vt(l,Y)),onDragEnter:te(vt(c,q)),onDragOver:te(vt(u,U)),onDragLeave:te(vt(d,H)),onDrop:te(vt(p,W)),role:"string"==typeof r&&""!==r?r:"presentation"},n,I),a||E?{}:{tabIndex:0}),f)}}),[I,J,K,Q,Y,q,U,H,W,E,C,a]),re=c.useCallback((function(e){e.stopPropagation()}),[]),ie=c.useMemo((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,a=e.onChange,r=e.onClick,i=Ft(e,xt);return It(It({},Ot({accept:A,multiple:s,type:"file",style:{display:"none"},onChange:X(vt(a,W)),onClick:X(vt(r,re)),tabIndex:-1},n,O)),i)}}),[O,n,s,W,a]);return It(It({},L),{},{isFocused:N&&!a,getRootProps:ae,getInputProps:ie,rootRef:I,inputRef:O,open:X(Z)})}function Pt(e,t){switch(t.type){case"focus":return It(It({},e),{},{isFocused:!0});case"blur":return It(It({},e),{},{isFocused:!1});case"openDialog":return It(It({},Nt),{},{isFileDialogActive:!0});case"closeDialog":return It(It({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return It(It({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return It(It({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return It({},Nt);default:return e}}function Mt(){}var Gt={},Bt=H.exports;Object.defineProperty(Gt,"__esModule",{value:!0});var $t=Gt.default=void 0,qt=(0,Bt(V).default)((0,p.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"}),"CloudUpload");$t=Gt.default=qt;var Ut={},Ht=H.exports;Object.defineProperty(Ut,"__esModule",{value:!0});var Vt=Ut.default=void 0,Wt=(0,Ht(V).default)((0,p.jsx)("path",{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6H6zm7 7V3.5L18.5 9H13z"}),"InsertDriveFile");Vt=Ut.default=Wt;var Zt={},Jt=H.exports;Object.defineProperty(Zt,"__esModule",{value:!0});var Kt=Zt.default=void 0,Qt=(0,Jt(V).default)((0,p.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");Kt=Zt.default=Qt;var Yt={},Xt=H.exports;Object.defineProperty(Yt,"__esModule",{value:!0});var en=Yt.default=void 0,tn=(0,Xt(V).default)((0,p.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward");en=Yt.default=tn;const nn=m.makeStyles()((e=>({closeButton:{position:"absolute",left:"80px",color:e.palette.grey[500]},root:{margin:6},paper:{display:"flex",flexDirection:"column",padding:8},imgContainer:{display:"flex",justifyContent:"center"},img:{maxWidth:"100%",maxHeight:"100%",verticalAlign:"middle"},helperTextContainer:{paddingTop:8,paddingBottom:8},textContainer:{display:"flex",flexDirection:"row",gap:8,alignItems:"center",background:e.palette.grey[100],padding:6,marginTop:8,marginBottom:8},buttonContainer:{display:"flex",justifyContent:"flex-end"}})));function an({handleClose:e}){const{classes:t}=nn();return c.createElement(b.Dialog,{open:!0,onClose:e,maxWidth:"sm",title:"How to upload bulk files from the GDC to JBrowse"},c.createElement(h.DialogContent,null,c.createElement("div",{className:t.root},c.createElement("div",{className:t.paper},c.createElement("div",{className:t.imgContainer},c.createElement("img",{className:t.img,src:"https://i.imgur.com/jCKe4of.png"})),c.createElement(h.Paper,{className:t.textContainer,elevation:0},c.createElement("div",{className:t.helperTextContainer},c.createElement(h.Typography,{variant:"body1",align:"center"},c.createElement("b",null,"Step 1")),c.createElement(h.Typography,{variant:"body2",align:"center"},"Perform a query on the GDC")),c.createElement(en,null),c.createElement("div",{className:t.helperTextContainer},c.createElement(h.Typography,{variant:"body1",align:"center"},c.createElement("b",null,"Step 2")),c.createElement(h.Typography,{variant:"body2",align:"center"},"Enable column for 'File UUID'")),c.createElement(en,null),c.createElement("div",{className:t.helperTextContainer},c.createElement(h.Typography,{variant:"body1",align:"center"},c.createElement("b",null,"Step 3")),c.createElement(h.Typography,{variant:"body2",align:"center"},"Click JSON button to Export")),c.createElement(en,null),c.createElement("div",{className:t.helperTextContainer},c.createElement(h.Typography,{variant:"body1",align:"center"},c.createElement("b",null,"Step 4")),c.createElement(h.Typography,{variant:"body2",align:"center"},"Drop JSON file into the GDC Widget on JBrowse"))),c.createElement("div",{className:t.buttonContainer},c.createElement(h.Button,{color:"primary",variant:"contained",size:"large",onClick:e},"Close"))))))}const rn=new Map([["bam",{config:{type:"AlignmentsTrack",adapter:{type:"BamAdapter"}},prefix:"bam"}],["maf",{config:{type:"MAFTrack",adapter:{type:"MafAdapter"}},prefix:"maf"}],["vcf",{config:{type:"VariantTrack",adapter:{type:"VcfAdapter"}},prefix:"vcf"}],["Copy Number Variation",{config:{type:"QuantitativeTrack",adapter:{type:"SegmentCNVAdapter"}},prefix:"seg"}],["Methylation Beta Value",{config:{type:"FeatureTrack",adapter:{type:"MbvAdapter"}},prefix:"mbv"}],["Isoform Expression Quantification",{config:{type:"IEQTrack",adapter:{type:"IeqAdapter"}},prefix:"ieq"}],["Splice Junction Quantification",{config:{type:"FeatureTrack",adapter:{type:"SjqAdapter"},displays:[{type:"LinearArcDisplay"}]},prefix:"sjq"}],["GDC Explore",{config:{type:"GDCTrack",adapter:{type:"GDCAdapter"}}}],["SSM or Gene",{config:{type:"GDCTrack",adapter:{type:"GDCJSONAdapter"}}}]]);function on(e,t,n,a){const r=rn.get(function(e){return rn.has(e.type)?e.type:rn.has(e.category)?e.category:rn.has(e.format)?e.format:""}(e));if(r){if(r.config.displays){const e=Date.now();r.config.displays[0].displayId=`gdc_plugin_track_linear_basic-${e}`}a?r.config.adapter[`${r.prefix}Location`]=s.storeBlobLocation({blob:a}):(r.config.adapter[`${r.prefix}Location`]={uri:t,authHeader:"X-Auth-Token",locationType:"UriLocation",internetAccountId:"GDCExternalToken"},n&&(r.config.adapter.index={location:{uri:`http://localhost:8010/proxy/data/${n}`,authHeader:"X-Auth-Token",locationType:"UriLocation",internetAccountId:"GDCExternalToken"}}))}return r}const sn=536870912,ln=m.makeStyles()((e=>({container:{margin:8},fileInput:{marginBottom:8},root:{margin:2},paper:{display:"flex",flexDirection:"column",gap:10,padding:8,margin:"2px 4px 8px 4px"},dragAndDropContainer:{margin:"8px 8px 0px 8px"},dropZone:{textAlign:"center",borderWidth:2,borderRadius:2,padding:8,borderStyle:"dashed",outline:"none",transition:"border .24s ease-in-out","&:focus":{borderColor:e.palette.secondary.light}},uploadIcon:{color:e.palette.text.secondary},rejectedFiles:{marginTop:10},listItem:{padding:10},expandIcon:{color:"#FFFFFF"},error:{margin:8},errorHeader:{background:e.palette.error.light,color:e.palette.error.contrastText,padding:8,textAlign:"center"},errorMessage:{padding:8},submitContainer:{display:"flex",flexDirection:"column"},buttonContainer:{display:"flex",justifyContent:"flex-end",marginTop:"4px"},addTrackButtonContainer:{display:"flex",justifyContent:"center"},loginPromptContainer:{display:"flex",flexDirection:"row",alignItems:"center"},typoContainer:{width:"100%"},tipContainer:{display:"flex",paddingTop:8},tipPaper:{display:"flex",background:e.palette.grey[100]},tipMessageContainer:{display:"flex",flexDirection:"row",padding:8,gap:8,alignItems:"center"}})));var cn=f.observer((({model:e})=>{const[t,n]=c.useState(),[a,r]=c.useState(!1),[i,l]=c.useState(!1),[u,d]=c.useState(!1),[p,f]=c.useState(),[m,g]=c.useState(),[y,b]=c.useState(),[_,v]=c.useState(),w=o.getSession(e),E=c.useRef();async function C(e,t,n){w.addView("SpreadsheetView",{});const a=w.views.length-1;w.views[a].setDisplayName(`GDC BEDPE ${e}`),t&&w.views[a].importWizard.setFileSource({uri:t,locationType:"UriLocation",authHeader:"X-Auth-Token",internetAccountId:"GDCExternalToken"}),n&&w.views[a].importWizard.setFileSource(s.storeBlobLocation({blob:n})),w.views[a].importWizard.setFileType("BEDPE"),w.views[a].importWizard.setSelectedAssemblyName("hg38"),await w.views[a].importWizard.import("hg38")}function T(e,t,a,i){if(e){const n={...e.config,trackId:t,name:a,assemblyNames:["hg38"]};w.addTrackConf({...n}),0===w.views.length&&w.addView("LinearGenomeView",{}),w.views[0].showTrack(t,{},{height:200,constraints:{max:2,min:-2},rendererTypeNameState:"density"}),"drag"===i?l(!0):"explore"===i?d(!0):r(!0)}else"drag"===i?n("Failed to add track.\nThe configuration of this file is not currently supported."):f("Failed to add track.\nThe configuration of this file is not currently supported.")}function k(e){const t=e.split(".")[-1];return e.includes("Methylation")?{format:t,type:"Methylation Beta Value",category:"DNA Methylation"}:e.includes("splice")?{format:t,type:"Splice Junction Quantification",category:"Transcriptome Profiling"}:{format:t,type:"",category:""}}function x(){f(void 0),g(void 0),n(void 0),b(void 0),r(!1),l(!1),d(!1)}const{getRootProps:A,getInputProps:S}=zt({maxSize:sn,multiple:!1,onDrop:async(t,a)=>{if(x(),a.length)if(t.length||a.length>1){const e="Only one session at a time may be imported";console.error(e),n(e)}else if(a[0].file.size>sn){const e=`File size is too large (${Math.round(a[0].file.size/1048576)} MiB), max size is 512 MiB`;console.error(e),n(e)}else{const e="Unknown file import error";console.error(e),n(e)}const[r]=t;if(r){const t=k(r.name);try{if("json"==t.format){const e=await new Promise((e=>{const t=new FileReader;t.addEventListener("load",(t=>e(JSON.parse(t.target?.result)))),t.readAsText(r)})),t=[];for(const n in e.slice(0,1)[0])t.push(n);if(t.includes("file_id"))e.slice(0,25).map((e=>{T(on(k(e.file_name),`http://localhost:8010/proxy/data/${e.file_id}`),e.file_id,e.file_name,"drag")}));else{const e='Failed to add track.\nThe configuration of this file is not currently supported. Ensure that you have enabled the "File UUID" column on the GDC explore page table before exporting.';console.error(e),n(e)}}else if("bedpe"===t.type)await C(r.name,void 0,r),l(!0);else{if(/\.bam$/i.test(r.name)&&(e.indexTrackData||(b("Please upload a corresponding BAI file."),v(r.name)),e.setTrackData(s.storeBlobLocation({blob:r}))),/\.bai$/i.test(r.name)&&(e.trackData||(b("Please upload a corresponding BAM file."),v(r.name)),e.setIndexTrackData(s.storeBlobLocation({blob:r}))),(/\.bam$/i.test(r.name)||/\.bai$/i.test(r.name))&&e.indexTrackData&&e.trackData){const t=`gdc_plugin_track-${Date.now()}`;T({config:{type:"AlignmentsTrack",adapter:{type:"BamAdapter",bamLocation:e.trackData,index:{location:e.indexTrackData,indexType:"BAI"}}}},t,e.trackData.name,"drag"),e.setTrackData(void 0),e.setIndexTrackData(void 0),v(void 0),b(void 0)}if(!/\.bam$/i.test(r.name)&&!/\.bai$/i.test(r.name)){const e=`gdc_plugin_track-${Date.now()}`;T(on(t,void 0,void 0,r),e,r.name,"drag")}}}catch(e){console.error(e);const t=e.message.length>100?`${e.message.substring(0,99)}...`:e;n(`Failed to add track.\n ${t}.`)}}}});function D(e,t){const n=e.split("?")[1],a=new URLSearchParams(n),r="genes"===a.get("searchTableTab")||"mutations"===a.get("searchTableTab")?a.get("searchTableTab").slice(0,-1):"mutation",i=a.get("filters")?a.get("filters"):"{}",o=decodeURIComponent(i),s=Date.now(),l=`gdc_plugin_track-${s}`,c=`GDC Explore session-${s}`,u=function(e,t,n,a){const r=rn.get("GDC Explore");if(r){const e=Date.now();r.config={adapter:{...r.config.adapter,GDCAdapterId:a,filters:n,featureType:t},category:void 0,displays:[{displayId:`gdc_plugin_track_linear-${e}`,renderer:{color1:"mutation"==t?"jexl:cast({LOW: 'blue', MODIFIER: 'goldenrod', MODERATE: 'green', HIGH: 'red'})[get(feature,'consequence').hits.edges[.node.transcript.is_canonical == true][0].node.transcript.annotation.vep_impact] || 'lightgray'":"jexl:cast('goldenrod')",labels:{name:"jexl:get(feature,'genomicDnaChange')",type:"SvgFeatureRenderer"}},type:"LinearGDCDisplay"}],type:r.config.type}}return r}(0,r,o,l);T(u,l,c,t)}const{classes:j}=ln();return c.createElement("div",{className:j.root},c.createElement(h.Paper,{className:j.paper,elevation:3},c.createElement(h.Typography,{variant:"h6",component:"h1",align:"center"},"Drag and Drop Local GDC Files"),c.createElement("div",{className:j.dragAndDropContainer},c.createElement("div",{...A({className:j.dropZone})},c.createElement("input",{...S()}),c.createElement($t,{className:j.uploadIcon,fontSize:"large"}),c.createElement(h.Typography,{color:"textSecondary",align:"center",variant:"body1"},"Drag and drop files here"),c.createElement(h.Typography,{color:"textSecondary",align:"center",variant:"body2"},"or"),c.createElement(h.Button,{color:"primary",variant:"contained"},"Browse Files")),c.createElement("div",{className:j.tipContainer},c.createElement(h.Paper,{className:j.tipPaper,elevation:0},c.createElement("div",{className:j.tipMessageContainer},c.createElement(Kt,null),c.createElement(h.Typography,{color:"textSecondary",variant:"caption"},"You can bulk import files from the GDC Repository using the JSON export button."),c.createElement(h.Button,{variant:"text",onClick:()=>{w.queueDialog((e=>[an,{handleClose:()=>{e()}}]))}},c.createElement("b",null,"Learn More")))))),i?c.createElement(h.Alert,{severity:"success"},"The requested track(s) from the file have been added."):null,t?c.createElement(h.Alert,{severity:"error"},t):null,_?c.createElement(h.Chip,{label:_,avatar:c.createElement(Vt,null),onDelete:()=>{e.setTrackData(void 0),e.setIndexTrackData(void 0),v(void 0),b(void 0)}}):null,y?c.createElement(h.Alert,{severity:"info"},y):null),c.createElement(h.Paper,{className:j.paper,elevation:3},c.createElement(h.Typography,{variant:"h6",component:"h1",align:"center"},"Import File or Exploration by UUID or URL"),c.createElement(h.Typography,{variant:"body1",align:"center"},"Add a track by providing the UUID or URL of a file, including controlled data, or by providing the URL of an Exploration session."),p?c.createElement(h.Alert,{severity:"error"},p):null,m?c.createElement(h.Alert,{severity:"info"},m):null,a?c.createElement(h.Alert,{severity:"success"},"The requested track has been added."):null,c.createElement("div",{className:j.submitContainer},c.createElement(h.TextField,{color:"primary",variant:"outlined",label:"Enter UUID or URL",inputRef:E}),c.createElement("div",{className:j.buttonContainer},c.createElement(h.Button,{color:"primary",variant:"contained",size:"large",onClick:async()=>{x();try{let e=E?E.current.value:void 0;if(e.includes("exploration"))D(e);else if(e){e.includes("files/")&&(e=e.split("/")[4]);const t=await async function(e){const t=await fetch(`http://localhost:8010/proxy/files/${e}?expand=index_files`,{method:"GET"});if(!t.ok)throw new Error(`Failed to fetch ${t.status} ${await t.text()}`);return t.json()}(e),n={category:t.data.data_category,format:t.data.data_format.toLowerCase(),type:t.data.data_type},a=`http://localhost:8010/proxy/data/${e}`,i=`${t.data.file_id}`,o=`${t.data.file_name}`;"bedpe"!==n.type?T(on(n,a,t.data.index_files?t.data.index_files[0].file_id:void 0),i,o):(await C(t.data.file_id,a),r(!0))}else f("Failed to add track.\nUUID or URL must be provided.")}catch(e){const t=`${e}`;if(!t.includes("unable to determine size of file at")){console.error(e);const n=t.length>100?`${t.substring(0,99)}...`:t;f(`Failed to add track.\n ${n}.`)}}E.current.value=null}},"Submit")))),c.createElement(h.Paper,{className:j.paper,elevation:3},c.createElement("div",{className:j.typoContainer},c.createElement(h.Typography,{variant:"h6",component:"h1",align:"center"},"Quick-add a GDC Explore Track"),c.createElement(h.Typography,{variant:"body1",align:"center"},"Add additional Explore tracks to your current view by clicking this button.")),u?c.createElement(h.Alert,{severity:"success"},"The requested Explore track has been added."):null,c.createElement("div",{className:j.addTrackButtonContainer},c.createElement(h.Button,{color:"primary",variant:"contained",size:"small",startIcon:c.createElement(Z,null),onClick:()=>{D("https://portal.gdc.cancer.gov/exploration?facetTab=mutations","explore")}},"Add New GDC Explore Track"))))})),un={},dn=H.exports;Object.defineProperty(un,"__esModule",{value:!0});var pn=un.default=void 0,fn=(0,dn(V).default)((0,p.jsx)("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}),"FilterList");pn=un.default=fn;var hn=(e,n)=>{const{BaseLinearDisplay:a}=e.getPlugin("LinearGenomeViewPlugin")?.exports;return r.types.compose("LinearGDCDisplay",a,r.types.model({type:r.types.literal("LinearGDCDisplay"),configuration:t.ConfigurationReference(n)})).actions((e=>({openFilterConfig(){const t=o.getSession(e);if(o.isSessionModelWithWidgets(t)){const n=t.addWidget("GDCFilterWidget","gdcFilter",{target:e.parentTrack.configuration});t.showWidget(n)}},selectFeature(t){const n=o.getSession(e);if(t&&o.isSessionModelWithWidgets(n)){const e=n.addWidget("GDCFeatureWidget","gdcFeature",{featureData:t.toJSON()});n.showWidget(e),n.setSelection(t)}}}))).views((e=>{const{renderProps:t,trackMenuItems:n}=e;return{renderProps:()=>({...t(),...s.getParentRenderProps(e),displayModel:e,config:e.configuration.renderer}),get rendererTypeName(){return e.configuration.renderer.type},trackMenuItems:()=>[...n(),{label:"Filter",onClick:()=>e.openFilterConfig(),icon:pn}]}}))},mn=function(e){var n=e.getPlugin("LinearGenomeViewPlugin").exports.baseLinearDisplayConfigSchema;return t.ConfigurationSchema("LinearIEQDisplay",{renderer:e.pluggableConfigSchemaType("renderer")},{baseConfiguration:n,explicitlyTyped:!0})};function gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gn(Object(n),!0).forEach((function(t){var a,r,i;a=e,i=n[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r=t))in a?Object.defineProperty(a,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[r]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bn=function(e){var n=e.jbrequire(mn),a=e.getPlugin("LinearGenomeViewPlugin").exports.BaseLinearDisplay;return r.types.compose("LinearIEQDisplay",a,r.types.model({type:r.types.literal("LinearIEQDisplay"),configuration:t.ConfigurationReference(n)})).actions((function(e){return{selectFeature:function(t){if(t){var n=o.getSession(e),a=n.addWidget("GDCFeatureWidget","gdcFeature",{featureData:t.toJSON()});n.showWidget(a),n.setSelection(t)}}}})).views((function(e){var t=e.renderProps;return{renderProps:function(){var n=e.rendererType.configSchema.create({color1:"jexl:ieqColouring(feature, 'reads_per_million_mirna_mapped')"},r.getEnv(e));return yn(yn(yn({},t()),s.getParentRenderProps(e)),{},{displayModel:e,config:n})},get rendererTypeName(){return e.configuration.renderer.type}}}))},_n=function(e){var n=e.getPlugin("LinearGenomeViewPlugin").exports.baseLinearDisplayConfigSchema;return t.ConfigurationSchema("LinearMAFDisplay",{renderer:e.pluggableConfigSchemaType("renderer")},{baseConfiguration:n,explicitlyTyped:!0})},vn=function(e){var n=e.jbrequire(_n),a=e.getPlugin("LinearGenomeViewPlugin").exports.BaseLinearDisplay;return r.types.compose("LinearMAFDisplay",a,r.types.model({type:r.types.literal("LinearMAFDisplay"),configuration:t.ConfigurationReference(n)})).actions((function(e){return{selectFeature:function(t){if(t){var n=o.getSession(e),a=n.addWidget("GDCFeatureWidget","gdcFeature",{featureData:t.toJSON()});n.showWidget(a),n.setSelection(t)}}}})).views((function(e){var t=e.renderProps;return{renderProps:function(){var n=e.rendererType.configSchema.create({color1:"jexl:mafColouring(feature)"},r.getEnv(e));return yn(yn(yn({},t()),s.getParentRenderProps(e)),{},{displayModel:e,config:n})},get rendererTypeName(){return e.configuration.renderer.type}}}))},wn=function(e){return{configSchema:e.jbrequire(_n),stateModel:e.jbrequire(vn)}},En=t.ConfigurationSchema("GDCAdapter",{filters:{type:"string",defaultValue:"{}",description:"The filters to be applied to the track. Only edit if you know what you are doing."},colourBy:{type:"string",defaultValue:"{}",description:"Colour features based on track attributes. Only edit if you know what you are doing."},featureType:{type:"stringEnum",model:r.types.enumeration("Feature Type",["mutation","gene"]),defaultValue:"mutation",description:"The type of track to add"},cases:{type:"stringArray",defaultValue:[],description:"GDC case UUIDs"},size:{type:"integer",defaultValue:5e3,description:"The max number of features to show."}},{explicitlyTyped:!0,explicitIdentifier:"GDCAdapterId"});class Cn{gdcObject;data;uniqueId;featureType;constructor(e){this.gdcObject=e.gdcObject,this.featureType=e.featureType?e.featureType:"mutation",this.data=this.dataFromGDCObject(this.gdcObject,this.featureType),this.uniqueId=e.id}get(e){return this.gdcObject[e]||this.data[e]}set(){}parent(){}children(){}tags(){return[...Object.keys(this.data),...Object.keys(this.gdcObject)]}id(){return this.uniqueId}dataFromGDCObject(e,t){const n={refName:e.chromosome,type:e.mutationType,start:e.startPosition-1,end:e.endPosition};return"gene"===t&&(n.start=e.geneStart-1,n.end=e.geneEnd,n.refName=e.geneChromosome,n.type=e.biotype,n.note=e.symbol),n}toJSON(){return{uniqueId:this.uniqueId,...this.data,...this.gdcObject}}}var Tn={},kn={},xn={},An={};function Sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function jn(e,t,n){return t&&Dn(e.prototype,t),n&&Dn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function In(e){return In=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},In(e)}function On(e,t){return On=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},On(e,t)}function Fn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ln(){return Ln="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=In(e)););return e}(e,t);if(a){var r=Object.getOwnPropertyDescriptor(a,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},Ln.apply(this,arguments)}Object.defineProperty(An,"__esModule",{value:!0});var Rn=function(){function e(){Sn(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return jn(e,[{key:"addEventListener",value:function(e,t,n){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:n})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var n=this.listeners[e],a=0,r=n.length;a<r;a++)if(n[a].callback===t)return void n.splice(a,1)}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){for(var t=this.listeners[e.type].slice(),n=0,a=t.length;n<a;n++){var r=t[n];try{r.callback.call(this,e)}catch(e){Promise.resolve().then((function(){throw e}))}r.options&&r.options.once&&this.removeEventListener(e.type,r.callback)}return!e.defaultPrevented}}}]),e}(),Nn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&On(e,t)}(r,e);var t,n,a=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=In(t);if(n){var r=In(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Fn(e)}(this,e)});function r(){var e;return Sn(this,r),(e=a.call(this)).listeners||Rn.call(Fn(e)),Object.defineProperty(Fn(e),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(Fn(e),"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(Fn(e),"reason",{value:void 0,writable:!0,configurable:!0}),e}return jn(r,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),Ln(In(r.prototype),"dispatchEvent",this).call(this,e)}}]),r}(Rn),zn=function(){function e(){Sn(this,e),Object.defineProperty(this,"signal",{value:new Nn,writable:!0,configurable:!0})}return jn(e,[{key:"abort",value:function(e){var t;try{t=new Event("abort")}catch(e){"undefined"!=typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}var n=e;if(void 0===n)if("undefined"==typeof document)(n=new Error("This operation was aborted")).name="AbortError";else try{n=new DOMException("signal is aborted without reason")}catch(e){(n=new Error("This operation was aborted")).name="AbortError"}this.signal.reason=n,this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),e}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(zn.prototype[Symbol.toStringTag]="AbortController",Nn.prototype[Symbol.toStringTag]="AbortSignal"),An.AbortController=zn,An.AbortSignal=Nn,An.abortableFetch=function(e){"function"==typeof e&&(e={fetch:e});var t=e.fetch,n=e.Request,a=void 0===n?t.Request:n,r=e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,i=void 0!==r&&r;if(!function(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}({fetch:t,Request:a,AbortController:e.AbortController,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:i}))return{fetch:t,Request:o};var o=a;(o&&!o.prototype.hasOwnProperty("signal")||i)&&((o=function(e,t){var n;t&&t.signal&&(n=t.signal,delete t.signal);var r=new a(e,t);return n&&Object.defineProperty(r,"signal",{writable:!1,enumerable:!1,configurable:!0,value:n}),r}).prototype=a.prototype);var s=t;return{fetch:function(e,t){var n=o&&o.prototype.isPrototypeOf(e)?e.signal:t?t.signal:void 0;if(n){var a;try{a=new DOMException("Aborted","AbortError")}catch(e){(a=new Error("Aborted")).name="AbortError"}if(n.aborted)return Promise.reject(a);var r=new Promise((function(e,t){n.addEventListener("abort",(function(){return t(a)}),{once:!0})}));return t&&t.signal&&delete t.signal,Promise.race([r,s(e,t)])}return s(e,t)},Request:o}},Object.defineProperty(xn,"__esModule",{value:!0}),xn.AbortSignal=xn.AbortController=void 0;const Pn=An;var Mn=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==k)return k;throw new Error("unable to locate global object")};let Gn=void 0===Mn().AbortController?Pn.AbortController:Mn().AbortController;xn.AbortController=Gn;let Bn=void 0===Mn().AbortController?Pn.AbortSignal:Mn().AbortSignal;xn.AbortSignal=Bn;var $n={};Object.defineProperty($n,"__esModule",{value:!0});const qn=xn;class Un{}$n.default=class{constructor(){this.signals=new Set,this.abortController=new qn.AbortController}addSignal(e=new Un){if(this.signal.aborted)throw new Error("cannot add a signal, already aborted!");this.signals.add(e),e.aborted?this.handleAborted(e):"function"==typeof e.addEventListener&&e.addEventListener("abort",(()=>{this.handleAborted(e)}))}handleAborted(e){this.signals.delete(e),0===this.signals.size&&this.abortController.abort()}get signal(){return this.abortController.signal}abort(){this.abortController.abort()}};var Hn={};Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.default=class{constructor(){this.callbacks=new Set}addCallback(e=(()=>{})){this.callbacks.add(e),e(this.currentMessage)}callback(e){this.currentMessage=e,this.callbacks.forEach((t=>{t(e)}))}};var Vn=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kn,"__esModule",{value:!0});const Wn=xn,Zn=Vn($n),Jn=Vn(Hn);class Kn{constructor({fill:e,cache:t}){if("function"!=typeof e)throw new TypeError("must pass a fill function");if("object"!=typeof t)throw new TypeError("must pass a cache object");if("function"!=typeof t.get||"function"!=typeof t.set||"function"!=typeof t.delete)throw new TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=t,this.fillCallback=e}static isAbortException(e){return"AbortError"===e.name||"ERR_ABORTED"===e.code||"AbortError: aborted"===e.message||"Error: aborted"===e.message}evict(e,t){this.cache.get(e)===t&&this.cache.delete(e)}fill(e,t,n,a){const r=new Zn.default,i=new Jn.default;i.addCallback(a);const o={aborter:r,promise:this.fillCallback(t,r.signal,(e=>{i.callback(e)})),settled:!1,statusReporter:i,get aborted(){return this.aborter.signal.aborted}};o.aborter.addSignal(n),o.aborter.signal.addEventListener("abort",(()=>{o.settled||this.evict(e,o)})),o.promise.then((()=>{o.settled=!0}),(()=>{o.settled=!0,this.evict(e,o)})).catch((e=>{throw console.error(e),e})),this.cache.set(e,o)}static checkSinglePromise(e,t){function n(){if(t&&t.aborted)throw Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})}return e.then((e=>(n(),e)),(e=>{throw n(),e}))}has(e){return this.cache.has(e)}get(e,t,n,a){if(!n&&t instanceof Wn.AbortSignal)throw new TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");const r=this.cache.get(e);return r?r.aborted&&!r.settled?(this.evict(e,r),this.get(e,t,n,a)):r.settled?r.promise:(r.aborter.addSignal(n),r.statusReporter.addCallback(a),Kn.checkSinglePromise(r.promise,n)):(this.fill(e,t,n,a),Kn.checkSinglePromise(this.cache.get(e).promise,n))}delete(e){const t=this.cache.get(e);t&&(t.settled||t.aborter.abort(),this.cache.delete(e))}clear(){const e=this.cache.keys();let t=0;for(let n=e.next();!n.done;n=e.next())this.delete(n.value),t+=1;return t}}kn.default=Kn;var Qn=k&&k.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tn,"__esModule",{value:!0});const Yn=Qn(kn);var Xn=Tn.default=Yn.default,ea={};Object.defineProperty(ea,"__esModule",{value:!0});class ta extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"==typeof e.maxAge&&0===e.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if("function"==typeof this.onEviction)for(const[t,n]of e)this.onEviction(t,n.value)}_deleteIfExpired(e,t){return"number"==typeof t.expiry&&t.expiry<=Date.now()&&("function"==typeof this.onEviction&&this.onEviction(e,t.value),this.delete(e))}_getOrDeleteIfExpired(e,t){if(!1===this._deleteIfExpired(e,t))return t.value}_getItemValue(e,t){return t.expiry?this._getOrDeleteIfExpired(e,t):t.value}_peek(e,t){const n=t.get(e);return this._getItemValue(e,n)}_set(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,t){this.oldCache.delete(e),this._set(e,t)}*_entriesAscending(){for(const e of this.oldCache){const[t,n]=e;this.cache.has(t)||!1===this._deleteIfExpired(t,n)&&(yield e)}for(const e of this.cache){const[t,n]=e;!1===this._deleteIfExpired(t,n)&&(yield e)}}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this._getItemValue(e,t)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);if(!1===this._deleteIfExpired(e,t))return this._moveToRecent(e,t),t.value}}set(e,t,{maxAge:n=this.maxAge}={}){const a="number"==typeof n&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;this.cache.has(e)?this.cache.set(e,{value:t,expiry:a}):this._set(e,{value:t,expiry:a})}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):!!this.oldCache.has(e)&&!this._deleteIfExpired(e,this.oldCache.get(e))}peek(e){return this.cache.has(e)?this._peek(e,this.cache):this.oldCache.has(e)?this._peek(e,this.oldCache):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const t=[...this._entriesAscending()],n=t.length-e;n<0?(this.cache=new Map(t),this.oldCache=new Map,this._size=t.length):(n>0&&this._emitEvictions(t.slice(0,n)),this.oldCache=new Map(t.slice(n)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[t,n]=e;!1===this._deleteIfExpired(t,n)&&(yield[t,n.value])}for(const e of this.oldCache){const[t,n]=e;this.cache.has(t)||!1===this._deleteIfExpired(t,n)&&(yield[t,n.value])}}*entriesDescending(){let e=[...this.cache];for(let t=e.length-1;t>=0;--t){const n=e[t],[a,r]=n;!1===this._deleteIfExpired(a,r)&&(yield[a,r.value])}e=[...this.oldCache];for(let t=e.length-1;t>=0;--t){const n=e[t],[a,r]=n;this.cache.has(a)||!1===this._deleteIfExpired(a,r)&&(yield[a,r.value])}}*entriesAscending(){for(const[e,t]of this._entriesAscending())yield[e,t.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,t=this){for(const[n,a]of this.entriesAscending())e.call(t,a,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}var na=ea.default=ta;class aa extends _.BaseFeatureDataAdapter{filters;cases;size;featureType;static capabilities=["getFeatures","getRefNames"];featureCache=new Xn({cache:new na({maxSize:200}),fill:async(e,t)=>this.fetchFeatures(e,t)});async fetchFeatures(e,t){const n=await fetch("https://api.gdc.cancer.gov/v0/graphql",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e),signal:t});if(!n.ok)throw new Error(`Failed to fetch ${n.status} ${n.statusText}`);return n.json()}constructor(e){super(e);const n=t.readConfObject(e,"filters"),a=t.readConfObject(e,"cases"),r=t.readConfObject(e,"size"),i=t.readConfObject(e,"featureType");this.filters=n,this.cases=a,this.size=r,this.featureType=i}async getRefNames(){return["chr1","chr10","chr11","chr12","chr13","chr14","chr15","chr16","chr17","chr18","chr19","chr2","chr20","chr21","chr22","chr3","chr4","chr5","chr6","chr7","chr8","chr9","chrX","chrY"]}getFeatures(e,t={}){const{refName:n,start:a,end:r}=e;return v.ObservableCreate((async e=>{try{let i={},o="ssmId";switch(this.featureType){case"mutation":i=this.createMutationQuery(n.replace(/chr/,""),a,r),o="ssmId";break;case"gene":i=this.createGeneQuery(n.replace(/chr/,""),a,r),o="geneId";break;default:e.error(`Not a valid type: ${this.featureType}`)}const s=await this.featureCache.get(JSON.stringify(i),i,t.signal),l=s.data.viewer.explore.features.hits.edges;if("mutation"===this.featureType){const t=s.data.viewer.explore.filteredCases.hits.total,n=Math.ceil(Math.log10(t));for(const a of l){const r=a.node;r.numOfCasesInCohort=t,r.percentage=100*Math.log10(r.score)/n+100,r.occurrenceInCohort=`${r.score} / ${t}`;const i=new Cn({gdcObject:r,id:r[o],featureType:this.featureType});e.next(i)}}else for(const t of l){const n=t.node;n.strand=n.geneStrand,n.id=n[o];const a=new Cn({gdcObject:n,id:n[o],featureType:this.featureType});e.next(a)}}catch(t){e.error(t)}e.complete()}),t.signal)}freeResources(){}createMutationQuery(e,t,n){const a=this.getFilterQuery(e,t,n,!1),r=this.getFilterQuery(e,t,n,!0);return{query:"query mutationsQuery( $size: Int $offset: Int $filters: FiltersArgument $filtersWithoutLocation: FiltersArgument $score: String $sort: [Sort] ) { viewer { explore { filteredCases: cases { hits(first: 0, filters: $filtersWithoutLocation) { total } } features: ssms { hits(first: $size, offset: $offset, filters: $filters, score: $score, sort: $sort) { total edges { node { score startPosition: start_position endPosition: end_position mutationType: mutation_type cosmicId: cosmic_id referenceAllele: reference_allele ncbiBuild: ncbi_build genomicDnaChange: genomic_dna_change mutationSubtype: mutation_subtype ssmId: ssm_id chromosome consequence { hits { edges { node { transcript { is_canonical annotation { vep_impact polyphen_impact polyphen_score sift_score sift_impact hgvsc } consequence_type gene { gene_id symbol gene_strand } aa_change transcript_id } id } } } } } } } } } } }",variables:{size:this.size?this.size:5e3,offset:0,filters:a,filtersWithoutLocation:r,score:"occurrence.case.project.project_id",sort:[{field:"_score",order:"desc"},{field:"_uid",order:"asc"}]}}}createGeneQuery(e,t,n){return{query:"query genesQuery( $filters: FiltersArgument $size: Int $offset: Int $score: String ) { viewer { explore { features: genes { hits(first: $size, offset: $offset, filters: $filters, score: $score) { total edges { node { geneId: gene_id id geneStrand: gene_strand synonyms symbol name geneStart: gene_start geneEnd: gene_end geneChromosome: gene_chromosome description canonicalTranscriptId: canonical_transcript_id externalDbIds: external_db_ids { hgnc omimGene: omim_gene uniprotkbSwissprot: uniprotkb_swissprot entrezGene: entrez_gene } biotype isCancerGeneCensus: is_cancer_gene_census } } } } } } }",variables:{filters:this.getFilterQuery(e,t,n,!1),size:this.size?this.size:5e3,offset:0,score:"case.project.project_id"}}}getFilterQuery(e,t,n,a){const r={op:"and",content:[this.addLocationAndCasesToFilter(e,t,n,a)]},i=JSON.parse(this.filters);return i&&Object.keys(i).length>0&&r.content.push(i),r}addLocationAndCasesToFilter(e,t,n,a){let r;if(a)r={op:"and",content:[{op:"in",content:{field:"available_variation_data",value:["ssm"]}}]};else switch(this.featureType){case"mutation":r={op:"and",content:[{op:"<=",content:{field:"ssms.start_position",value:n}},{op:">=",content:{field:"ssms.end_position",value:t}},{op:"=",content:{field:"ssms.chromosome",value:[`chr${e}`]}}]};break;case"gene":r={op:"and",content:[{op:"<=",content:{field:"genes.gene_start",value:n}},{op:">=",content:{field:"genes.gene_end",value:t}},{op:"=",content:{field:"genes.gene_chromosome",value:[e]}}]};break;default:throw new Error(`invalid featureType ${this.featureType}`)}return this.cases&&this.cases.length>0&&r.content.push({op:"in",content:{field:"cases.case_id",value:this.cases}}),r}}var ra=t.ConfigurationSchema("SegmentCNVAdapter",{segLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/myfile.seg",locationType:"UriLocation"}}},{explicitlyTyped:!0}),ia={};function oa(e){return"uniqueId"in e&&"object"!=typeof e.data}Object.defineProperty(ia,"__esModule",{value:!0}),ia.isFeature=void 0,ia.isFeature=function(e){return"object"==typeof e&&null!==e&&"function"==typeof e.get&&"function"==typeof e.id};class sa{constructor(e){var t;oa(e)?this.data=e:(this.data=e.data||{},this.parentHandle=e.parent);const n=oa(e)?e.uniqueId:e.id;if(null==n)throw new Error("SimpleFeature requires a unique `id` or `data.uniqueId` attribute");if(this.uniqueId=String(n),!(this.data.aliases||this.data.end-this.data.start>=0))throw new Error(`invalid feature data, end less than start. end: ${this.data.end} start: ${this.data.start}`);this.data.subfeatures&&(this.subfeatures=null===(t=this.data.subfeatures)||void 0===t?void 0:t.map(((e,t)=>"function"!=typeof e.get?new sa({id:e.uniqueId||`${n}-${t}`,data:{strand:this.data.strand,...e},parent:this}):e)))}get(e){return"subfeatures"===e?this.subfeatures:"parent"===e?this.parent():this.data[e]}set(e,t){this.data[e]=t}tags(){return Object.keys(this.data)}id(){return this.uniqueId}parent(){return this.parentHandle}children(){return this.get("subfeatures")}toJSON(){const e={...this.data,uniqueId:this.id()},t=this.parent();t&&(e.parentId=t.id());const n=this.children();return n&&(e.subfeatures=n.map((e=>e.toJSON()))),e}static fromJSON(e){return new sa({...e})}}var la=ia.default=sa;class ca extends _.BaseFeatureDataAdapter{static capabilities=["getFeatures","getRefNames"];setupP;async readSeg(){const e=t.readConfObject(this.config,"segLocation"),n=(await w.openLocation(e,this.pluginManager).readFile("utf8")).split("\n"),a=[],r=[];let i=[],o=0;return n.forEach((e=>{0===i.length?(i=e.split("\t"),o=i.findIndex((e=>"chromosome"===e.toLowerCase()))):void 0!==e.split("\t")[o]&&(r.push(e),a.push(e.split("\t")[o]))})),{lines:r,columns:i,refNames:Array.from(new Set(a))}}parseLine(e,t){const n={};return e.split("\t").forEach(((e,a)=>{e&&(0===a?n.id=e:("segment_mean"!==t[a].toLowerCase()&&"copy_number"!==t[a].toLowerCase()||(n.score=+e),n[t[a].toLowerCase()]=e))})),n}async getLines(){const{columns:e,lines:t}=await this.readSeg();return t.map((t=>{const n=this.parseLine(t,e);return new la({...n,uniqueId:n.id,id:n.id,start:+n.start,end:+n.end,refName:n.chromosome,score:+n.score})}))}async setup(){return this.setupP||(this.setupP=this.getLines()),this.setupP}async getRefNames(e={}){const{refNames:t}=await this.readSeg();return t}getFeatures(e,t={}){return v.ObservableCreate((async t=>{(await this.setup()).forEach((n=>{n.get("refName")===e.refName&&n.get("end")>e.start&&n.get("start")<e.end&&t.next(n)})),t.complete()}),t.signal)}freeResources(){}}var ua=t.ConfigurationSchema("MafAdapter",{mafLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/myfile.maf",locationType:"UriLocation"}}},{explicitlyTyped:!0});class da{mutation;data;_id;constructor(e){this.mutation=e.mutation,this.data=this.dataFromMutation(this.mutation),this._id=e.id}get(e){return this.data[e]||this.mutation[e]}set(){}parent(){}children(){}tags(){return[...Object.keys(this.data),...Object.keys(this.mutation)]}id(){return this._id}dataFromMutation(e){return{refName:e.chromosome,start:+e.start_position-1,end:+e.end_position,name:`${e.chromosome}:g.${e.start_position}${e.tumor_seq_allele1}>${e.tumor_seq_allele2}`,note:e.hgvsc}}toJSON(){return{uniqueId:this._id,...this.mutation,...this.data}}}function pa(e){let t=e.length;for(;--t>=0;)e[t]=0}const fa=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ha=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ma=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),ga=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ya=new Array(576);pa(ya);const ba=new Array(60);pa(ba);const _a=new Array(512);pa(_a);const va=new Array(256);pa(va);const wa=new Array(29);pa(wa);const Ea=new Array(30);function Ca(e,t,n,a,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=a,this.max_length=r,this.has_stree=e&&e.length}let Ta,ka,xa;function Aa(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}pa(Ea);const Sa=e=>e<256?_a[e]:_a[256+(e>>>7)],Da=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},ja=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,Da(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Ia=(e,t,n)=>{ja(e,n[2*t],n[2*t+1])},Oa=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},Fa=(e,t,n)=>{const a=new Array(16);let r,i,o=0;for(r=1;r<=15;r++)o=o+n[r-1]<<1,a[r]=o;for(i=0;i<=t;i++){let t=e[2*i+1];0!==t&&(e[2*i]=Oa(a[t]++,t))}},La=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Ra=e=>{e.bi_valid>8?Da(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Na=(e,t,n,a)=>{const r=2*t,i=2*n;return e[r]<e[i]||e[r]===e[i]&&a[t]<=a[n]},za=(e,t,n)=>{const a=e.heap[n];let r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&Na(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!Na(t,a,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=a},Pa=(e,t,n)=>{let a,r,i,o,s=0;if(0!==e.sym_next)do{a=255&e.pending_buf[e.sym_buf+s++],a+=(255&e.pending_buf[e.sym_buf+s++])<<8,r=e.pending_buf[e.sym_buf+s++],0===a?Ia(e,r,t):(i=va[r],Ia(e,i+256+1,t),o=fa[i],0!==o&&(r-=wa[i],ja(e,r,o)),a--,i=Sa(a),Ia(e,i,n),o=ha[i],0!==o&&(a-=Ea[i],ja(e,a,o)))}while(s<e.sym_next);Ia(e,256,t)},Ma=(e,t)=>{const n=t.dyn_tree,a=t.stat_desc.static_tree,r=t.stat_desc.has_stree,i=t.stat_desc.elems;let o,s,l,c=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<i;o++)0!==n[2*o]?(e.heap[++e.heap_len]=c=o,e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,r&&(e.static_len-=a[2*l+1]);for(t.max_code=c,o=e.heap_len>>1;o>=1;o--)za(e,n,o);l=i;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],za(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,n[2*l]=n[2*o]+n[2*s],e.depth[l]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,n[2*o+1]=n[2*s+1]=l,e.heap[1]=l++,za(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,a=t.max_code,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,d,p,f,h,m=0;for(p=0;p<=15;p++)e.bl_count[p]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)u=e.heap[c],p=n[2*n[2*u+1]+1]+1,p>l&&(p=l,m++),n[2*u+1]=p,u>a||(e.bl_count[p]++,f=0,u>=s&&(f=o[u-s]),h=n[2*u],e.opt_len+=h*(p+f),i&&(e.static_len+=h*(r[2*u+1]+f)));if(0!==m){do{for(p=l-1;0===e.bl_count[p];)p--;e.bl_count[p]--,e.bl_count[p+1]+=2,e.bl_count[l]--,m-=2}while(m>0);for(p=l;0!==p;p--)for(u=e.bl_count[p];0!==u;)d=e.heap[--c],d>a||(n[2*d+1]!==p&&(e.opt_len+=(p-n[2*d+1])*n[2*d],n[2*d+1]=p),u--)}})(e,t),Fa(n,c,e.bl_count)},Ga=(e,t,n)=>{let a,r,i=-1,o=t[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(n+1)+1]=65535,a=0;a<=n;a++)r=o,o=t[2*(a+1)+1],++s<l&&r===o||(s<c?e.bl_tree[2*r]+=s:0!==r?(r!==i&&e.bl_tree[2*r]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,i=r,0===o?(l=138,c=3):r===o?(l=6,c=3):(l=7,c=4))},Ba=(e,t,n)=>{let a,r,i=-1,o=t[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),a=0;a<=n;a++)if(r=o,o=t[2*(a+1)+1],!(++s<l&&r===o)){if(s<c)do{Ia(e,r,e.bl_tree)}while(0!=--s);else 0!==r?(r!==i&&(Ia(e,r,e.bl_tree),s--),Ia(e,16,e.bl_tree),ja(e,s-3,2)):s<=10?(Ia(e,17,e.bl_tree),ja(e,s-3,3)):(Ia(e,18,e.bl_tree),ja(e,s-11,7));s=0,i=r,0===o?(l=138,c=3):r===o?(l=6,c=3):(l=7,c=4)}};let $a=!1;const qa=(e,t,n,a)=>{ja(e,0+(a?1:0),3),Ra(e),Da(e,n),Da(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var Ua={_tr_init:e=>{$a||((()=>{let e,t,n,a,r;const i=new Array(16);for(n=0,a=0;a<28;a++)for(wa[a]=n,e=0;e<1<<fa[a];e++)va[n++]=a;for(va[n-1]=a,r=0,a=0;a<16;a++)for(Ea[a]=r,e=0;e<1<<ha[a];e++)_a[r++]=a;for(r>>=7;a<30;a++)for(Ea[a]=r<<7,e=0;e<1<<ha[a]-7;e++)_a[256+r++]=a;for(t=0;t<=15;t++)i[t]=0;for(e=0;e<=143;)ya[2*e+1]=8,e++,i[8]++;for(;e<=255;)ya[2*e+1]=9,e++,i[9]++;for(;e<=279;)ya[2*e+1]=7,e++,i[7]++;for(;e<=287;)ya[2*e+1]=8,e++,i[8]++;for(Fa(ya,287,i),e=0;e<30;e++)ba[2*e+1]=5,ba[2*e]=Oa(e,5);Ta=new Ca(ya,fa,257,286,15),ka=new Ca(ba,ha,0,30,15),xa=new Ca(new Array(0),ma,0,19,7)})(),$a=!0),e.l_desc=new Aa(e.dyn_ltree,Ta),e.d_desc=new Aa(e.dyn_dtree,ka),e.bl_desc=new Aa(e.bl_tree,xa),e.bi_buf=0,e.bi_valid=0,La(e)},_tr_stored_block:qa,_tr_flush_block:(e,t,n,a)=>{let r,i,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),Ma(e,e.l_desc),Ma(e,e.d_desc),o=(e=>{let t;for(Ga(e,e.dyn_ltree,e.l_desc.max_code),Ga(e,e.dyn_dtree,e.d_desc.max_code),Ma(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*ga[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),r=e.opt_len+3+7>>>3,i=e.static_len+3+7>>>3,i<=r&&(r=i)):r=i=n+5,n+4<=r&&-1!==t?qa(e,t,n,a):4===e.strategy||i===r?(ja(e,2+(a?1:0),3),Pa(e,ya,ba)):(ja(e,4+(a?1:0),3),((e,t,n,a)=>{let r;for(ja(e,t-257,5),ja(e,n-1,5),ja(e,a-4,4),r=0;r<a;r++)ja(e,e.bl_tree[2*ga[r]+1],3);Ba(e,e.dyn_ltree,t-1),Ba(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Pa(e,e.dyn_ltree,e.dyn_dtree)),La(e),a&&Ra(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(va[n]+256+1)]++,e.dyn_dtree[2*Sa(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{ja(e,2,3),Ia(e,256,ya),(e=>{16===e.bi_valid?(Da(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},Ha=(e,t,n,a)=>{let r=65535&e|0,i=e>>>16&65535|0,o=0;for(;0!==n;){o=n>2e3?2e3:n,n-=o;do{r=r+t[a++]|0,i=i+r|0}while(--o);r%=65521,i%=65521}return r|i<<16|0};const Va=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var a=0;a<8;a++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var Wa=(e,t,n,a)=>{const r=Va,i=a+n;e^=-1;for(let n=a;n<i;n++)e=e>>>8^r[255&(e^t[n])];return-1^e},Za={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ja={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Ka,_tr_stored_block:Qa,_tr_flush_block:Ya,_tr_tally:Xa,_tr_align:er}=Ua,{Z_NO_FLUSH:tr,Z_PARTIAL_FLUSH:nr,Z_FULL_FLUSH:ar,Z_FINISH:rr,Z_BLOCK:ir,Z_OK:or,Z_STREAM_END:sr,Z_STREAM_ERROR:lr,Z_DATA_ERROR:cr,Z_BUF_ERROR:ur,Z_DEFAULT_COMPRESSION:dr,Z_FILTERED:pr,Z_HUFFMAN_ONLY:fr,Z_RLE:hr,Z_FIXED:mr,Z_DEFAULT_STRATEGY:gr,Z_UNKNOWN:yr,Z_DEFLATED:br}=Ja,_r=258,vr=262,wr=42,Er=113,Cr=666,Tr=(e,t)=>(e.msg=Za[t],t),kr=e=>2*e-(e>4?9:0),xr=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Ar=e=>{let t,n,a,r=e.w_size;t=e.hash_size,a=t;do{n=e.head[--a],e.head[a]=n>=r?n-r:0}while(--t);t=r,a=t;do{n=e.prev[--a],e.prev[a]=n>=r?n-r:0}while(--t)};let Sr=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const Dr=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},jr=(e,t)=>{Ya(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Dr(e.strm)},Ir=(e,t)=>{e.pending_buf[e.pending++]=t},Or=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Fr=(e,t,n,a)=>{let r=e.avail_in;return r>a&&(r=a),0===r?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),1===e.state.wrap?e.adler=Ha(e.adler,t,r,n):2===e.state.wrap&&(e.adler=Wa(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},Lr=(e,t)=>{let n,a,r=e.max_chain_length,i=e.strstart,o=e.prev_length,s=e.nice_match;const l=e.strstart>e.w_size-vr?e.strstart-(e.w_size-vr):0,c=e.window,u=e.w_mask,d=e.prev,p=e.strstart+_r;let f=c[i+o-1],h=c[i+o];e.prev_length>=e.good_match&&(r>>=2),s>e.lookahead&&(s=e.lookahead);do{if(n=t,c[n+o]===h&&c[n+o-1]===f&&c[n]===c[i]&&c[++n]===c[i+1]){i+=2,n++;do{}while(c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&i<p);if(a=_r-(p-i),i=p-_r,a>o){if(e.match_start=t,o=a,a>=s)break;f=c[i+o-1],h=c[i+o]}}}while((t=d[t&u])>l&&0!=--r);return o<=e.lookahead?o:e.lookahead},Rr=e=>{const t=e.w_size;let n,a,r;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-vr)&&(e.window.set(e.window.subarray(t,t+t-a),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Ar(e),a+=t),0===e.strm.avail_in)break;if(n=Fr(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=n,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=Sr(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=Sr(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<vr&&0!==e.strm.avail_in)},Nr=(e,t)=>{let n,a,r,i=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,s=e.strm.avail_in;do{if(n=65535,r=e.bi_valid+42>>3,e.strm.avail_out<r)break;if(r=e.strm.avail_out-r,a=e.strstart-e.block_start,n>a+e.strm.avail_in&&(n=a+e.strm.avail_in),n>r&&(n=r),n<i&&(0===n&&t!==rr||t===tr||n!==a+e.strm.avail_in))break;o=t===rr&&n===a+e.strm.avail_in?1:0,Qa(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Dr(e.strm),a&&(a>n&&(a=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,n-=a),n&&(Fr(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===o);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==tr&&t!==rr&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(r=e.window_size-e.strstart,e.strm.avail_in>r&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,r+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),r>e.strm.avail_in&&(r=e.strm.avail_in),r&&(Fr(e.strm,e.window,e.strstart,r),e.strstart+=r,e.insert+=r>e.w_size-e.insert?e.w_size-e.insert:r),e.high_water<e.strstart&&(e.high_water=e.strstart),r=e.bi_valid+42>>3,r=e.pending_buf_size-r>65535?65535:e.pending_buf_size-r,i=r>e.w_size?e.w_size:r,a=e.strstart-e.block_start,(a>=i||(a||t===rr)&&t!==tr&&0===e.strm.avail_in&&a<=r)&&(n=a>r?r:a,o=t===rr&&0===e.strm.avail_in&&n===a?1:0,Qa(e,e.block_start,n,o),e.block_start+=n,Dr(e.strm)),o?3:1)},zr=(e,t)=>{let n,a;for(;;){if(e.lookahead<vr){if(Rr(e),e.lookahead<vr&&t===tr)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Sr(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-vr&&(e.match_length=Lr(e,n)),e.match_length>=3)if(a=Xa(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Sr(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Sr(e,e.ins_h,e.window[e.strstart+1]);else a=Xa(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(a&&(jr(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===rr?(jr(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(jr(e,!1),0===e.strm.avail_out)?1:2},Pr=(e,t)=>{let n,a,r;for(;;){if(e.lookahead<vr){if(Rr(e),e.lookahead<vr&&t===tr)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Sr(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-vr&&(e.match_length=Lr(e,n),e.match_length<=5&&(e.strategy===pr||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,a=Xa(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=Sr(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,a&&(jr(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(a=Xa(e,0,e.window[e.strstart-1]),a&&jr(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(a=Xa(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===rr?(jr(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(jr(e,!1),0===e.strm.avail_out)?1:2};function Mr(e,t,n,a,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=a,this.func=r}const Gr=[new Mr(0,0,0,0,Nr),new Mr(4,4,8,4,zr),new Mr(4,5,16,8,zr),new Mr(4,6,32,32,zr),new Mr(4,4,16,16,Pr),new Mr(8,16,32,32,Pr),new Mr(8,16,128,128,Pr),new Mr(8,32,128,256,Pr),new Mr(32,128,258,1024,Pr),new Mr(32,258,258,4096,Pr)];function Br(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=br,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),xr(this.dyn_ltree),xr(this.dyn_dtree),xr(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),xr(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),xr(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const $r=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==wr&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==Er&&t.status!==Cr?1:0},qr=e=>{if($r(e))return Tr(e,lr);e.total_in=e.total_out=0,e.data_type=yr;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?wr:Er,e.adler=2===t.wrap?0:1,t.last_flush=-2,Ka(t),or},Ur=e=>{const t=qr(e);var n;return t===or&&((n=e.state).window_size=2*n.w_size,xr(n.head),n.max_lazy_match=Gr[n.level].max_lazy,n.good_match=Gr[n.level].good_length,n.nice_match=Gr[n.level].nice_length,n.max_chain_length=Gr[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},Hr=(e,t,n,a,r,i)=>{if(!e)return lr;let o=1;if(t===dr&&(t=6),a<0?(o=0,a=-a):a>15&&(o=2,a-=16),r<1||r>9||n!==br||a<8||a>15||t<0||t>9||i<0||i>mr||8===a&&1!==o)return Tr(e,lr);8===a&&(a=9);const s=new Br;return e.state=s,s.strm=e,s.status=wr,s.wrap=o,s.gzhead=null,s.w_bits=a,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=r+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<r+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=i,s.method=n,Ur(e)};var Vr={deflateInit:(e,t)=>Hr(e,t,br,15,8,gr),deflateInit2:Hr,deflateReset:Ur,deflateResetKeep:qr,deflateSetHeader:(e,t)=>$r(e)||2!==e.state.wrap?lr:(e.state.gzhead=t,or),deflate:(e,t)=>{if($r(e)||t>ir||t<0)return e?Tr(e,lr):lr;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===Cr&&t!==rr)return Tr(e,0===e.avail_out?ur:lr);const a=n.last_flush;if(n.last_flush=t,0!==n.pending){if(Dr(e),0===e.avail_out)return n.last_flush=-1,or}else if(0===e.avail_in&&kr(t)<=kr(a)&&t!==rr)return Tr(e,ur);if(n.status===Cr&&0!==e.avail_in)return Tr(e,ur);if(n.status===wr&&0===n.wrap&&(n.status=Er),n.status===wr){let t=br+(n.w_bits-8<<4)<<8,a=-1;if(a=n.strategy>=fr||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=a<<6,0!==n.strstart&&(t|=32),t+=31-t%31,Or(n,t),0!==n.strstart&&(Or(n,e.adler>>>16),Or(n,65535&e.adler)),e.adler=1,n.status=Er,Dr(e),0!==n.pending)return n.last_flush=-1,or}if(57===n.status)if(e.adler=0,Ir(n,31),Ir(n,139),Ir(n,8),n.gzhead)Ir(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Ir(n,255&n.gzhead.time),Ir(n,n.gzhead.time>>8&255),Ir(n,n.gzhead.time>>16&255),Ir(n,n.gzhead.time>>24&255),Ir(n,9===n.level?2:n.strategy>=fr||n.level<2?4:0),Ir(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Ir(n,255&n.gzhead.extra.length),Ir(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Wa(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(Ir(n,0),Ir(n,0),Ir(n,0),Ir(n,0),Ir(n,0),Ir(n,9===n.level?2:n.strategy>=fr||n.level<2?4:0),Ir(n,3),n.status=Er,Dr(e),0!==n.pending)return n.last_flush=-1,or;if(69===n.status){if(n.gzhead.extra){let t=n.pending,a=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+a>n.pending_buf_size;){let r=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=Wa(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=r,Dr(e),0!==n.pending)return n.last_flush=-1,or;t=0,a-=r}let r=new Uint8Array(n.gzhead.extra);n.pending_buf.set(r.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending+=a,n.gzhead.hcrc&&n.pending>t&&(e.adler=Wa(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,a=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>a&&(e.adler=Wa(e.adler,n.pending_buf,n.pending-a,a)),Dr(e),0!==n.pending)return n.last_flush=-1,or;a=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Ir(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>a&&(e.adler=Wa(e.adler,n.pending_buf,n.pending-a,a)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,a=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>a&&(e.adler=Wa(e.adler,n.pending_buf,n.pending-a,a)),Dr(e),0!==n.pending)return n.last_flush=-1,or;a=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Ir(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>a&&(e.adler=Wa(e.adler,n.pending_buf,n.pending-a,a))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Dr(e),0!==n.pending))return n.last_flush=-1,or;Ir(n,255&e.adler),Ir(n,e.adler>>8&255),e.adler=0}if(n.status=Er,Dr(e),0!==n.pending)return n.last_flush=-1,or}if(0!==e.avail_in||0!==n.lookahead||t!==tr&&n.status!==Cr){let a=0===n.level?Nr(n,t):n.strategy===fr?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(Rr(e),0===e.lookahead)){if(t===tr)return 1;break}if(e.match_length=0,n=Xa(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(jr(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===rr?(jr(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(jr(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===hr?((e,t)=>{let n,a,r,i;const o=e.window;for(;;){if(e.lookahead<=_r){if(Rr(e),e.lookahead<=_r&&t===tr)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=e.strstart-1,a=o[r],a===o[++r]&&a===o[++r]&&a===o[++r])){i=e.strstart+_r;do{}while(a===o[++r]&&a===o[++r]&&a===o[++r]&&a===o[++r]&&a===o[++r]&&a===o[++r]&&a===o[++r]&&a===o[++r]&&r<i);e.match_length=_r-(i-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Xa(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Xa(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(jr(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===rr?(jr(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(jr(e,!1),0===e.strm.avail_out)?1:2})(n,t):Gr[n.level].func(n,t);if(3!==a&&4!==a||(n.status=Cr),1===a||3===a)return 0===e.avail_out&&(n.last_flush=-1),or;if(2===a&&(t===nr?er(n):t!==ir&&(Qa(n,0,0,!1),t===ar&&(xr(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),Dr(e),0===e.avail_out))return n.last_flush=-1,or}return t!==rr?or:n.wrap<=0?sr:(2===n.wrap?(Ir(n,255&e.adler),Ir(n,e.adler>>8&255),Ir(n,e.adler>>16&255),Ir(n,e.adler>>24&255),Ir(n,255&e.total_in),Ir(n,e.total_in>>8&255),Ir(n,e.total_in>>16&255),Ir(n,e.total_in>>24&255)):(Or(n,e.adler>>>16),Or(n,65535&e.adler)),Dr(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?or:sr)},deflateEnd:e=>{if($r(e))return lr;const t=e.state.status;return e.state=null,t===Er?Tr(e,cr):or},deflateSetDictionary:(e,t)=>{let n=t.length;if($r(e))return lr;const a=e.state,r=a.wrap;if(2===r||1===r&&a.status!==wr||a.lookahead)return lr;if(1===r&&(e.adler=Ha(e.adler,t,n,0)),a.wrap=0,n>=a.w_size){0===r&&(xr(a.head),a.strstart=0,a.block_start=0,a.insert=0);let e=new Uint8Array(a.w_size);e.set(t.subarray(n-a.w_size,n),0),t=e,n=a.w_size}const i=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Rr(a);a.lookahead>=3;){let e=a.strstart,t=a.lookahead-2;do{a.ins_h=Sr(a,a.ins_h,a.window[e+3-1]),a.prev[e&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=e,e++}while(--t);a.strstart=e,a.lookahead=2,Rr(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=2,a.match_available=0,e.next_in=o,e.input=s,e.avail_in=i,a.wrap=r,or},deflateInfo:"pako deflate (from Nodeca project)"};const Wr=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Zr={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)Wr(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let n=0,a=e.length;n<a;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,a=0,r=e.length;t<r;t++){let r=e[t];n.set(r,a),a+=r.length}return n}};let Jr=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Jr=!1}const Kr=new Uint8Array(256);for(let e=0;e<256;e++)Kr[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Kr[254]=Kr[254]=1;var Qr={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,a,r,i,o=e.length,s=0;for(r=0;r<o;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<o&&(a=e.charCodeAt(r+1),56320==(64512&a)&&(n=65536+(n-55296<<10)+(a-56320),r++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),i=0,r=0;i<s;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<o&&(a=e.charCodeAt(r+1),56320==(64512&a)&&(n=65536+(n-55296<<10)+(a-56320),r++)),n<128?t[i++]=n:n<2048?(t[i++]=192|n>>>6,t[i++]=128|63&n):n<65536?(t[i++]=224|n>>>12,t[i++]=128|n>>>6&63,t[i++]=128|63&n):(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63,t[i++]=128|n>>>6&63,t[i++]=128|63&n);return t},buf2string:(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let a,r;const i=new Array(2*n);for(r=0,a=0;a<n;){let t=e[a++];if(t<128){i[r++]=t;continue}let o=Kr[t];if(o>4)i[r++]=65533,a+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&a<n;)t=t<<6|63&e[a++],o--;o>1?i[r++]=65533:t<65536?i[r++]=t:(t-=65536,i[r++]=55296|t>>10&1023,i[r++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Jr)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n})(i,r)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+Kr[e[n]]>t?n:t}},Yr=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Xr=Object.prototype.toString,{Z_NO_FLUSH:ei,Z_SYNC_FLUSH:ti,Z_FULL_FLUSH:ni,Z_FINISH:ai,Z_OK:ri,Z_STREAM_END:ii,Z_DEFAULT_COMPRESSION:oi,Z_DEFAULT_STRATEGY:si,Z_DEFLATED:li}=Ja;function ci(e){this.options=Zr.assign({level:oi,method:li,chunkSize:16384,windowBits:15,memLevel:8,strategy:si},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Yr,this.strm.avail_out=0;let n=Vr.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==ri)throw new Error(Za[n]);if(t.header&&Vr.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Qr.string2buf(t.dictionary):"[object ArrayBuffer]"===Xr.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=Vr.deflateSetDictionary(this.strm,e),n!==ri)throw new Error(Za[n]);this._dict_set=!0}}function ui(e,t){const n=new ci(t);if(n.push(e,!0),n.err)throw n.msg||Za[n.err];return n.result}ci.prototype.push=function(e,t){const n=this.strm,a=this.options.chunkSize;let r,i;if(this.ended)return!1;for(i=t===~~t?t:!0===t?ai:ei,n.input="string"==typeof e?Qr.string2buf(e):"[object ArrayBuffer]"===Xr.call(e)?new Uint8Array(e):e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(a),n.next_out=0,n.avail_out=a),(i===ti||i===ni)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(r=Vr.deflate(n,i),r===ii)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=Vr.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===ri;if(0!==n.avail_out){if(i>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},ci.prototype.onData=function(e){this.chunks.push(e)},ci.prototype.onEnd=function(e){e===ri&&(this.result=Zr.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var di={Deflate:ci,deflate:ui,deflateRaw:function(e,t){return(t=t||{}).raw=!0,ui(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,ui(e,t)},constants:Ja};const pi=16209;var fi=function(e,t){let n,a,r,i,o,s,l,c,u,d,p,f,h,m,g,y,b,_,v,w,E,C,T,k;const x=e.state;n=e.next_in,T=e.input,a=n+(e.avail_in-5),r=e.next_out,k=e.output,i=r-(t-e.avail_out),o=r+(e.avail_out-257),s=x.dmax,l=x.wsize,c=x.whave,u=x.wnext,d=x.window,p=x.hold,f=x.bits,h=x.lencode,m=x.distcode,g=(1<<x.lenbits)-1,y=(1<<x.distbits)-1;e:do{f<15&&(p+=T[n++]<<f,f+=8,p+=T[n++]<<f,f+=8),b=h[p&g];t:for(;;){if(_=b>>>24,p>>>=_,f-=_,_=b>>>16&255,0===_)k[r++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=h[(65535&b)+(p&(1<<_)-1)];continue t}if(32&_){x.mode=16191;break e}e.msg="invalid literal/length code",x.mode=pi;break e}v=65535&b,_&=15,_&&(f<_&&(p+=T[n++]<<f,f+=8),v+=p&(1<<_)-1,p>>>=_,f-=_),f<15&&(p+=T[n++]<<f,f+=8,p+=T[n++]<<f,f+=8),b=m[p&y];n:for(;;){if(_=b>>>24,p>>>=_,f-=_,_=b>>>16&255,!(16&_)){if(0==(64&_)){b=m[(65535&b)+(p&(1<<_)-1)];continue n}e.msg="invalid distance code",x.mode=pi;break e}if(w=65535&b,_&=15,f<_&&(p+=T[n++]<<f,f+=8,f<_&&(p+=T[n++]<<f,f+=8)),w+=p&(1<<_)-1,w>s){e.msg="invalid distance too far back",x.mode=pi;break e}if(p>>>=_,f-=_,_=r-i,w>_){if(_=w-_,_>c&&x.sane){e.msg="invalid distance too far back",x.mode=pi;break e}if(E=0,C=d,0===u){if(E+=l-_,_<v){v-=_;do{k[r++]=d[E++]}while(--_);E=r-w,C=k}}else if(u<_){if(E+=l+u-_,_-=u,_<v){v-=_;do{k[r++]=d[E++]}while(--_);if(E=0,u<v){_=u,v-=_;do{k[r++]=d[E++]}while(--_);E=r-w,C=k}}}else if(E+=u-_,_<v){v-=_;do{k[r++]=d[E++]}while(--_);E=r-w,C=k}for(;v>2;)k[r++]=C[E++],k[r++]=C[E++],k[r++]=C[E++],v-=3;v&&(k[r++]=C[E++],v>1&&(k[r++]=C[E++]))}else{E=r-w;do{k[r++]=k[E++],k[r++]=k[E++],k[r++]=k[E++],v-=3}while(v>2);v&&(k[r++]=k[E++],v>1&&(k[r++]=k[E++]))}break}}break}}while(n<a&&r<o);v=f>>3,n-=v,f-=v<<3,p&=(1<<f)-1,e.next_in=n,e.next_out=r,e.avail_in=n<a?a-n+5:5-(n-a),e.avail_out=r<o?o-r+257:257-(r-o),x.hold=p,x.bits=f};const hi=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),mi=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),gi=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),yi=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var bi=(e,t,n,a,r,i,o,s)=>{const l=s.bits;let c,u,d,p,f,h,m=0,g=0,y=0,b=0,_=0,v=0,w=0,E=0,C=0,T=0,k=null;const x=new Uint16Array(16),A=new Uint16Array(16);let S,D,j,I=null;for(m=0;m<=15;m++)x[m]=0;for(g=0;g<a;g++)x[t[n+g]]++;for(_=l,b=15;b>=1&&0===x[b];b--);if(_>b&&(_=b),0===b)return r[i++]=20971520,r[i++]=20971520,s.bits=1,0;for(y=1;y<b&&0===x[y];y++);for(_<y&&(_=y),E=1,m=1;m<=15;m++)if(E<<=1,E-=x[m],E<0)return-1;if(E>0&&(0===e||1!==b))return-1;for(A[1]=0,m=1;m<15;m++)A[m+1]=A[m]+x[m];for(g=0;g<a;g++)0!==t[n+g]&&(o[A[t[n+g]]++]=g);if(0===e?(k=I=o,h=20):1===e?(k=hi,I=mi,h=257):(k=gi,I=yi,h=0),T=0,g=0,m=y,f=i,v=_,w=0,d=-1,C=1<<_,p=C-1,1===e&&C>852||2===e&&C>592)return 1;for(;;){S=m-w,o[g]+1<h?(D=0,j=o[g]):o[g]>=h?(D=I[o[g]-h],j=k[o[g]-h]):(D=96,j=0),c=1<<m-w,u=1<<v,y=u;do{u-=c,r[f+(T>>w)+u]=S<<24|D<<16|j|0}while(0!==u);for(c=1<<m-1;T&c;)c>>=1;if(0!==c?(T&=c-1,T+=c):T=0,g++,0==--x[m]){if(m===b)break;m=t[n+o[g]]}if(m>_&&(T&p)!==d){for(0===w&&(w=_),f+=y,v=m-w,E=1<<v;v+w<b&&(E-=x[v+w],!(E<=0));)v++,E<<=1;if(C+=1<<v,1===e&&C>852||2===e&&C>592)return 1;d=T&p,r[d]=_<<24|v<<16|f-i|0}}return 0!==T&&(r[f+T]=m-w<<24|64<<16|0),s.bits=_,0};const{Z_FINISH:_i,Z_BLOCK:vi,Z_TREES:wi,Z_OK:Ei,Z_STREAM_END:Ci,Z_NEED_DICT:Ti,Z_STREAM_ERROR:ki,Z_DATA_ERROR:xi,Z_MEM_ERROR:Ai,Z_BUF_ERROR:Si,Z_DEFLATED:Di}=Ja,ji=16180,Ii=16190,Oi=16191,Fi=16192,Li=16194,Ri=16199,Ni=16200,zi=16206,Pi=16209,Mi=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Gi(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Bi=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<ji||t.mode>16211?1:0},$i=e=>{if(Bi(e))return ki;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=ji,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Ei},qi=e=>{if(Bi(e))return ki;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,$i(e)},Ui=(e,t)=>{let n;if(Bi(e))return ki;const a=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?ki:(null!==a.window&&a.wbits!==t&&(a.window=null),a.wrap=n,a.wbits=t,qi(e))},Hi=(e,t)=>{if(!e)return ki;const n=new Gi;e.state=n,n.strm=e,n.window=null,n.mode=ji;const a=Ui(e,t);return a!==Ei&&(e.state=null),a};let Vi,Wi,Zi=!0;const Ji=e=>{if(Zi){Vi=new Int32Array(512),Wi=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(bi(1,e.lens,0,288,Vi,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;bi(2,e.lens,0,32,Wi,0,e.work,{bits:5}),Zi=!1}e.lencode=Vi,e.lenbits=9,e.distcode=Wi,e.distbits=5},Ki=(e,t,n,a)=>{let r;const i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),a>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):(r=i.wsize-i.wnext,r>a&&(r=a),i.window.set(t.subarray(n-a,n-a+r),i.wnext),(a-=r)?(i.window.set(t.subarray(n-a,n),0),i.wnext=a,i.whave=i.wsize):(i.wnext+=r,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=r))),0};var Qi={inflateReset:qi,inflateReset2:Ui,inflateResetKeep:$i,inflateInit:e=>Hi(e,15),inflateInit2:Hi,inflate:(e,t)=>{let n,a,r,i,o,s,l,c,u,d,p,f,h,m,g,y,b,_,v,w,E,C,T=0;const k=new Uint8Array(4);let x,A;const S=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Bi(e)||!e.output||!e.input&&0!==e.avail_in)return ki;n=e.state,n.mode===Oi&&(n.mode=Fi),o=e.next_out,r=e.output,l=e.avail_out,i=e.next_in,a=e.input,s=e.avail_in,c=n.hold,u=n.bits,d=s,p=l,C=Ei;e:for(;;)switch(n.mode){case ji:if(0===n.wrap){n.mode=Fi;break}for(;u<16;){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,k[0]=255&c,k[1]=c>>>8&255,n.check=Wa(n.check,k,2,0),c=0,u=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=Pi;break}if((15&c)!==Di){e.msg="unknown compression method",n.mode=Pi;break}if(c>>>=4,u-=4,E=8+(15&c),0===n.wbits&&(n.wbits=E),E>15||E>n.wbits){e.msg="invalid window size",n.mode=Pi;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&c?16189:Oi,c=0,u=0;break;case 16181:for(;u<16;){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}if(n.flags=c,(255&n.flags)!==Di){e.msg="unknown compression method",n.mode=Pi;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Pi;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(k[0]=255&c,k[1]=c>>>8&255,n.check=Wa(n.check,k,2,0)),c=0,u=0,n.mode=16182;case 16182:for(;u<32;){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(k[0]=255&c,k[1]=c>>>8&255,k[2]=c>>>16&255,k[3]=c>>>24&255,n.check=Wa(n.check,k,4,0)),c=0,u=0,n.mode=16183;case 16183:for(;u<16;){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(k[0]=255&c,k[1]=c>>>8&255,n.check=Wa(n.check,k,2,0)),c=0,u=0,n.mode=16184;case 16184:if(1024&n.flags){for(;u<16;){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(k[0]=255&c,k[1]=c>>>8&255,n.check=Wa(n.check,k,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(f=n.length,f>s&&(f=s),f&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(a.subarray(i,i+f),E)),512&n.flags&&4&n.wrap&&(n.check=Wa(n.check,a,f,i)),s-=f,i+=f,n.length-=f),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===s)break e;f=0;do{E=a[i+f++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E))}while(E&&f<s);if(512&n.flags&&4&n.wrap&&(n.check=Wa(n.check,a,f,i)),s-=f,i+=f,E)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===s)break e;f=0;do{E=a[i+f++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E))}while(E&&f<s);if(512&n.flags&&4&n.wrap&&(n.check=Wa(n.check,a,f,i)),s-=f,i+=f,E)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;u<16;){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}if(4&n.wrap&&c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Pi;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Oi;break;case 16189:for(;u<32;){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}e.adler=n.check=Mi(c),c=0,u=0,n.mode=Ii;case Ii:if(0===n.havedict)return e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=s,n.hold=c,n.bits=u,Ti;e.adler=n.check=1,n.mode=Oi;case Oi:if(t===vi||t===wi)break e;case Fi:if(n.last){c>>>=7&u,u-=7&u,n.mode=zi;break}for(;u<3;){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}switch(n.last=1&c,c>>>=1,u-=1,3&c){case 0:n.mode=16193;break;case 1:if(Ji(n),n.mode=Ri,t===wi){c>>>=2,u-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=Pi}c>>>=2,u-=2;break;case 16193:for(c>>>=7&u,u-=7&u;u<32;){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Pi;break}if(n.length=65535&c,c=0,u=0,n.mode=Li,t===wi)break e;case Li:n.mode=16195;case 16195:if(f=n.length,f){if(f>s&&(f=s),f>l&&(f=l),0===f)break e;r.set(a.subarray(i,i+f),o),s-=f,i+=f,l-=f,o+=f,n.length-=f;break}n.mode=Oi;break;case 16196:for(;u<14;){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}if(n.nlen=257+(31&c),c>>>=5,u-=5,n.ndist=1+(31&c),c>>>=5,u-=5,n.ncode=4+(15&c),c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Pi;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;u<3;){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}n.lens[S[n.have++]]=7&c,c>>>=3,u-=3}for(;n.have<19;)n.lens[S[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,x={bits:n.lenbits},C=bi(0,n.lens,0,19,n.lencode,0,n.work,x),n.lenbits=x.bits,C){e.msg="invalid code lengths set",n.mode=Pi;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;T=n.lencode[c&(1<<n.lenbits)-1],g=T>>>24,y=T>>>16&255,b=65535&T,!(g<=u);){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}if(b<16)c>>>=g,u-=g,n.lens[n.have++]=b;else{if(16===b){for(A=g+2;u<A;){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}if(c>>>=g,u-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=Pi;break}E=n.lens[n.have-1],f=3+(3&c),c>>>=2,u-=2}else if(17===b){for(A=g+3;u<A;){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}c>>>=g,u-=g,E=0,f=3+(7&c),c>>>=3,u-=3}else{for(A=g+7;u<A;){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}c>>>=g,u-=g,E=0,f=11+(127&c),c>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Pi;break}for(;f--;)n.lens[n.have++]=E}}if(n.mode===Pi)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Pi;break}if(n.lenbits=9,x={bits:n.lenbits},C=bi(1,n.lens,0,n.nlen,n.lencode,0,n.work,x),n.lenbits=x.bits,C){e.msg="invalid literal/lengths set",n.mode=Pi;break}if(n.distbits=6,n.distcode=n.distdyn,x={bits:n.distbits},C=bi(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,x),n.distbits=x.bits,C){e.msg="invalid distances set",n.mode=Pi;break}if(n.mode=Ri,t===wi)break e;case Ri:n.mode=Ni;case Ni:if(s>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=s,n.hold=c,n.bits=u,fi(e,p),o=e.next_out,r=e.output,l=e.avail_out,i=e.next_in,a=e.input,s=e.avail_in,c=n.hold,u=n.bits,n.mode===Oi&&(n.back=-1);break}for(n.back=0;T=n.lencode[c&(1<<n.lenbits)-1],g=T>>>24,y=T>>>16&255,b=65535&T,!(g<=u);){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}if(y&&0==(240&y)){for(_=g,v=y,w=b;T=n.lencode[w+((c&(1<<_+v)-1)>>_)],g=T>>>24,y=T>>>16&255,b=65535&T,!(_+g<=u);){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}c>>>=_,u-=_,n.back+=_}if(c>>>=g,u-=g,n.back+=g,n.length=b,0===y){n.mode=16205;break}if(32&y){n.back=-1,n.mode=Oi;break}if(64&y){e.msg="invalid literal/length code",n.mode=Pi;break}n.extra=15&y,n.mode=16201;case 16201:if(n.extra){for(A=n.extra;u<A;){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;T=n.distcode[c&(1<<n.distbits)-1],g=T>>>24,y=T>>>16&255,b=65535&T,!(g<=u);){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}if(0==(240&y)){for(_=g,v=y,w=b;T=n.distcode[w+((c&(1<<_+v)-1)>>_)],g=T>>>24,y=T>>>16&255,b=65535&T,!(_+g<=u);){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}c>>>=_,u-=_,n.back+=_}if(c>>>=g,u-=g,n.back+=g,64&y){e.msg="invalid distance code",n.mode=Pi;break}n.offset=b,n.extra=15&y,n.mode=16203;case 16203:if(n.extra){for(A=n.extra;u<A;){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Pi;break}n.mode=16204;case 16204:if(0===l)break e;if(f=p-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Pi;break}f>n.wnext?(f-=n.wnext,h=n.wsize-f):h=n.wnext-f,f>n.length&&(f=n.length),m=n.window}else m=r,h=o-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do{r[o++]=m[h++]}while(--f);0===n.length&&(n.mode=Ni);break;case 16205:if(0===l)break e;r[o++]=n.length,l--,n.mode=Ni;break;case zi:if(n.wrap){for(;u<32;){if(0===s)break e;s--,c|=a[i++]<<u,u+=8}if(p-=l,e.total_out+=p,n.total+=p,4&n.wrap&&p&&(e.adler=n.check=n.flags?Wa(n.check,r,p,o-p):Ha(n.check,r,p,o-p)),p=l,4&n.wrap&&(n.flags?c:Mi(c))!==n.check){e.msg="incorrect data check",n.mode=Pi;break}c=0,u=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;u<32;){if(0===s)break e;s--,c+=a[i++]<<u,u+=8}if(4&n.wrap&&c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Pi;break}c=0,u=0}n.mode=16208;case 16208:C=Ci;break e;case Pi:C=xi;break e;case 16210:return Ai;default:return ki}return e.next_out=o,e.avail_out=l,e.next_in=i,e.avail_in=s,n.hold=c,n.bits=u,(n.wsize||p!==e.avail_out&&n.mode<Pi&&(n.mode<zi||t!==_i))&&Ki(e,e.output,e.next_out,p-e.avail_out),d-=e.avail_in,p-=e.avail_out,e.total_in+=d,e.total_out+=p,n.total+=p,4&n.wrap&&p&&(e.adler=n.check=n.flags?Wa(n.check,r,p,e.next_out-p):Ha(n.check,r,p,e.next_out-p)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Oi?128:0)+(n.mode===Ri||n.mode===Li?256:0),(0===d&&0===p||t===_i)&&C===Ei&&(C=Si),C},inflateEnd:e=>{if(Bi(e))return ki;let t=e.state;return t.window&&(t.window=null),e.state=null,Ei},inflateGetHeader:(e,t)=>{if(Bi(e))return ki;const n=e.state;return 0==(2&n.wrap)?ki:(n.head=t,t.done=!1,Ei)},inflateSetDictionary:(e,t)=>{const n=t.length;let a,r,i;return Bi(e)?ki:(a=e.state,0!==a.wrap&&a.mode!==Ii?ki:a.mode===Ii&&(r=1,r=Ha(r,t,n,0),r!==a.check)?xi:(i=Ki(e,t,n,n),i?(a.mode=16210,Ai):(a.havedict=1,Ei)))},inflateInfo:"pako inflate (from Nodeca project)"},Yi=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Xi=Object.prototype.toString,{Z_NO_FLUSH:eo,Z_FINISH:to,Z_OK:no,Z_STREAM_END:ao,Z_NEED_DICT:ro,Z_STREAM_ERROR:io,Z_DATA_ERROR:oo,Z_MEM_ERROR:so}=Ja;function lo(e){this.options=Zr.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Yr,this.strm.avail_out=0;let n=Qi.inflateInit2(this.strm,t.windowBits);if(n!==no)throw new Error(Za[n]);if(this.header=new Yi,Qi.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Qr.string2buf(t.dictionary):"[object ArrayBuffer]"===Xi.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Qi.inflateSetDictionary(this.strm,t.dictionary),n!==no)))throw new Error(Za[n])}function co(e,t){const n=new lo(t);if(n.push(e),n.err)throw n.msg||Za[n.err];return n.result}lo.prototype.push=function(e,t){const n=this.strm,a=this.options.chunkSize,r=this.options.dictionary;let i,o,s;if(this.ended)return!1;for(o=t===~~t?t:!0===t?to:eo,n.input="[object ArrayBuffer]"===Xi.call(e)?new Uint8Array(e):e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(a),n.next_out=0,n.avail_out=a),i=Qi.inflate(n,o),i===ro&&r&&(i=Qi.inflateSetDictionary(n,r),i===no?i=Qi.inflate(n,o):i===oo&&(i=ro));n.avail_in>0&&i===ao&&n.state.wrap>0&&0!==e[n.next_in];)Qi.inflateReset(n),i=Qi.inflate(n,o);switch(i){case io:case oo:case ro:case so:return this.onEnd(i),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(0===n.avail_out||i===ao))if("string"===this.options.to){let e=Qr.utf8border(n.output,n.next_out),t=n.next_out-e,r=Qr.buf2string(n.output,e);n.next_out=t,n.avail_out=a-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(r)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(i!==no||0!==s){if(i===ao)return i=Qi.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},lo.prototype.onData=function(e){this.chunks.push(e)},lo.prototype.onEnd=function(e){e===no&&(this.result="string"===this.options.to?this.chunks.join(""):Zr.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var uo={Inflate:lo,inflate:co,inflateRaw:function(e,t){return(t=t||{}).raw=!0,co(e,t)},ungzip:co,constants:Ja};const{Deflate:po,deflate:fo,deflateRaw:ho,gzip:mo}=di,{Inflate:go,inflate:yo,inflateRaw:bo,ungzip:_o}=uo;var vo={Deflate:po,deflate:fo,deflateRaw:ho,gzip:mo,Inflate:go,inflate:yo,inflateRaw:bo,ungzip:_o,constants:Ja};class wo extends _.BaseFeatureDataAdapter{static capabilities=["getFeatures","getRefNames"];setupP;readMaf(e){const t=e.split("\n"),n=[],a=[],r=[];let i=[],o=0;return t.forEach((e=>{e.startsWith("#")?n.push(e):e&&(0===i.length?(i=e.split("\t"),o=i.findIndex((e=>"chromosome"===e.toLowerCase()))):(r.push(e),a.push(e.split("\t")[o])))})),{header:n.join("\n"),lines:r,columns:i,refNames:Array.from(new Set(a))}}parseLine(e,t){const n={};return e.split("\t").forEach(((e,a)=>{e&&(n[t[a].toLowerCase()]=e)})),n}async decodeFileContents(){const e=t.readConfObject(this.config,"mafLocation"),n=await w.openLocation(e,this.pluginManager).readFile();let a;return a="number"==typeof n[0]&&31===n[0]&&"number"==typeof n[1]&&139===n[1]&&"number"==typeof n[2]&&8===n[2]?(new TextDecoder).decode(vo.inflate(n)):n.toString(),this.readMaf(a)}async getLines(){const{columns:e,lines:t}=await this.decodeFileContents();return t.map(((t,n)=>new da({mutation:this.parseLine(t,e),id:`${this.id}-maf-${n}`})))}async setup(){return this.setupP||(this.setupP=this.getLines()),this.setupP}async getRefNames(e={}){const{refNames:t}=await this.decodeFileContents();return t}getFeatures(e,t={}){return v.ObservableCreate((async t=>{(await this.setup()).forEach((n=>{n.get("refName")===e.refName&&n.get("end")>e.start&&n.get("start")<e.end&&t.next(n)})),t.complete()}),t.signal)}freeResources(){}}var Eo=t.ConfigurationSchema("MbvAdapter",{mbvLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/myfile.txt",locationType:"UriLocation"}}},{explicitlyTyped:!0});class Co{value;data;_id;constructor(e){this.value=e.value,this.data=this.dataFromValue(this.value),this._id=e.id}get(e){return this.data[e]||this.value[e]}set(){}parent(){}children(){}tags(){return[...Object.keys(this.data),...Object.keys(this.value)]}id(){return this._id}dataFromValue(e){return{refName:e.chromosome,start:+e.start-1,end:+e.end,name:`${e["composite element ref"]}`,note:e.beta_value}}toJSON(){return{uniqueId:this._id,...this.value,...this.data}}}class To extends _.BaseFeatureDataAdapter{static capabilities=["getFeatures","getRefNames"];setupP;readMbv(e){const t=e.split("\n"),n=[],a=[];let r=[],i=0;return t.forEach((e=>{0===r.length?(r=e.split("\t"),i=r.findIndex((e=>"chromosome"===e.toLowerCase()))):"*"!==e.split("\t")[i]&&void 0!==e.split("\t")[i]&&(a.push(e),n.push(e.split("\t")[i]))})),{lines:a,columns:r,refNames:Array.from(new Set(n))}}parseLine(e,t){const n={};return e.split("\t").forEach(((e,a)=>{e&&(n[t[a].toLowerCase()]=e)})),n}async decodeFileContents(){const e=t.readConfObject(this.config,"mbvLocation"),n=await w.openLocation(e,this.pluginManager).readFile();let a;return a="number"==typeof n[0]&&31===n[0]&&"number"==typeof n[1]&&139===n[1]&&"number"==typeof n[2]&&8===n[2]?(new TextDecoder).decode(vo.inflate(n)):n.toString(),this.readMbv(a)}async getLines(){const{columns:e,lines:t}=await this.decodeFileContents();return t.map(((t,n)=>new Co({value:this.parseLine(t,e),id:`${this.id}-mbv-${n}`})))}async setup(){return this.setupP||(this.setupP=this.getLines()),this.setupP}async getRefNames(e={}){const{refNames:t}=await this.decodeFileContents();return t}getFeatures(e,t={}){return v.ObservableCreate((async t=>{(await this.setup()).forEach((n=>{n.get("refName")===e.refName&&n.get("end")>e.start&&n.get("start")<e.end&&t.next(n)})),t.complete()}),t.signal)}freeResources(){}}var ko=t.ConfigurationSchema("IeqAdapter",{ieqLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/myfile.tsv",locationType:"UriLocation"}}},{explicitlyTyped:!0});class xo{iso;data;_id;constructor(e){this.iso=e.iso,this.data=this.dataFromIso(this.iso),this._id=e.id}get(e){return this.data[e]||this.iso[e]}set(){}parent(){}children(){}tags(){return[...Object.keys(this.data),...Object.keys(this.iso)]}id(){return this._id}dataFromIso(e){return{refName:e.chromosome,start:+e.start-1,end:+e.end,name:`${e.mirna_id}, ${e.read_count} reads`,strand:1}}toJSON(){return{uniqueId:this._id,...this.iso,...this.data}}}class Ao extends _.BaseFeatureDataAdapter{static capabilities=["getFeatures","getRefNames"];setupP;async readIeq(){const e=t.readConfObject(this.config,"ieqLocation"),n=(await w.openLocation(e,this.pluginManager).readFile("utf8")).split("\n"),a=[];let r=[];return n.forEach((e=>{e&&(0===r.length?r=e.split("\t"):a.push(e))})),{lines:a,columns:r}}parseCoords(e){const t=e.split(":");return{chromosome:t[1],start:t[2].split("-")[0],end:t[2].split("-")[1],strand:"+"===t[3]?1:0}}parseLine(e,t){let n={};return e.split("\t").forEach(((e,a)=>{if(e)if("isoform_coords"===t[a]){const t=this.parseCoords(e);n={...n,...t}}else n[t[a].toLowerCase()]=e})),n}async getLines(){const{columns:e,lines:t}=await this.readIeq();return t.map(((t,n)=>new xo({iso:this.parseLine(t,e),id:`${this.id}-ieq-${n}`})))}async setup(){return this.setupP||(this.setupP=this.getLines()),this.setupP}async getRefNames(e={}){return["chr1","chr2","chr3","chr4","chr5","chr6","chr7","chr8","chr9","chr10","chr11","chr12","chr13","chr14","chr15","chr16","chr17","chr18","chr19","chr20","chr21","chr22","chrX","chrY"]}getFeatures(e,t={}){return v.ObservableCreate((async t=>{(await this.setup()).forEach((n=>{n.get("refName")===e.refName&&n.get("end")>e.start&&n.get("start")<e.end&&t.next(n)})),t.complete()}),t.signal)}freeResources(){}}var So=t.ConfigurationSchema("SjqAdapter",{sjqLocation:{type:"fileLocation",defaultValue:{uri:"/path/to/myfile.tsv",locationType:"UriLocation"}}},{explicitlyTyped:!0});class Do{sjq;data;_id;constructor(e){this.sjq=e.sjq,this.data=this.dataFromSjq(this.sjq),this._id=e.id}get(e){return this.data[e]||this.sjq[e]}set(){}parent(){}children(){}tags(){return[...Object.keys(this.data),...Object.keys(this.sjq)]}id(){return this._id}dataFromSjq(e){return{refName:e.chromosome,start:+e.intron_start-1,end:+e.intron_end,score:+e.n_unique_map+ +e.n_multi_map,name:`unique: ${e.n_unique_map}, multi: ${e.n_multi_map}`}}toJSON(){return{uniqueId:this._id,...this.sjq,...this.data}}}class jo extends _.BaseFeatureDataAdapter{static capabilities=["getFeatures","getRefNames"];setupP;readSjq(e){const t=e.split("\n"),n=[];let a=[];return t.forEach((e=>{e&&(0===a.length?a=e.split("\t"):n.push(e))})),{lines:n,columns:a}}async decodeFileContents(){const e=t.readConfObject(this.config,"sjqLocation"),n=await w.openLocation(e,this.pluginManager).readFile();let a;return a="number"==typeof n[0]&&31===n[0]&&"number"==typeof n[1]&&139===n[1]&&"number"==typeof n[2]&&8===n[2]?(new TextDecoder).decode(vo.inflate(n)):n.toString(),this.readSjq(a)}parseLine(e,t){const n={};return e.split("\t").forEach(((e,a)=>{t[a]=t[a].toLowerCase().replace(/[^\w\s]/gi,""),e&&(n[t[a].toLowerCase()]=e)})),n}async getLines(){const{columns:e,lines:t}=await this.decodeFileContents();return t.map(((t,n)=>new Do({sjq:this.parseLine(t,e),id:`${this.id}-sjq-${n}`})))}async setup(){return this.setupP||(this.setupP=this.getLines()),this.setupP}async getRefNames(e={}){return["chr1","chr2","chr3","chr4","chr5","chr6","chr7","chr8","chr9","chr10","chr11","chr12","chr13","chr14","chr15","chr16","chr17","chr18","chr19","chr20","chr21","chr22","chrX","chrY"]}getFeatures(e,t={}){return v.ObservableCreate((async t=>{(await this.setup()).forEach((n=>{n.get("refName")===e.refName&&n.get("end")>e.start&&n.get("start")<e.end&&t.next(n)})),t.complete()}),t.signal)}freeResources(){}}const Io=t.ConfigurationSchema("GDCInternetAccount",{authHeader:{description:"custom auth header for authorization",type:"string",defaultValue:"X-Auth-Token"},customEndpoint:{description:"custom endpoint for the external token resource",type:"string",defaultValue:""}},{baseConfiguration:i.BaseInternetAccountConfig,explicitlyTyped:!0}),Oo=m.makeStyles()((e=>({root:{margin:e.spacing(1)},paper:{display:"flex",flexDirection:"column",padding:e.spacing(2)},imgContainer:{display:"flex",justifyContent:"center"},img:{width:100,maxWidth:"100%",maxHeight:"100%",verticalAlign:"middle"},helperTextContainer:{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)},submitTokenContainer:{display:"flex",flexDirection:"column"},buttonContainer:{display:"flex",justifyContent:"flex-end"},alertContainer:{paddingBottom:e.spacing(2)}})));function Fo({handleClose:e}){const[t,n]=c.useState(""),{classes:a}=Oo();return c.createElement(b.Dialog,{open:!0,onClose:()=>e(),maxWidth:"sm",title:"Login to access controlled GDC data"},c.createElement(h.DialogContent,null,c.createElement("div",{className:a.root},c.createElement("div",{className:a.paper},c.createElement(h.Typography,{variant:"h4",align:"center"},"GDC Data Portal"),c.createElement("div",{className:a.helperTextContainer},c.createElement(h.Typography,{variant:"h6",component:"h1",align:"center"},"Login to access controlled data"),c.createElement(h.Typography,{variant:"body1",align:"center"},"An authentication token is required to access controlled data."),c.createElement(h.Typography,{variant:"body2",align:"center"},"You will need to provide your authentication token every time you start a new session, as the token is deleted when the session expires.")),c.createElement("div",{className:a.submitTokenContainer},c.createElement(h.TextField,{color:"primary",variant:"outlined",label:"Enter token",onChange:e=>{n(e.target.value)}}),c.createElement("div",{className:a.buttonContainer},c.createElement(h.Button,{color:"primary",variant:"contained",size:"large",onClick:()=>{e(t)}},"Login")))))))}const Lo=e=>r.types.compose("GDCInternetAccount",i.InternetAccount,r.types.model({id:"GDCToken",type:r.types.literal("GDCInternetAccount"),configuration:t.ConfigurationReference(e)})).volatile((()=>({needsToken:!1}))).views((e=>({get authHeader(){return t.getConf(e,"authHeader")},get customEndpoint(){return t.getConf(e,"customEndpoint")},get internetAccountType(){return"GDCInternetAccount"}}))).actions((e=>({setNeedsToken(t){e.needsToken=t}}))).actions((e=>({getTokenFromUser(t,n){o.getSession(e).queueDialog((e=>[Fo,{handleClose:a=>{a?t(a):n(new Error("failed to add track: this is a controlled resource that requires an authenticated token to access. Please verify your credentials and try again.")),e()}}]))},getFetcher:t=>async(n,a)=>{const r=await e.getToken(t);let i=a;"none"!==r&&(i=e.addAuthHeaderToInit(a,r));let o=String(n);return o.includes("files/")&&(o=`${e.customEndpoint}/data/${o.split("/")[4]}`),fetch(o,i)}}))).actions((e=>{const t=e.getToken,n=new Map;return{async getToken(a){if(a&&n.has(a.uri))return n.get(a.uri)?t(a):"none";const r=a?.uri.split("/").pop(),i=await fetch(`${e.customEndpoint}/data/${r}`);if(403===i.status)return n.set(a?.uri,!0),t(a);if(!i.ok)throw new Error(`HTTP ${i.status} (${await i.text()})`);return n.set(a?.uri,!1),"none"}}}));e.default=class extends n{name="GDCPlugin";version="2.3.1";install(e){const n=e.getPlugin("LinearGenomeViewPlugin"),{BaseLinearDisplayComponent:o}=n.exports,l="GDC Plugin Adapters";e.addAdapterType((()=>new E({name:"GDCAdapter",configSchema:En,adapterMetadata:{hiddenFromGUI:!0},AdapterClass:aa}))),e.addAdapterType((()=>new E({name:"SjqAdapter",configSchema:So,displayName:"Splice Junction Quantification Adapter",adapterMetadata:{category:l,hiddenFromGUI:!1,description:""},AdapterClass:jo}))),e.addToExtensionPoint("Core-guessAdapterForLocation",(e=>(t,n,a)=>{const r="SjqAdapter";return a===r?{type:r,sjqLocation:t}:e(t,n,a)})),e.addAdapterType((()=>new E({name:"MbvAdapter",configSchema:Eo,displayName:"Methylation Beta Value Adapter",adapterMetadata:{category:l,hiddenFromGUI:!1,description:""},AdapterClass:To}))),e.addToExtensionPoint("Core-guessAdapterForLocation",(e=>(t,n,a)=>{const r="MbvAdapter";return a===r?{type:r,ieqLocation:t}:e(t,n,a)})),e.addAdapterType((()=>new E({name:"MafAdapter",configSchema:ua,adapterMetadata:{category:l,hiddenFromGUI:!1,description:""},AdapterClass:wo}))),e.addToExtensionPoint("Core-guessAdapterForLocation",(e=>(t,n,a)=>{const r="MafAdapter",i=s.getFileName(t);return/\.maf$/i.test(i)||a===r?{type:r,mafLocation:t}:e(t,n,a)})),e.addToExtensionPoint("Core-guessTrackTypeForLocation",(e=>t=>"MafAdapter"===t?"MAFTrack":e(t))),e.addAdapterType((()=>new E({name:"IeqAdapter",configSchema:ko,displayName:"Isoform Expression Quantification Adapter",adapterMetadata:{category:l,hiddenFromGUI:!1,description:""},AdapterClass:Ao}))),e.addToExtensionPoint("Core-guessAdapterForLocation",(e=>(t,n,a)=>{const r="IeqAdapter";return a===r?{type:r,ieqLocation:t}:e(t,n,a)})),e.addToExtensionPoint("Core-guessTrackTypeForLocation",(e=>t=>"IeqAdapter"===t?"IEQTrack":e(t))),e.addAdapterType((()=>new E({name:"SegmentCNVAdapter",configSchema:ra,displayName:"Segment Copy Number Variation Adapter",adapterMetadata:{category:l,hiddenFromGUI:!1,description:""},AdapterClass:ca}))),e.addToExtensionPoint("Core-guessAdapterForLocation",(e=>(t,n,a)=>{const r="SegmentCNVAdapter",i=s.getFileName(t);return/\.seg$/i.test(i)||a===r?{type:r,segLocation:t}:e(t,n,a)})),e.addToExtensionPoint("Core-guessTrackTypeForLocation",(e=>t=>"SegmentCNVAdapter"===t?"QuantitativeTrack":e(t))),e.addTrackType((()=>{const n=t.ConfigurationSchema("GDCTrack",{},{baseConfiguration:i.createBaseTrackConfig(e),explicitIdentifier:"trackId"});return new C({name:"GDCTrack",configSchema:n,stateModel:i.createBaseTrackModel(e,"GDCTrack",n)})})),e.addDisplayType((()=>{const{configSchema:n,stateModel:r}=(e=>{const n=(e=>{const{baseLinearDisplayConfigSchema:n}=e.getPlugin("LinearGenomeViewPlugin").exports;return t.ConfigurationSchema("LinearGDCDisplay",{renderer:e.pluggableConfigSchemaType("renderer")},{baseConfiguration:n,explicitlyTyped:!0})})(e);return{configSchema:n,stateModel:hn(e,n)}})(e);return new a({name:"LinearGDCDisplay",configSchema:n,stateModel:r,trackType:"GDCTrack",viewType:"LinearGenomeView",ReactComponent:o})})),e.addTrackType((()=>{const n=t.ConfigurationSchema("IEQTrack",{},{baseConfiguration:i.createBaseTrackConfig(e),explicitIdentifier:"trackId"});return new C({name:"IEQTrack",configSchema:n,stateModel:i.createBaseTrackModel(e,"IEQTrack",n)})})),e.addDisplayType((()=>{const{configSchema:t,stateModel:n}=function(e){return{configSchema:e.jbrequire(mn),stateModel:e.jbrequire(bn)}}(e);return new a({name:"LinearIEQDisplay",configSchema:t,stateModel:n,trackType:"IEQTrack",viewType:"LinearGenomeView",ReactComponent:o})})),e.addTrackType((()=>{const n=t.ConfigurationSchema("MAFTrack",{},{baseConfiguration:i.createBaseTrackConfig(e),explicitIdentifier:"trackId"});return new C({name:"MAFTrack",configSchema:n,stateModel:i.createBaseTrackModel(e,"MAFTrack",n)})})),e.addDisplayType((()=>{const{configSchema:t,stateModel:n}=e.load(wn);return new a({name:"LinearMAFDisplay",configSchema:t,stateModel:n,trackType:"MAFTrack",viewType:"LinearGenomeView",ReactComponent:o})})),e.addWidgetType((()=>{return new T({name:"GDCFilterWidget",...(n=e,{configSchema:t.ConfigurationSchema("GDCFilterWidget",{}),ReactComponent:be,stateModel:n.load(z),HeadingComponent:()=>c.createElement(c.Fragment,null,"GDC Filters")})});var n})),e.addWidgetType((()=>new T({name:"GDCFeatureWidget",heading:"Feature Details",configSchema:_e,stateModel:r.types.model("GDCFeatureWidget",{id:u.ElementId,type:r.types.literal("GDCFeatureWidget"),featureData:r.types.frozen({})}).actions((e=>({setFeatureData(t){e.featureData=t},clearFeatureData(){e.featureData={}}}))),ReactComponent:Re}))),e.addWidgetType((()=>{return new T({name:"GDCSearchWidget",heading:"Search GDC",...(n=e,{configSchema:t.ConfigurationSchema("GDCSearchWidget",{}),ReactComponent:cn,stateModel:n.load(Ne),HeadingComponent:()=>c.createElement(c.Fragment,null,"GDC Data Import")})});var n})),e.addInternetAccountType((()=>new R({name:"GDCInternetAccount",configSchema:Io,stateModel:Lo(Io)})))}configure(e){o.isAbstractMenuManager(e.rootModel)&&e.rootModel.appendToMenu("Tools",{label:"GDC Data Import",icon:N,onClick:e=>{e.showWidget(e.addWidget("GDCSearchWidget","gdcSearchWidget"))}}),e.jexl.addFunction("mafColouring",(e=>{switch(e.get("variant_classification")){case"Intron":return"blue";case"Nonsense_Mutation":return"brown";case"Missense_Mutation":return"goldenrod";case"Silent":return"orange";case"Splice_Site":return"green";case"Translation_Start_Site":return"skyblue";case"Nonstop_Mutation":return"red";case"IGR":return"violet";case"Frame_Shift_Del":return"pink";case"Frame_Shift_Ins":return"olive";case"In_Frame_Del":return"yellowgreen";case"In_Frame_Ins":return"purple";case"3'UTR":return"lightgray";case"3'Flank":return"maroon";case"5'UTR":return"lime";case"5'Flank":return"magenta";case"RNA":return"cyan";case"Targeted_Region":return"crimson";default:return"black"}})),e.jexl.addFunction("switch",((e,t)=>{t=JSON.parse(t);const n=e.get("consequence").hits.edges.filter((e=>e.node.transcript.is_canonical))[0].node.transcript.annotation[t.attributeName],a=e.get(t.attributeName),r=n||a;let i="black";return t.values.forEach((e=>{r===e.name&&(i=`${e.colour}`)})),i})),e.jexl.addFunction("ieqColouring",((e,t)=>{const n=e.get(t),a=Math.ceil(Math.log10(6060));return`rgb(184,${Math.abs(100*Math.log10(n)/a-200)},11)`})),e.jexl.addFunction("rgb",((e,t)=>`rgb(0,${e.get(t)},0)`)),e.jexl.addFunction("cancer",((e,t)=>e.get(t)?"red":"blue"))}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=jbrowse-plugin-gdc.umd.production.min.js.map
